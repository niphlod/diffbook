<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]><html class="ie ie6 ie-lte9 ie-lte8 ie-lte7 no-js" lang="en-us"> <![endif]-->
<!--[if IE 7]><html class="ie ie7 ie-lte9 ie-lte8 ie-lte7 no-js" lang="en-us"> <![endif]-->
<!--[if IE 8]><html class="ie ie8 ie-lte9 ie-lte8 no-js" lang="en-us"> <![endif]-->
<!--[if IE 9]><html class="ie9 ie-lte9 no-js" lang="en-us"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="en-us"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <!-- www.phpied.com/conditional-comments-block-downloads/ -->
  <!-- Always force latest IE rendering engine
       (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <!--[if IE]>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <![endif]-->

  <title>Diffbook</title>

  <!-- http://dev.w3.org/html5/markup/meta.name.html -->
  <meta name="application-name" content="diffbook" />

  <!-- Speaking of Google, don't forget to set your site up:
       http://google.com/webmasters -->
  <meta name="google-site-verification" content="" />

  <!--  Mobile Viewport Fix
        j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag
        device-width: Occupy full width of the screen in its current orientation
        initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
        user-scalable = yes allows the user to zoom in -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="shortcut icon" href="static/images/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="static/images/favicon.png">

  <!-- All JavaScript at the bottom, except for Modernizr which enables
       HTML5 elements & feature detects -->
  <script src="static/js/modernizr.custom.js"></script>

  <!-- include stylesheets -->
  

  <script type="text/javascript"><!--
    // These variables are used by the web2py_ajax_init function in web2py_ajax.js (which is loaded below).
    var w2p_ajax_confirm_message = "Are you sure you want to delete this object?";
    var w2p_ajax_date_format = "%Y-%m-%d";
    var w2p_ajax_datetime_format = "%Y-%m-%d %H:%M:%S";
    //--></script>
<meta name="keywords" content="web2py, python, framework" />

<meta name="description" content="a cool new app" />

<meta name="generator" content="Web2py Web Framework" />

<meta name="author" content="Your Name &lt;you@example.com&gt;" />
<script src="static/js/jquery.js" type="text/javascript"></script><link href="static/css/calendar.css" rel="stylesheet" type="text/css" /><script src="static/js/calendar.js" type="text/javascript"></script><script src="static/js/web2py.js" type="text/javascript"></script><link href="static/css/web2py.css" rel="stylesheet" type="text/css" /><link href="static/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="static/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" /><link href="static/css/web2py_bootstrap.css" rel="stylesheet" type="text/css" />


  

  <!-- uncomment here to load jquery-ui
       <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all" />
       <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
       uncomment to load jquery-ui //-->
  <noscript><link href="static/css/web2py_bootstrap_nojs.css" rel="stylesheet" type="text/css" /></noscript>
  
  <style type="text/css">

      /* Sticky footer styles
      -------------------------------------------------- */

      html,
      body {
        height: 100%;
        /* The html and body elements cannot have any padding or margin. */
      }

      /* Wrapper for page content to push down footer */
      #wrap {
        min-height: 100%;
        height: auto !important;
        height: 100%;
        /* Negative indent footer by it's height */
        margin: 0 auto -60px;
      }

      /* Set the fixed height of the footer here */
      #push,
      #footer {
        height: 60px;
      }
      #footer {
        background-color: #f5f5f5;
      }

      /* Lastly, apply responsive CSS fixes as necessary */
      @media (max-width: 767px) {
        #footer {
          margin-left: -20px;
          margin-right: -20px;
          padding-left: 20px;
          padding-right: 20px;
        }
      }



      /* Custom page CSS
      -------------------------------------------------- */
      /* Not required for template or sticky footer method. */

      .container {
        width: auto;
        max-width: 680px;
      }
      .container .credit {
        margin: 20px 0;
      }

    </style>
</head>

<body>
  
  <body>


    <!-- Part 1: Wrap all page content here -->
    <div id="wrap">

      <!-- Begin page content -->
      <div class="container-fluid">
        <div class="page-header">
          	<h1>
              Diffbook
              <small>easy? diffbook</small>
            </h1>
        </div>
        
        


<div class="pagination">
  <ul>

      <li><a href="/diffbook/0.html">Chapter 0</a></li>

      <li><a href="/diffbook/1.html">Chapter 1</a></li>

      <li><a href="/diffbook/2.html">Chapter 2</a></li>

      <li><a href="/diffbook/3.html">Chapter 3</a></li>

      <li><a href="/diffbook/4.html">Chapter 4</a></li>

      <li><a href="/diffbook/5.html">Chapter 5</a></li>

      <li><a href="/diffbook/6.html">Chapter 6</a></li>

      <li><a href="/diffbook/7.html">Chapter 7</a></li>

      <li><a href="/diffbook/8.html">Chapter 8</a></li>

      <li><a href="/diffbook/9.html">Chapter 9</a></li>

      <li><a href="/diffbook/10.html">Chapter 10</a></li>

      <li><a href="/diffbook/11.html">Chapter 11</a></li>

      <li><a href="/diffbook/12.html">Chapter 12</a></li>

  </ul>
</div>

<div class="pagination">
  <ul>

      <li><a href="#com_d8f97f8f4ecedd71e16fe68c784f12baac3122eb">d8f97f8</a></li>

      <li><a href="#com_9f8f7358720ecddc06a79b90a68cc94ae5b28603">9f8f735</a></li>

      <li><a href="#com_d864cef3b68d807ffe8dbc10c26845734fefb97b">d864cef</a></li>

      <li><a href="#com_cb05b1148138efbd4699e56f91db7e76fa22df70">cb05b11</a></li>

      <li><a href="#com_50843f979f84c3f5f8a520eac06a028e94f952aa">50843f9</a></li>

      <li><a href="#com_568cedff0025a2ee8dcdfddc889f291b65e07e04">568cedf</a></li>

      <li><a href="#com_31b67861f63a89ddbca5db525b9ea745b956670e">31b6786</a></li>

      <li><a href="#com_bca115395ec795adafa7719bd4fd943970e598d9">bca1153</a></li>

      <li><a href="#com_be7f582b3cfaff86147de6fdd55e75f820082f81">be7f582</a></li>

      <li><a href="#com_26f5cf563dc22ad8fe7c18e13ab0b772051279b6">26f5cf5</a></li>

      <li><a href="#com_6b98100d18209c817980078fba78b5d511a8d299">6b98100</a></li>

      <li><a href="#com_097d699dc16179206ccb7e4aee863d6523cd471c">097d699</a></li>

      <li><a href="#com_c4d204c1ce228e1e5d39bd84d70dabbf970f515f">c4d204c</a></li>

      <li><a href="#com_b5ec2af9b064c76ede72c312a0520bda83fa6c97">b5ec2af</a></li>

      <li><a href="#com_7bce1473ce90f4e60f49d72bf1b61d32f430cb54">7bce147</a></li>

      <li><a href="#com_f4acbf65fe095fa93ffa48b7d082fa74c886be44">f4acbf6</a></li>

      <li><a href="#com_13346ee2edacdf0949376d16611c0c74748f4e41">13346ee</a></li>

      <li><a href="#com_60ecdf04f0802a47a3fb83116d1449f8c3e6f141">60ecdf0</a></li>

      <li><a href="#com_e706d40e67287f56741ecf730ef44a7e3ac66054">e706d40</a></li>

      <li><a href="#com_8017cbc3b9f2baffb10e902d03c1dfa21e709243">8017cbc</a></li>

      <li><a href="#com_e9ef9bd3f5cf6e50bf3ecb806fdf04300c7fc6fd">e9ef9bd</a></li>

      <li><a href="#com_2b20826f933cdc4c573965d6aa7e7b61cf42bcea">2b20826</a></li>

      <li><a href="#com_f2fd41dd2a0d4bf68f5cd4f0989fb32bdc35eac5">f2fd41d</a></li>

      <li><a href="#com_e234f6edf67361b3ba718ea10184ba8e7c2f773d">e234f6e</a></li>

      <li><a href="#com_2aa7b14c4f84ebf42f5c3e2d498705868f2568fe">2aa7b14</a></li>

      <li><a href="#com_83521b165c2d34b0f5904766b5cf9d6f9cf3660a">83521b1</a></li>

      <li><a href="#com_76c0363755694c36971ffc9db176312fe5c14276">76c0363</a></li>

      <li><a href="#com_2036cd246d994aba206bc072eeb7985ff36e808c">2036cd2</a></li>

      <li><a href="#com_a5a674979a2383b6d39345cb858e119c6435fb71">a5a6749</a></li>

      <li><a href="#com_0e40a4db49511e5ef707d53bdd9728433b9c5694">0e40a4d</a></li>

  </ul>
</div>



<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/d8f97f8f4ecedd71e16fe68c784f12baac3122eb">d8f97f8</a><ul><li>Date : 2012-09-17</li><li>added 40-web2py-czech-translation-in-progress thanks Mirek Zvolsky &lt;mirek.zvolsky@gmail.com&gt;</li></ul></li></ul>
<div class="row-fluid" id="com_d8f97f8f4ecedd71e16fe68c784f12baac3122eb">
    <div class="span6"><div class="diff"><div class=""> Alexey Nezhdanov,</div><div class=""> Alvaro Justen,</div><div class=""> Andrew Willimott,</div><div class=""> Angelo Compagnucci,</div><div class=""> Anthony Bastardi,</div><div class=""> Antonio Ramos,</div><div class=""> Arun K. Rajeevan,</div><div class=""> Attila Csipa,</div><div class=""> Ben Reinhart,</div><div class=""> Bill Ferret,</div><div class=""> Boris Manojlovic,</div><div class=""> Branko Vukelic,</div><div class=""> Brian Meredyk,</div><div class=""> Bruno Rocha,</div><div class=""> Carlos Galindo,</div><div class=""> Carsten Haese,</div><div class=""> Chris Clark,</div><div class=""> Chris Steel,</div><div class=""> Christian Foster Howes,</div><div class=""> Christopher Smiga,</div><div class=""> CJ Lazell,</div><div class=""> Cliff Kachinske,</div><div class=""> Craig Younkins,</div><div class=""> Daniel Lin,</div><div class=""> David Harrison,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div><div class="insert">+Dirk Krause,</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Alexey Nezhdanov,</div><div class=""> Alvaro Justen,</div><div class=""> Andrew Willimott,</div><div class=""> Angelo Compagnucci,</div><div class=""> Anthony Bastardi,</div><div class=""> Antonio Ramos,</div><div class=""> Arun K. Rajeevan,</div><div class=""> Attila Csipa,</div><div class=""> Ben Reinhart,</div><div class=""> Bill Ferret,</div><div class=""> Boris Manojlovic,</div><div class=""> Branko Vukelic,</div><div class=""> Brian Meredyk,</div><div class=""> Bruno Rocha,</div><div class=""> Carlos Galindo,</div><div class=""> Carsten Haese,</div><div class=""> Chris Clark,</div><div class=""> Chris Steel,</div><div class=""> Christian Foster Howes,</div><div class=""> Christopher Smiga,</div><div class=""> CJ Lazell,</div><div class=""> Cliff Kachinske,</div><div class=""> Craig Younkins,</div><div class=""> Daniel Lin,</div><div class=""> David Harrison,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/9f8f7358720ecddc06a79b90a68cc94ae5b28603">9f8f735</a><ul><li>Date : 2013-02-25</li><li>some edits</li></ul></li></ul>
<div class="row-fluid" id="com_9f8f7358720ecddc06a79b90a68cc94ae5b28603">
    <div class="span6"><div class="diff"><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class="insert">runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7<span class="highlight">.</span></div><div class=""> </div><div class=""> web2py provides a ticketing system for error events. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class=""> Another important feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions. We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will work even better today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class="insert">validates <span class="highlight">the</span> submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, and oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class="insert">prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, <span class="highlight">the visitor</span> gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class=""> web2py also supports components, i.e. actions which can be loaded in a view and interact with the visitor via Ajax without re-loading the entire page. This is done via a ``LOAD`` helper which allows very modular design of applications; it is discussed in chapter 3 in the context of the wiki and, in some detail, in the last chapter of this book.</div><div class=""> </div><div class=""> ### Principles</div><div class=""> </div><div class=""> Python programming typically follows these basic principles:</div><div class=""> - Don&#x27;t repeat yourself (DRY).</div><div class=""> - There should be only one way of doing things.</div><div class=""> - Explicit is better than implicit.</div><div class=""> </div><div class=""> web2py fully embraces the first two principles by forcing the developer to use sound software</div><div class=""> engineering practices that discourage repetition of code. web2py guides the developer through almost</div><div class=""> all the tasks common in web application development (creating and processing forms, managing</div><div class=""> sessions, cookies, errors, etc.).</div><div class=""> </div><div class=""> ``request``:inxx</div><div class=""> web2py differs from other frameworks with regard to the third principle, which sometimes conflicts</div><div class=""> with the other two. In particular, web2py does not import user applications, but executes them in a predefined context.  This context exposes the Python keywords, as well as the web2py keywords.</div><div class=""> </div><div class=""> To some this may appear as magic, but it should not.</div><div class=""> Simply, in practice, some modules are already imported without you doing so.</div><div class=""> web2py is trying to avoid the annoying characteristic of</div><div class=""> other frameworks that force the developer to import the same modules at the top of every model and</div><div class=""> controller.</div><div class=""> </div><div class=""> web2py, by importing its own modules, saves time and prevents mistakes, thus following the spirit of &quot;don&#x27;t repeat yourself&quot;</div><div class=""> and &quot;there should be only one way of doing things&quot;.</div><div class=""> </div><div class=""> If the developer wishes to use other Python modules or third-party modules, those</div><div class=""> modules must be imported explicitly, as in any other Python program.</div><div class=""> That list is reproduced here, along with a description of how each issue is addr</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class=""> - ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign Ajax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> ### In the box</div><div class=""> </div><div class=""> You can download web2py from the official web site:</div><div class=""> </div><div class=""> ``</div><div class=""> http://www.web2py.com</div><div class=""> ``:code</div><div class=""> </div><div class=""> web2py is composed of the following components:</div><div class=""> - **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class=""> - **web server**: the Rocket WSGI web server.</div><div class=""> - the **admin** application: used to create, design, and manage other web2py applications. **admin** provides a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class=""> - the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class=""> - the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class=""> </div><div class=""> web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class=""> </div><div class=""> The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class="insert">+To run the source code, you need Python 2.5 or 2.7 pre-installed on the system. You also need one of the supported database engines installed.</div><div class="insert">+For testing and light-demand applications, you can use the SQLite database, included with Python 2.7.</div><div class=""> </div><div class="insert">The binary versions of web2py (for Windows and Mac OS X) include a Python 2.<span class="highlight">7</span> interpreter and</div><div class=""> the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class=""> enables you to run web2py out of the box.</div><div class=""> </div><div class=""> The following image depicts the overall web2py structure:</div><div class=""> </div><div class=""> [[image @///image/en300.png center 480px]]</div><div class=""> </div><div class="insert">+At the bottom we find the interpreter. Moving up we find the web server (rocket), the libraries, and the applications. Each application consists for its own MVC design (models, controllers, views, modules, languages, databases, and static files). Each application includes it own database administration code (appadmin). Every web2py instance ships with three applications: welcome (the scaffolding app), admin (the web based IDE), and examples (copy of website and examples). </div><div class="insert">+</div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class="insert">- Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, <span class="highlight">schedulre, </span>cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="insert">- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss <span class="highlight"></span>Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class="insert">+- Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, and tagging.</div><div class="insert">+- Chapter 13 is about production deployment of web2py applications. We specifically discuss the deployment on a LAMP web server (which we consider the main deployment alternative). We discuss alterantive web servers, and configuration of the PostgreSQL database. We discuss running as a service on a Microsoft Windows environment, and deployment on some specific platforms including Google Applications Engine, Heorku, and PythonAnywhere. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class="delete">runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7<span class="highlight">, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</span></div><div class=""> </div><div class=""> web2py provides a ticketing system for error events. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class=""> Another important feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions. We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will work even better today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class="delete">validates <span class="highlight">a</span> submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, and oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class="delete">prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, <span class="highlight">he</span> gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class=""> web2py also supports components, i.e. actions which can be loaded in a view and interact with the visitor via Ajax without re-loading the entire page. This is done via a ``LOAD`` helper which allows very modular design of applications; it is discussed in chapter 3 in the context of the wiki and, in some detail, in the last chapter of this book.</div><div class=""> </div><div class=""> ### Principles</div><div class=""> </div><div class=""> Python programming typically follows these basic principles:</div><div class=""> - Don&#x27;t repeat yourself (DRY).</div><div class=""> - There should be only one way of doing things.</div><div class=""> - Explicit is better than implicit.</div><div class=""> </div><div class=""> web2py fully embraces the first two principles by forcing the developer to use sound software</div><div class=""> engineering practices that discourage repetition of code. web2py guides the developer through almost</div><div class=""> all the tasks common in web application development (creating and processing forms, managing</div><div class=""> sessions, cookies, errors, etc.).</div><div class=""> </div><div class=""> ``request``:inxx</div><div class=""> web2py differs from other frameworks with regard to the third principle, which sometimes conflicts</div><div class=""> with the other two. In particular, web2py does not import user applications, but executes them in a predefined context.  This context exposes the Python keywords, as well as the web2py keywords.</div><div class=""> </div><div class=""> To some this may appear as magic, but it should not.</div><div class=""> Simply, in practice, some modules are already imported without you doing so.</div><div class=""> web2py is trying to avoid the annoying characteristic of</div><div class=""> other frameworks that force the developer to import the same modules at the top of every model and</div><div class=""> controller.</div><div class=""> </div><div class=""> web2py, by importing its own modules, saves time and prevents mistakes, thus following the spirit of &quot;don&#x27;t repeat yourself&quot;</div><div class=""> and &quot;there should be only one way of doing things&quot;.</div><div class=""> </div><div class=""> If the developer wishes to use other Python modules or third-party modules, those</div><div class=""> modules must be imported explicitly, as in any other Python program.</div><div class=""> That list is reproduced here, along with a description of how each issue is addr</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class=""> - ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign Ajax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> ### In the box</div><div class=""> </div><div class=""> You can download web2py from the official web site:</div><div class=""> </div><div class=""> ``</div><div class=""> http://www.web2py.com</div><div class=""> ``:code</div><div class=""> </div><div class=""> web2py is composed of the following components:</div><div class=""> - **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class=""> - **web server**: the Rocket WSGI web server.</div><div class=""> - the **admin** application: used to create, design, and manage other web2py applications. **admin** provides a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class=""> - the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class=""> - the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class=""> </div><div class=""> web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class=""> </div><div class=""> The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class="delete">-To run the source code, you need Python 2.5 pre-installed on the system. You also need one of the supported database engines installed.</div><div class="delete">-For testing and light-demand applications, you can use the SQLite database, included with Python 2.5.</div><div class=""> </div><div class="delete">The binary versions of web2py (for Windows and Mac OS X) include a Python 2.<span class="highlight">5</span> interpreter and</div><div class=""> the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class=""> enables you to run web2py out of the box.</div><div class=""> </div><div class=""> The following image depicts the overall web2py structure:</div><div class=""> </div><div class=""> [[image @///image/en300.png center 480px]]</div><div class=""> </div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class="delete">- Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, <span class="highlight"></span>cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="delete">- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss <span class="highlight">legacy </span>Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class="delete">-- Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class="delete">-- Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/d864cef3b68d807ffe8dbc10c26845734fefb97b">d864cef</a><ul><li>Date : 2013-02-04</li><li>fixed all but chap 6</li></ul></li></ul>
<div class="row-fluid" id="com_d864cef3b68d807ffe8dbc10c26845734fefb97b">
    <div class="span6"><div class="diff"><div class=""> In the diagram:</div><div class=""> - The Server can be the web2py built-in web server or a third-party server, such as Apache. The Server handles multi-threading.</div><div class=""> - &quot;main&quot; is the main WSGI application. It performs all common tasks and wraps user applications. It deals with cookies, sessions, transactions, URL routing and reverse routing, and dispatching.</div><div class=""> It can serve and stream static files if the web server is not doing it already.</div><div class=""> - The Models, Views and Controller components make up the user application.</div><div class=""> - Multiple applications can be hosted in the same web2py instance.</div><div class=""> - The dashed arrows represent communication with the database engine(s). The database queries can be written in raw SQL (discouraged) or by using the web2py Database Abstraction Layer (recommended), so that web2py application code is not dependent on the specific database engine.</div><div class="insert">- The dispatcher maps the requested URL to a function call in the controller. The output of the function can be a string or a dictionary of symbols (a hash table). The data in the dictionary is rendered by a view. If the visitor requests an HTML page (the default), the dictionary is rendered into an HTML page. If the visitor requests the same page in XML, web2py tries to find a view that can render the dictionary in XML. The developer can create views to render pages in any of the already supported protocols (HTML, XML, JSON, RSS, CSV, <span class="highlight">and </span>RTF) or in additional custom protocols.</div><div class=""> - All calls are wrapped into a transaction, and any uncaught exception causes the transaction to be rolled back. If the request succeeds, the transaction is committed.</div><div class=""> - web2py also handles sessions and session cookies automatically, and when a transaction is committed, the session is also stored, unless specified otherwise.</div><div class=""> - It is possible to register recurrent tasks (via cron) to run at scheduled times and/or after the completion of certain actions. In this way it is possible to run long and compute-intensive tasks in the background without slowing down navigation.</div><div class=""> </div><div class=""> Here is a minimal and complete MVC application, consisting of three files:</div><div class=""> </div><div class=""> **&quot;db.py&quot; is the model:**</div><div class=""> </div><div class=""> ``</div><div class=""> db = DAL(&#x27;sqlite://storage.sqlite&#x27;)</div><div class=""> db.define_table(&#x27;contact&#x27;,</div><div class="">    Field(&#x27;name&#x27;),</div><div class="">    Field(&#x27;phone&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> It connects to the database (in this example a SQLite database stored in the ``storage.sqlite`` file) and</div><div class=""> defines a table called ``contact``. If the table does not exist, web2py creates it and, transparently</div><div class=""> and in the background,</div><div class=""> generates SQL code in the appropriate SQL dialect for the specific database engine used.</div><div class=""> The developer can</div><div class=""> see the generated SQL but does not need to change the code if the database back-end, which defaults to</div><div class=""> SQLite, is replaced with MySQL, PostgreSQL, MSSQL, FireBird, Oracle, DB2, Informix, Interbase, Ingres, and the Google App Engine (both SQL and NoSQL).</div><div class=""> </div><div class=""> Once a table is defined and created, web2py also generates a fully functional web-based database</div><div class=""> administration interface, called **appadmin**, to access the database and the tables.</div><div class=""> </div><div class=""> **&quot;default.py&quot; is the controller:**</div><div class=""> </div><div class=""> ``</div><div class=""> def contacts():</div><div class=""> web2py was originally developed as a teaching tool, with the following primary m</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, and supports SSL and IPv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class=""> </div><div class=""> WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class=""> </div><div class=""> Here is a screenshot of the main web2py **admin** interface:</div><div class=""> </div><div class=""> [[image @///image/en200.png center 480px]]</div><div class=""> </div><div class=""> </div><div class=""> ### Security</div><div class=""> ``security``:inxx</div><div class=""> The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class=""> on improving the security of application software.</div><div class=""> </div><div class=""> OWASP has listed the top ten security issues that put web applications at risk.</div><div class=""> That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class=""> - ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class="insert">- ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign <span class="highlight">A</span>jax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> ### In the box</div><div class=""> </div><div class=""> You can download web2py from the official web site:</div><div class=""> </div><div class=""> ``</div><div class=""> http://www.web2py.com</div><div class=""> ``:code</div><div class=""> </div><div class=""> web2py is composed of the following components:</div><div class=""> - **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class=""> - **web server**: the Rocket WSGI web server.</div><div class="insert">- the **admin** application: used to create, design, and manage other web2py applications. **admin** provide<span class="highlight">s</span> a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class=""> - the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class=""> - the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class=""> </div><div class=""> web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class=""> </div><div class=""> The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class=""> To run the source code, you need Python 2.5 pre-installed on the system. You also need one of the supported database engines installed.</div><div class=""> For testing and light-demand applications, you can use the SQLite database, included with Python 2.5.</div><div class=""> </div><div class=""> The binary versions of web2py (for Windows and Mac OS X) include a Python 2.5 interpreter and</div><div class=""> the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class=""> enables you to run web2py out of the box.</div><div class=""> </div><div class=""> The following image depicts the overall web2py structure:</div><div class=""> </div><div class=""> [[image @///image/en300.png center 480px]]</div><div class=""> </div><div class=""> ### License</div><div class=""> ``license``:inxx</div><div class=""> </div><div class=""> web2py is licensed under the LGPL version 3 License. The full text of the license if available in ref.``lgpl3``:cite.</div><div class=""> </div><div class=""> In accordance with LGPL you may:</div><div class=""> </div><div class=""> - redistribute web2py with your apps (including official web2py binary versions)</div><div class=""> - release your applications which use official web2py libraries under any license you wish</div><div class=""> </div><div class=""> Yet you must:</div><div class=""> </div><div class=""> - make clear in the documentation that your application uses web2py</div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the Col</div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class=""> - Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class=""> - Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class=""> - Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class=""> - Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class=""> </div><div class=""> This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class=""> This book does not cover web2py appliances (i.e. ready made applications).</div><div class=""> </div><div class=""> You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class=""> </div><div class=""> You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class=""> ``MARKMIN``:inxx</div><div class=""> This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class=""> </div><div class=""> ### Support</div><div class=""> </div><div class="insert">The main support channel is the usergroup``usergroup``:cite, with dozens of posts every<span class="highlight"> </span>day. Even if you&#x27;re a newb<span class="highlight">ie</span>, don&#x27;t hesitate to ask - we&#x27;ll be pleased to help you.  </div><div class=""> There is also a formal issue tracker system on http://code.google.com/p/web2py/issue . Last but not least, you can have professional support (see the web site for details). </div><div class=""> </div><div class=""> ### Contribute</div><div class=""> </div><div class="insert">Any help is really appreciated. You can help other users on the user<span class="highlight"> </span>group, or by directly submitting patches on the program (at the GitHub site https://github.com/web2py/web2py). </div><div class=""> Even if you find a typo on this book, or have an improvement on it, the best way to help is by patching the book itself (which is under the source folder of the repository </div><div class=""> at https://github.com/mdipierro/web2py-book).</div></div></div>
    <div class="span6"><div class="diff"><div class=""> In the diagram:</div><div class=""> - The Server can be the web2py built-in web server or a third-party server, such as Apache. The Server handles multi-threading.</div><div class=""> - &quot;main&quot; is the main WSGI application. It performs all common tasks and wraps user applications. It deals with cookies, sessions, transactions, URL routing and reverse routing, and dispatching.</div><div class=""> It can serve and stream static files if the web server is not doing it already.</div><div class=""> - The Models, Views and Controller components make up the user application.</div><div class=""> - Multiple applications can be hosted in the same web2py instance.</div><div class=""> - The dashed arrows represent communication with the database engine(s). The database queries can be written in raw SQL (discouraged) or by using the web2py Database Abstraction Layer (recommended), so that web2py application code is not dependent on the specific database engine.</div><div class="delete">- The dispatcher maps the requested URL to a function call in the controller. The output of the function can be a string or a dictionary of symbols (a hash table). The data in the dictionary is rendered by a view. If the visitor requests an HTML page (the default), the dictionary is rendered into an HTML page. If the visitor requests the same page in XML, web2py tries to find a view that can render the dictionary in XML. The developer can create views to render pages in any of the already supported protocols (HTML, XML, JSON, RSS, CSV, <span class="highlight"></span>RTF) or in additional custom protocols.</div><div class=""> - All calls are wrapped into a transaction, and any uncaught exception causes the transaction to be rolled back. If the request succeeds, the transaction is committed.</div><div class=""> - web2py also handles sessions and session cookies automatically, and when a transaction is committed, the session is also stored, unless specified otherwise.</div><div class=""> - It is possible to register recurrent tasks (via cron) to run at scheduled times and/or after the completion of certain actions. In this way it is possible to run long and compute-intensive tasks in the background without slowing down navigation.</div><div class=""> </div><div class=""> Here is a minimal and complete MVC application, consisting of three files:</div><div class=""> </div><div class=""> **&quot;db.py&quot; is the model:**</div><div class=""> </div><div class=""> ``</div><div class=""> db = DAL(&#x27;sqlite://storage.sqlite&#x27;)</div><div class=""> db.define_table(&#x27;contact&#x27;,</div><div class="">    Field(&#x27;name&#x27;),</div><div class="">    Field(&#x27;phone&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> It connects to the database (in this example a SQLite database stored in the ``storage.sqlite`` file) and</div><div class=""> defines a table called ``contact``. If the table does not exist, web2py creates it and, transparently</div><div class=""> and in the background,</div><div class=""> generates SQL code in the appropriate SQL dialect for the specific database engine used.</div><div class=""> The developer can</div><div class=""> see the generated SQL but does not need to change the code if the database back-end, which defaults to</div><div class=""> SQLite, is replaced with MySQL, PostgreSQL, MSSQL, FireBird, Oracle, DB2, Informix, Interbase, Ingres, and the Google App Engine (both SQL and NoSQL).</div><div class=""> </div><div class=""> Once a table is defined and created, web2py also generates a fully functional web-based database</div><div class=""> administration interface, called **appadmin**, to access the database and the tables.</div><div class=""> </div><div class=""> **&quot;default.py&quot; is the controller:**</div><div class=""> </div><div class=""> ``</div><div class=""> def contacts():</div><div class=""> web2py was originally developed as a teaching tool, with the following primary m</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, and supports SSL and IPv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class=""> </div><div class=""> WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class=""> </div><div class=""> Here is a screenshot of the main web2py **admin** interface:</div><div class=""> </div><div class=""> [[image @///image/en200.png center 480px]]</div><div class=""> </div><div class=""> </div><div class=""> ### Security</div><div class=""> ``security``:inxx</div><div class=""> The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class=""> on improving the security of application software.</div><div class=""> </div><div class=""> OWASP has listed the top ten security issues that put web applications at risk.</div><div class=""> That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class=""> - ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class="delete">- ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign <span class="highlight">a</span>jax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> ### In the box</div><div class=""> </div><div class=""> You can download web2py from the official web site:</div><div class=""> </div><div class=""> ``</div><div class=""> http://www.web2py.com</div><div class=""> ``:code</div><div class=""> </div><div class=""> web2py is composed of the following components:</div><div class=""> - **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class=""> - **web server**: the Rocket WSGI web server.</div><div class="delete">- the **admin** application: used to create, design, and manage other web2py applications. **admin** provide<span class="highlight"></span> a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class=""> - the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class=""> - the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class=""> </div><div class=""> web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class=""> </div><div class=""> The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class=""> To run the source code, you need Python 2.5 pre-installed on the system. You also need one of the supported database engines installed.</div><div class=""> For testing and light-demand applications, you can use the SQLite database, included with Python 2.5.</div><div class=""> </div><div class=""> The binary versions of web2py (for Windows and Mac OS X) include a Python 2.5 interpreter and</div><div class=""> the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class=""> enables you to run web2py out of the box.</div><div class=""> </div><div class=""> The following image depicts the overall web2py structure:</div><div class=""> </div><div class=""> [[image @///image/en300.png center 480px]]</div><div class=""> </div><div class=""> ### License</div><div class=""> ``license``:inxx</div><div class=""> </div><div class=""> web2py is licensed under the LGPL version 3 License. The full text of the license if available in ref.``lgpl3``:cite.</div><div class=""> </div><div class=""> In accordance with LGPL you may:</div><div class=""> </div><div class=""> - redistribute web2py with your apps (including official web2py binary versions)</div><div class=""> - release your applications which use official web2py libraries under any license you wish</div><div class=""> </div><div class=""> Yet you must:</div><div class=""> </div><div class=""> - make clear in the documentation that your application uses web2py</div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the Col</div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class=""> - Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class=""> - Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class=""> - Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class=""> - Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class=""> </div><div class=""> This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class=""> This book does not cover web2py appliances (i.e. ready made applications).</div><div class=""> </div><div class=""> You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class=""> </div><div class=""> You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class=""> ``MARKMIN``:inxx</div><div class=""> This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class=""> </div><div class=""> ### Support</div><div class=""> </div><div class="delete">The main support channel is the usergroup``usergroup``:cite, with dozens of posts every<span class="highlight"></span>day. Even if you&#x27;re a newb<span class="highlight">y</span>, don&#x27;t hesitate to ask - we&#x27;ll be pleased to help you.  </div><div class=""> There is also a formal issue tracker system on http://code.google.com/p/web2py/issue . Last but not least, you can have professional support (see the web site for details). </div><div class=""> </div><div class=""> ### Contribute</div><div class=""> </div><div class="delete">Any help is really appreciated. You can help other users on the user<span class="highlight"></span>group, or by directly submitting patches on the program (at the GitHub site https://github.com/web2py/web2py). </div><div class=""> Even if you find a typo on this book, or have an improvement on it, the best way to help is by patching the book itself (which is under the source folder of the repository </div><div class=""> at https://github.com/mdipierro/web2py-book).</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/cb05b1148138efbd4699e56f91db7e76fa22df70">cb05b11</a><ul><li>Date : 2012-09-17</li><li>Typo on citations</li></ul></li></ul>
<div class="row-fluid" id="com_cb05b1148138efbd4699e56f91db7e76fa22df70">
    <div class="span6"><div class="diff"><div class=""> The two classic approaches for developing web applications are:</div><div class="insert">- Generating HTML``html<span class="highlight">-w``</span>:<span class="highlight">cite ``</span>html<span class="highlight">-</span>o``:cite  programmatically.</div><div class=""> - Embedding code into HTML pages.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> The two classic approaches for developing web applications are:</div><div class="delete">- Generating HTML``html<span class="highlight"></span>:<span class="highlight">w,</span>html<span class="highlight">:</span>o``:cite  programmatically.</div><div class=""> - Embedding code into HTML pages.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/50843f979f84c3f5f8a520eac06a028e94f952aa">50843f9</a><ul><li>Date : 2012-09-11</li><li>added Vladyslav acknowledgements</li></ul></li></ul>
<div class="row-fluid" id="com_50843f979f84c3f5f8a520eac06a028e94f952aa">
    <div class="span6"><div class="diff"><div class="insert">+Vladyslav Kozlovskyy,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="insert">I particularly thank <span class="highlight">Anthony, </span>Jonathan, Mariano, Bruno<span class="highlight">, Vladyslav</span>, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Zahariash.</div><div class=""> </div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="delete">I particularly thank <span class="highlight"></span>Jonathan, Mariano, Bruno<span class="highlight"></span>, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/568cedff0025a2ee8dcdfddc889f291b65e07e04">568cedf</a><ul><li>Date : 2012-09-17</li><li>typo</li></ul></li></ul>
<div class="row-fluid" id="com_568cedff0025a2ee8dcdfddc889f291b65e07e04">
    <div class="span6"><div class="diff"><div class="insert">WSGI ``wsgi<span class="highlight">-w``</span>:<span class="highlight">cite ``</span>wsgi<span class="highlight">-</span>o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">WSGI ``wsgi<span class="highlight"></span>:<span class="highlight">w,</span>wsgi<span class="highlight">:</span>o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/31b67861f63a89ddbca5db525b9ea745b956670e">31b6786</a><ul><li>Date : 2012-09-06</li><li>Fix typos</li></ul></li></ul>
<div class="row-fluid" id="com_31b67861f63a89ddbca5db525b9ea745b956670e">
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class=""> - Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed By Timothy Farrell. It is as fast as Apache with mod_wsgi. Our tests also indicate that, on an average PC, it serves an average dynamic page without database access in about 10ms. The DAL has very low overhead, typically less than 3%.</div><div class="insert">- web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can co<span class="highlight"></span>exist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class=""> - Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed By Timothy Farrell. It is as fast as Apache with mod_wsgi. Our tests also indicate that, on an average PC, it serves an average dynamic page without database access in about 10ms. The DAL has very low overhead, typically less than 3%.</div><div class="delete">- web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can co<span class="highlight">h</span>exist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/bca115395ec795adafa7719bd4fd943970e598d9">bca1153</a><ul><li>Date : 2012-12-28</li><li>minor edit</li></ul></li></ul>
<div class="row-fluid" id="com_bca115395ec795adafa7719bd4fd943970e598d9">
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class="insert">- Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web <span class="highlight">interface, incuding an Integrated Development Environment </span>w<span class="highlight">ith Debugger and database</span> interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and IPv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class="delete">- Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web <span class="highlight">bro</span>w<span class="highlight">ser</span> interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and IPv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/be7f582b3cfaff86147de6fdd55e75f820082f81">be7f582</a><ul><li>Date : 2013-02-13</li><li>scheduler corrections</li></ul></li></ul>
<div class="row-fluid" id="com_be7f582b3cfaff86147de6fdd55e75f820082f81">
    <div class="span6"><div class="diff"><div class="insert">+Nick Vargish,</div><div class=""> Nico de Groot,</div><div class=""> Nico Zanferrari,</div><div class=""> Nicolas Bruxer,</div><div class=""> Nik Klever,</div><div class=""> Olaf Ferger,</div><div class=""> Oliver Dain,</div><div class=""> Olivier Roch Vilato,</div><div class=""> Omi Chiba,</div><div class=""> Ondrej Such,</div><div class=""> Ont Rif,</div><div class=""> Oscar Benjamin,</div><div class=""> Osman Masood,</div><div class=""> Ovidio Marinho Falcao Neto,</div><div class=""> Pai,</div><div class=""> Panos Jee,</div><div class=""> Paolo Betti,</div><div class=""> Paolo Caruccio,</div><div class=""> Paolo Gasparello,</div><div class=""> Paolo Valleri,</div><div class=""> Patrick Breitenbach,</div><div class=""> Pearu Peterson,</div><div class=""> Peli Gergely,</div><div class=""> Pete Hunt,</div><div class="insert">+Peter Kirchner,</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class=""> Pieter Muller,</div><div class=""> Piotr Banasziewicz,</div><div class=""> Ramjee Ganti,</div><div class=""> Richard Gordon,</div><div class=""> Richard Ree,</div><div class=""> Robert Kooij,</div><div class=""> Robert Valentak,</div><div class=""> Roberto	Perdomo,</div><div class=""> Robin Bhattacharyya,</div><div class=""> Roman Bataev,</div><div class=""> Ron McOuat,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class=""> Running Calm,</div><div class=""> Ryan Seto,</div><div class=""> Salomon Derossi,</div><div class=""> Sam Sheftel,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Tim Richardson,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wen Gong,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class=""> I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Brian, Bruno, Denes, Dane Denny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Margaret, Michele, Nico, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class=""> </div><div class=""> web2py contains code from the following authors, whom I would like to thank:</div><div class=""> </div><div class=""> Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class=""> </div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Nico de Groot,</div><div class=""> Nico Zanferrari,</div><div class=""> Nicolas Bruxer,</div><div class=""> Nik Klever,</div><div class=""> Olaf Ferger,</div><div class=""> Oliver Dain,</div><div class=""> Olivier Roch Vilato,</div><div class=""> Omi Chiba,</div><div class=""> Ondrej Such,</div><div class=""> Ont Rif,</div><div class=""> Oscar Benjamin,</div><div class=""> Osman Masood,</div><div class=""> Ovidio Marinho Falcao Neto,</div><div class=""> Pai,</div><div class=""> Panos Jee,</div><div class=""> Paolo Betti,</div><div class=""> Paolo Caruccio,</div><div class=""> Paolo Gasparello,</div><div class=""> Paolo Valleri,</div><div class=""> Patrick Breitenbach,</div><div class=""> Pearu Peterson,</div><div class=""> Peli Gergely,</div><div class=""> Pete Hunt,</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class=""> Pieter Muller,</div><div class=""> Piotr Banasziewicz,</div><div class=""> Ramjee Ganti,</div><div class=""> Richard Gordon,</div><div class=""> Richard Ree,</div><div class=""> Robert Kooij,</div><div class=""> Robert Valentak,</div><div class=""> Roberto	Perdomo,</div><div class=""> Robin Bhattacharyya,</div><div class=""> Roman Bataev,</div><div class=""> Ron McOuat,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class=""> Running Calm,</div><div class=""> Ryan Seto,</div><div class=""> Salomon Derossi,</div><div class=""> Sam Sheftel,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Tim Richardson,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wen Gong,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class=""> I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Brian, Bruno, Denes, Dane Denny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Margaret, Michele, Nico, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class=""> </div><div class=""> web2py contains code from the following authors, whom I would like to thank:</div><div class=""> </div><div class=""> Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class=""> </div><div class="delete">-The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class="delete">-</div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/26f5cf563dc22ad8fe7c18e13ab0b772051279b6">26f5cf5</a><ul><li>Date : 2013-02-04</li><li>more corrections</li></ul></li></ul>
<div class="row-fluid" id="com_26f5cf563dc22ad8fe7c18e13ab0b772051279b6">
    <div class="span6"><div class="diff"><div class=""> web2py is built for security. This means that it automatically addresses many of the issues</div><div class=""> that can lead to security vulnerabilities, by following well established practices. For</div><div class=""> example, it validates all input (to prevent injections), escapes all output (to prevent cross-site scripting),</div><div class=""> renames uploaded files (to prevent directory traversal attacks).</div><div class="insert">web2py <span class="highlight">t</span>a<span class="highlight">k</span>es <span class="highlight">care of main secur</span>it<span class="highlight">y issu</span>e<span class="highlight">s,</span> <span class="highlight">s</span>o<span class="highlight"></span> developers <span class="highlight">have less chances of </span>in<span class="highlight">troducing</span> <span class="highlight">vuln</span>er<span class="highlight">abi</span>l<span class="highlight"></span>it<span class="highlight">ies</span>.</div><div class=""> </div><div class=""> web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql-w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class=""> SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class=""> FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, </div><div class=""> Ingres``ingresdb``:cite, and MongoDB``mongodb``:cite.</div><div class=""> The DAL can also generate function calls for the Google Datastore</div><div class=""> when running on the Google App Engine (GAE)``gae``:cite.</div><div class="insert">+Experimentally we support more databases and new ones are constantly added.</div><div class="insert">+Please check on the web2py web site and mailing list for more recent adapters.</div><div class="insert">+Once one or more database tables are defined, web2py automatically generates a fully functional web-based database</div><div class=""> administration interface to access the database and the tables.</div><div class=""> </div><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class=""> runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class=""> </div><div class="insert">web2py provides a ticketing system<span class="highlight"> for error events</span>. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class="insert"><span class="highlight">Another important feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions. </span>We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will work even better today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, and oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> Benjamin,</div><div class=""> Bernd Rothert,</div><div class=""> Bill Ferret,</div><div class=""> Blomqvist,</div><div class=""> Boris Manojlovic,</div><div class=""> Branko Vukelic,</div><div class=""> Brent Zeiben,</div><div class=""> Brian Cottingham,</div><div class=""> Brian Harrison,</div><div class=""> Brian Meredyk,</div><div class=""> Bruno Rocha,</div><div class=""> CJ Lazell,</div><div class=""> Caleb Hattingh,</div><div class=""> Carlos Galindo,</div><div class=""> Carlos Hanson,</div><div class=""> Carsten Haese,</div><div class=""> Cedric Meyer,</div><div class=""> Charles Law,</div><div class=""> Charles Winebrinner,</div><div class=""> Chris Clark,</div><div class=""> Chris May,</div><div class=""> Chris Sanders,</div><div class=""> Christian Foster Howes,</div><div class=""> Christopher Smiga,</div><div class=""> Christopher Steel,</div><div class=""> Clavin Sim,</div><div class=""> Cliff Kachinske,</div><div class=""> Corne Dickens,</div><div class=""> Craig Younkins,</div><div class=""> Dan McGee,</div><div class=""> Dan Ragubba,</div><div class="insert">+Dane Wright,</div><div class=""> Danny Morgan,</div><div class=""> Daniel Gonz,</div><div class=""> Daniel Haag,</div><div class=""> Daniel Lin,</div><div class=""> Dave Stoll,</div><div class=""> David Adley,</div><div class=""> David Harrison,</div><div class=""> David Lin,</div><div class=""> David Marko,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div><div class=""> Diaz Luis,</div><div class=""> Dirk Krause,</div><div class=""> Dominic Koenig,</div><div class=""> Doug Warren,</div><div class=""> Douglas Philips,</div><div class=""> Douglas Soares de Andrade,</div><div class=""> Douglas and Alan,</div><div class=""> Dustin Bensing,</div><div class=""> Elcio Ferreira,</div><div class=""> Eric Vicenti,</div><div class=""> Erwin Olario,</div><div class=""> Falko Krause,</div><div class=""> Farsheed Ashouri,</div><div class=""> Felipe Meirelles,</div><div class=""> Flavien Scheurer,</div><div class=""> Fran Boon,</div><div class=""> Francisco Gama,</div><div class=""> Fred Yanowski,</div><div class=""> Friedrich Weber,</div><div class=""> Joel Carrier,</div><div class=""> Joel Samuelsson,</div><div class=""> John Heenan,</div><div class=""> Jon Romero,</div><div class=""> Jonas Rundberg,</div><div class=""> Jonathan Benn,</div><div class=""> Jonathan Lundell,</div><div class=""> Jose Jachuf,</div><div class=""> Joseph Piron,</div><div class=""> Josh Goldfoot,</div><div class=""> Josh Jaques,</div><div class=""> José Vicente de Sousa,</div><div class=""> Jurgis Pralgauskis,</div><div class=""> Keith Yang,</div><div class=""> Kenji Hosoda,</div><div class=""> Kenneth Lundstr,</div><div class=""> Kirill Spitsin,</div><div class=""> Kyle Smith,</div><div class=""> Larry Weinberg,</div><div class=""> Limodou,</div><div class=""> Loren McGinnis,</div><div class=""> Louis DaPrato,</div><div class=""> Luca De Alfaro,</div><div class=""> Luca Zachetti,</div><div class=""> Lucas D&#x27;Ávila,</div><div class=""> Madhukar R Pai,</div><div class=""> Manuele Presenti,</div><div class=""> Marc Abramowitz,</div><div class=""> Marcel Hellkamp,</div><div class=""> Marcel Leuthi,</div><div class=""> Marcello Della Longa,</div><div class="insert">+Margaret Greaney,</div><div class=""> Maria Mitica,</div><div class=""> Mariano Reingart,</div><div class=""> Marin Prajic,</div><div class=""> Marin Pranji,</div><div class=""> Marius van Niekerk,</div><div class=""> Mark Kirkwood,</div><div class=""> Mark Larsen,</div><div class=""> Mark Moore,</div><div class=""> Markus Gritsch,</div><div class=""> Mart Senecal,</div><div class=""> Martin Hufsky,</div><div class=""> Martin Mulone,</div><div class=""> Martin Weissenboeck,</div><div class=""> Mateusz Banach,</div><div class=""> Mathew Grabau,</div><div class=""> Mathieu Clabaut,</div><div class=""> Matt Doiron,</div><div class=""> Matthew Norris,</div><div class=""> Michael Fig,</div><div class=""> Michael Herman,</div><div class=""> Michael Howden,</div><div class=""> Michael Jursa,</div><div class=""> Michael Toomim,</div><div class=""> Michael Willis,</div><div class=""> Michele Comitini,</div><div class=""> Miguel Goncalves,</div><div class=""> Miguel Lopez,</div><div class=""> Mike Amy,</div><div class=""> Mike Dickun,</div><div class=""> Mike Ellis,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Tim Richardson,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wen Gong,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="insert">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Br<span class="highlight">ian, Br</span>uno, Denes, D<span class="highlight">ane D</span>enny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark<span class="highlight">, Margaret</span>, Michele, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py is built for security. This means that it automatically addresses many of the issues</div><div class=""> that can lead to security vulnerabilities, by following well established practices. For</div><div class=""> example, it validates all input (to prevent injections), escapes all output (to prevent cross-site scripting),</div><div class=""> renames uploaded files (to prevent directory traversal attacks).</div><div class="delete">web2py <span class="highlight">le</span>a<span class="highlight">v</span>es <span class="highlight">l</span>it<span class="highlight">tl</span>e<span class="highlight"></span> <span class="highlight">ch</span>o<span class="highlight">ice to application</span> developers <span class="highlight"></span>in<span class="highlight"></span> <span class="highlight">matt</span>er<span class="highlight">s re</span>l<span class="highlight">ated to secur</span>it<span class="highlight">y</span>.</div><div class=""> </div><div class=""> web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql-w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class=""> SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class=""> FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, </div><div class=""> Ingres``ingresdb``:cite, and MongoDB``mongodb``:cite.</div><div class=""> The DAL can also generate function calls for the Google Datastore</div><div class=""> when running on the Google App Engine (GAE)``gae``:cite.</div><div class="delete">-Experimentally we support more databases. Please check on the        web2py web site        and mailing list for more recent adapters.</div><div class="delete">-Once one or more database tables are defined, web2py also generates a fully functional web-based database</div><div class=""> administration interface to access the database and the tables.</div><div class=""> </div><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class=""> runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class=""> </div><div class="delete">web2py provides a ticketing system<span class="highlight"></span>. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class="delete">-Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class="delete"><span class="highlight"></span>We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will work even better today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, and oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> Benjamin,</div><div class=""> Bernd Rothert,</div><div class=""> Bill Ferret,</div><div class=""> Blomqvist,</div><div class=""> Boris Manojlovic,</div><div class=""> Branko Vukelic,</div><div class=""> Brent Zeiben,</div><div class=""> Brian Cottingham,</div><div class=""> Brian Harrison,</div><div class=""> Brian Meredyk,</div><div class=""> Bruno Rocha,</div><div class=""> CJ Lazell,</div><div class=""> Caleb Hattingh,</div><div class=""> Carlos Galindo,</div><div class=""> Carlos Hanson,</div><div class=""> Carsten Haese,</div><div class=""> Cedric Meyer,</div><div class=""> Charles Law,</div><div class=""> Charles Winebrinner,</div><div class=""> Chris Clark,</div><div class=""> Chris May,</div><div class=""> Chris Sanders,</div><div class=""> Christian Foster Howes,</div><div class=""> Christopher Smiga,</div><div class=""> Christopher Steel,</div><div class=""> Clavin Sim,</div><div class=""> Cliff Kachinske,</div><div class=""> Corne Dickens,</div><div class=""> Craig Younkins,</div><div class=""> Dan McGee,</div><div class=""> Dan Ragubba,</div><div class=""> Danny Morgan,</div><div class=""> Daniel Gonz,</div><div class=""> Daniel Haag,</div><div class=""> Daniel Lin,</div><div class=""> Dave Stoll,</div><div class=""> David Adley,</div><div class=""> David Harrison,</div><div class=""> David Lin,</div><div class=""> David Marko,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div><div class=""> Diaz Luis,</div><div class=""> Dirk Krause,</div><div class=""> Dominic Koenig,</div><div class=""> Doug Warren,</div><div class=""> Douglas Philips,</div><div class=""> Douglas Soares de Andrade,</div><div class=""> Douglas and Alan,</div><div class=""> Dustin Bensing,</div><div class=""> Elcio Ferreira,</div><div class=""> Eric Vicenti,</div><div class=""> Erwin Olario,</div><div class=""> Falko Krause,</div><div class=""> Farsheed Ashouri,</div><div class=""> Felipe Meirelles,</div><div class=""> Flavien Scheurer,</div><div class=""> Fran Boon,</div><div class=""> Francisco Gama,</div><div class=""> Fred Yanowski,</div><div class=""> Friedrich Weber,</div><div class=""> Joel Carrier,</div><div class=""> Joel Samuelsson,</div><div class=""> John Heenan,</div><div class=""> Jon Romero,</div><div class=""> Jonas Rundberg,</div><div class=""> Jonathan Benn,</div><div class=""> Jonathan Lundell,</div><div class=""> Jose Jachuf,</div><div class=""> Joseph Piron,</div><div class=""> Josh Goldfoot,</div><div class=""> Josh Jaques,</div><div class=""> José Vicente de Sousa,</div><div class=""> Jurgis Pralgauskis,</div><div class=""> Keith Yang,</div><div class=""> Kenji Hosoda,</div><div class=""> Kenneth Lundstr,</div><div class=""> Kirill Spitsin,</div><div class=""> Kyle Smith,</div><div class=""> Larry Weinberg,</div><div class=""> Limodou,</div><div class=""> Loren McGinnis,</div><div class=""> Louis DaPrato,</div><div class=""> Luca De Alfaro,</div><div class=""> Luca Zachetti,</div><div class=""> Lucas D&#x27;Ávila,</div><div class=""> Madhukar R Pai,</div><div class=""> Manuele Presenti,</div><div class=""> Marc Abramowitz,</div><div class=""> Marcel Hellkamp,</div><div class=""> Marcel Leuthi,</div><div class=""> Marcello Della Longa,</div><div class=""> Maria Mitica,</div><div class=""> Mariano Reingart,</div><div class=""> Marin Prajic,</div><div class=""> Marin Pranji,</div><div class=""> Marius van Niekerk,</div><div class=""> Mark Kirkwood,</div><div class=""> Mark Larsen,</div><div class=""> Mark Moore,</div><div class=""> Markus Gritsch,</div><div class=""> Mart Senecal,</div><div class=""> Martin Hufsky,</div><div class=""> Martin Mulone,</div><div class=""> Martin Weissenboeck,</div><div class=""> Mateusz Banach,</div><div class=""> Mathew Grabau,</div><div class=""> Mathieu Clabaut,</div><div class=""> Matt Doiron,</div><div class=""> Matthew Norris,</div><div class=""> Michael Fig,</div><div class=""> Michael Herman,</div><div class=""> Michael Howden,</div><div class=""> Michael Jursa,</div><div class=""> Michael Toomim,</div><div class=""> Michael Willis,</div><div class=""> Michele Comitini,</div><div class=""> Miguel Goncalves,</div><div class=""> Miguel Lopez,</div><div class=""> Mike Amy,</div><div class=""> Mike Dickun,</div><div class=""> Mike Ellis,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Tim Richardson,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wen Gong,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="delete">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Br<span class="highlight"></span>uno, Denes, D<span class="highlight"></span>enny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark<span class="highlight"></span>, Michele, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/6b98100d18209c817980078fba78b5d511a8d299">6b98100</a><ul><li>Date : 2013-01-08</li><li>fixed st_x and json field type</li></ul></li></ul>
<div class="row-fluid" id="com_6b98100d18209c817980078fba78b5d511a8d299">
    <div class="span6"><div class="diff"><div class="insert">Paolo V<span class="highlight">a</span>lleri,</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">Paolo V<span class="highlight">e</span>lleri,</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/097d699dc16179206ccb7e4aee863d6523cd471c">097d699</a><ul><li>Date : 2012-12-27</li><li>fixed typo, thanks Andrew</li></ul></li></ul>
<div class="row-fluid" id="com_097d699dc16179206ccb7e4aee863d6523cd471c">
    <div class="span6"><div class="diff"><div class="insert">+## Introduction</div><div class="insert">+web2py``web2py``:cite  is a free, open-source web framework for agile development of secure</div><div class="insert">+database-driven web applications; it is written in Python``python``:cite</div><div class="insert">+and programmable in Python.</div><div class="insert">+web2py is a full-stack framework,</div><div class="insert">+meaning that it contains all the components you need</div><div class="insert">+to build fully functional web applications.</div><div class="insert">+</div><div class="insert">+web2py is designed to guide a web developer to follow good software engineering practices, such as using</div><div class="insert">+the Model View Controller (MVC) pattern. web2py separates the data representation (the model)</div><div class="insert">+from the data presentation (the view) and also from the application logic and workflow (the controller). web2py</div><div class="insert">+provides libraries to help the developer design, implement, and test each of these three parts separately,</div><div class="insert">+and makes them work together.</div><div class="insert">+</div><div class="insert">+web2py is built for security. This means that it automatically addresses many of the issues</div><div class="insert">+that can lead to security vulnerabilities, by following well established practices. For</div><div class="insert">+example, it validates all input (to prevent injections), escapes all output (to prevent cross-site scripting),</div><div class="insert">+renames uploaded files (to prevent directory traversal attacks).</div><div class="insert">+web2py leaves little choice to application developers in matters related to security.</div><div class="insert">+</div><div class="insert">+web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql-w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class="insert">+SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class="insert">+FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, and</div><div class="insert">+Ingres``ingresdb``:cite.</div><div class="insert">+The DAL can also generate function calls for the Google Datastore</div><div class="insert">+when running on the Google App Engine (GAE)``gae``:cite.</div><div class="insert">+Experimentally we support more databases. Please check on the        web2py web site        and mailing list for more recent adapters.</div><div class="insert">+Once one or more database tables are defined, web2py also generates a fully functional web-based database</div><div class="insert">+administration interface to access the database and the tables.</div><div class="insert">+</div><div class="insert">+web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class="insert">+paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class="insert">+runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class="insert">+</div><div class="insert">+web2py provides a ticketing system. If an error occurs, a ticket is issued to the user,</div><div class="insert">+and the error is logged for the administrator.</div><div class="insert">+</div><div class="insert">+web2py is open source and released under the LGPL version 3 license.</div><div class="insert">+</div><div class="insert">+Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class="insert">+We have done so since the first release of web2py in October, 2007.</div><div class="insert">+New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will still work today.</div><div class="insert">+</div><div class="insert">+Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class="insert">+``</div><div class="insert">+db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class="insert">+needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class="insert">+</div><div class="insert">+Given the table defined above, the following code:</div><div class="insert">+``</div><div class="insert">+form = SQLFORM(db.person).process()</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+creates an insert form for this table that allows users to upload images. It also</div><div class="insert">+validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class="insert">+inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class="insert">+the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class="insert">+</div><div class="insert">+This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, adn oembed support:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+def index(): return auth.wiki()</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+The following code instead:</div><div class="insert">+``</div><div class="insert">+@auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class="insert">+def f(): ....</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class="insert">+</div><div class="insert">+web2py also supports components, i.e. actions which can be loaded in a view and interact with the visitor via Ajax without re-loading the entire page. This is done via a ``LOAD`` helper which allows very modular design of applications; it is discussed in chapter 3 in the context of the wiki and, in some detail, in the last chapter of this book.</div><div class="insert">+</div><div class="insert">+### Principles</div><div class="insert">+</div><div class="insert">+Python programming typically follows these basic principles:</div><div class="insert">+- Don&#x27;t repeat yourself (DRY).</div><div class="insert">+- There should be only one way of doing things.</div><div class="insert">+- Explicit is better than implicit.</div><div class="insert">+</div><div class="insert">+web2py fully embraces the first two principles by forcing the developer to use sound software</div><div class="insert">+engineering practices that discourage repetition of code. web2py guides the developer through almost</div><div class="insert">+all the tasks common in web application development (creating and processing forms, managing</div><div class="insert">+sessions, cookies, errors, etc.).</div><div class="insert">+</div><div class="insert">+``request``:inxx</div><div class="insert">+web2py differs from other frameworks with regard to the third principle, which sometimes conflicts</div><div class="insert">+with the other two. In particular, web2py does not import user applications, but executes them in a predefined context.  This context exposes the Python keywords, as well as the web2py keywords.</div><div class="insert">+</div><div class="insert">+To some this may appear as magic, but it should not.</div><div class="insert">+Simply, in practice, some modules are already imported without you doing so.</div><div class="insert">+web2py is trying to avoid the annoying characteristic of</div><div class="insert">+other frameworks that force the developer to import the same modules at the top of every model and</div><div class="insert">+controller.</div><div class="insert">+</div><div class="insert">+web2py, by importing its own modules, saves time and prevents mistakes, thus following the spirit of &quot;don&#x27;t repeat yourself&quot;</div><div class="insert">+and &quot;there should be only one way of doing things&quot;.</div><div class="insert">+</div><div class="insert">+If the developer wishes to use other Python modules or third-party modules, those</div><div class="insert">+modules must be imported explicitly, as in any other Python program.</div><div class="insert">+</div><div class="insert">+### Web frameworks</div><div class="insert">+``PHP``:inxx ``ASP``:inxx ``JSP``:inxx</div><div class="insert">+</div><div class="insert">+At its most fundamental level, a web application consists of a set of programs (or functions) that are</div><div class="insert">+executed when the corresponding URL is visited.</div><div class="insert">+The output of the program is returned to the visitor and rendered by the browser.</div><div class="insert">+</div><div class="insert">+The purpose of web frameworks is to allow developers to build new apps quickly, easily and without mistakes.</div><div class="insert">+This is done by providing APIs and tools that reduce and simplify the amount of coding that is required.</div><div class="insert">+</div><div class="insert">+The two classic approaches for developing web applications are:</div><div class="insert">+- Generating HTML``html-w``:cite ``html-o``:cite  programmatically.</div><div class="insert">+- Embedding code into HTML pages.</div><div class="insert">+</div><div class="insert">+The first model is the one that was followed, for example, by early CGI scripts.</div><div class="insert">+The second model is followed, for example, by PHP``php``:cite</div><div class="insert">+(where the code is in PHP, a C-like language), ASP (where the code is in Visual Basic), and JSP (where the code is in Java).</div><div class="insert">+</div><div class="insert">+Here is an example of a PHP program that, when executed, retrieves data from a database and</div><div class="insert">+returns an HTML page showing the selected records:</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;&lt;body&gt;&lt;h1&gt;Records&lt;/h1&gt;&lt;?</div><div class="insert">+  mysql_connect(localhost,username,password);</div><div class="insert">+  @mysql_select_db(database) or die( &quot;Unable to select database&quot;);</div><div class="insert">+  $query=&quot;SELECT * FROM contacts&quot;;</div><div class="insert">+  $result=mysql_query($query);</div><div class="insert">+  mysql_close();</div><div class="insert">+  $i=0;</div><div class="insert">+  while ($i &lt; mysql_numrows($result)) {</div><div class="insert">+    $name=mysql_result($result,$i,&quot;name&quot;);</div><div class="insert">+    $phone=mysql_result($result,$i,&quot;phone&quot;);</div><div class="insert">+    echo &quot;&lt;b&gt;$name&lt;/b&gt;&lt;br&gt;Phone:$phone&lt;br /&gt;&lt;br /&gt;&lt;hr /&gt;&lt;br /&gt;&quot;;</div><div class="insert">+    $i++;</div><div class="insert">+  }</div><div class="insert">+?&gt;&lt;/body&gt;&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The problem with this approach is that code is embedded into HTML, but the very same code also needs to</div><div class="insert">+generate additional HTML and to generate SQL statements</div><div class="insert">+to query the database, entangling multiple layers of</div><div class="insert">+the application and making it difficult to read and maintain. The situation is</div><div class="insert">+even worse for Ajax applications, and the complexity grows with the number of pages (files) that make up</div><div class="insert">+the application.</div><div class="insert">+</div><div class="insert">+The functionality of the above example can be expressed in web2py with two lines of Python code:</div><div class="insert">+``</div><div class="insert">+def index():</div><div class="insert">+    return HTML(BODY(H1(&#x27;Records&#x27;), db().select(db.contacts.ALL)))</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+In this simple example, the HTML page structure is represented programmatically by the ``HTML``, ``BODY``, and ``H1`` objects; the database ``db`` is queried by the ``select`` command; finally, everything</div><div class="insert">+is serialized into HTML.</div><div class="insert">+Notice that ``db`` is not a keyword but a user defined variable. We will use this name consistently to refer to a database connection to avoid confusion.</div><div class="insert">+</div><div class="insert">+Web frameworks are typically categorized as one of two types: A &quot;glued&quot; framework is</div><div class="insert">+built by assembling (gluing together) several third-party components. A &quot;full-stack&quot; framework is built</div><div class="insert">+by creating components designed specifically to be tightly integrated and work together.</div><div class="insert">+</div><div class="insert">+web2py is a full-stack framework. Almost all of its components are built from scratch and are designed to work</div><div class="insert">+together, but they function just as well outside of the complete web2py framework. For example, the</div><div class="insert">+Database Abstraction Layer (DAL) or the template language can be used independently of the</div><div class="insert">+web2py framework by importing ``gluon.dal`` or ``gluon.template`` into your own Python applications. ``gluon`` is the name of the web2py module that contains system libraries. Some web2py libraries,</div><div class="insert">+such as building and processing forms from database tables, have dependencies on other portions</div><div class="insert">+of web2py. web2py can also work with third-party Python libraries, including other template languages</div><div class="insert">+and DALs, but they will not be as tightly integrated as the original components.</div><div class="insert">+</div><div class="insert">+### Model-View-Controller</div><div class="insert">+``Model-View-Controller``:inxx</div><div class="insert">+web2py encourages the developer to separate data representation (the model), data</div><div class="insert">+presentation (the view) and the application workflow (the controller). Let&#x27;s consider again the previous example</div><div class="insert">+and see how to build a web2py application around it. Here is an example of the web2py MVC edit interface:</div><div class="insert">+</div><div class="insert">+[[image @///image/en0.png center 480px]]</div><div class="insert">+</div><div class="insert">+The typical workflow of a request in web2py is described in the following diagram:</div><div class="insert">+</div><div class="insert">+[[image @///image/en100.png center 480px]]</div><div class="insert">+</div><div class="insert">+In the diagram:</div><div class="insert">+- The Server can be the web2py built-in web server or a third-party server, such as Apache. The Server handles multi-threading.</div><div class="insert">+- &quot;main&quot; is the main WSGI application. It performs all common tasks and wraps user applications. It deals with cookies, sessions, transactions, URL routing and reverse routing, and dispatching.</div><div class="insert">+It can serve and stream static files if the web server is not doing it already.</div><div class="insert">+- The Models, Views and Controller components make up the user application.</div><div class="insert">+- Multiple applications can be hosted in the same web2py instance.</div><div class="insert">+- The dashed arrows represent communication with the database engine(s). The database queries can be written in raw SQL (discouraged) or by using the web2py Database Abstraction Layer (recommended), so that web2py application code is not dependent on the specific database engine.</div><div class="insert">+- The dispatcher maps the requested URL to a function call in the controller. The output of the function can be a string or a dictionary of symbols (a hash table). The data in the dictionary is rendered by a view. If the visitor requests an HTML page (the default), the dictionary is rendered into an HTML page. If the visitor requests the same page in XML, web2py tries to find a view that can render the dictionary in XML. The developer can create views to render pages in any of the already supported protocols (HTML, XML, JSON, RSS, CSV, RTF) or in additional custom protocols.</div><div class="insert">+- All calls are wrapped into a transaction, and any uncaught exception causes the transaction to be rolled back. If the request succeeds, the transaction is committed.</div><div class="insert">+- web2py also handles sessions and session cookies automatically, and when a transaction is committed, the session is also stored, unless specified otherwise.</div><div class="insert">+- It is possible to register recurrent tasks (via cron) to run at scheduled times and/or after the completion of certain actions. In this way it is possible to run long and compute-intensive tasks in the background without slowing down navigation.</div><div class="insert">+</div><div class="insert">+Here is a minimal and complete MVC application, consisting of three files:</div><div class="insert">+</div><div class="insert">+**&quot;db.py&quot; is the model:**</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+db = DAL(&#x27;sqlite://storage.sqlite&#x27;)</div><div class="insert">+db.define_table(&#x27;contact&#x27;,</div><div class="insert">+   Field(&#x27;name&#x27;),</div><div class="insert">+   Field(&#x27;phone&#x27;))</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+It connects to the database (in this example a SQLite database stored in the ``storage.sqlite`` file) and</div><div class="insert">+defines a table called ``contact``. If the table does not exist, web2py creates it and, transparently</div><div class="insert">+and in the background,</div><div class="insert">+generates SQL code in the appropriate SQL dialect for the specific database engine used.</div><div class="insert">+The developer can</div><div class="insert">+see the generated SQL but does not need to change the code if the database back-end, which defaults to</div><div class="insert">+SQLite, is replaced with MySQL, PostgreSQL, MSSQL, FireBird, Oracle, DB2, Informix, Interbase, Ingres, and the Google App Engine (both SQL and NoSQL).</div><div class="insert">+</div><div class="insert">+Once a table is defined and created, web2py also generates a fully functional web-based database</div><div class="insert">+administration interface, called **appadmin**, to access the database and the tables.</div><div class="insert">+</div><div class="insert">+**&quot;default.py&quot; is the controller:**</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+def contacts():</div><div class="insert">+    grid=SQLFORM.grid(db.contact, user_signature=False)</div><div class="insert">+    return locals()</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+In web2py, URLs are mapped to Python modules and function calls. In this case, the controller contains</div><div class="insert">+a single function (or &quot;action&quot;) called ``contacts``. An action may</div><div class="insert">+return a string (the returned web page) or a Python dictionary (a set of</div><div class="insert">+``key:value`` pairs) or the set of local variables (as in this example).</div><div class="insert">+If the function returns a dictionary, it is passed to a view with the same</div><div class="insert">+name as the controller/function, which in turn renders the page.</div><div class="insert">+In this example, the function ``contacts`` generates a select/search/create/update/delete grid for table ``db.contact``</div><div class="insert">+and returns the grid to the view.</div><div class="insert">+</div><div class="insert">+**&quot;default/contacts.html&quot; is the view:**</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{extend &#x27;layout.html&#x27;}}</div><div class="insert">+&lt;h1&gt;Manage My Contacts&lt;/h1&gt;</div><div class="insert">+{{=grid}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+This view is called automatically by web2py after the associated controller function (action) is executed.</div><div class="insert">+The purpose of this view is to render the variables in the returned dictionary (in our case ``grid``) into HTML.</div><div class="insert">+The view file is written in HTML, but it embeds Python code delimited by the special ``{{`` and ``}}``</div><div class="insert">+delimiters. This is quite different from the PHP code example, because the only code</div><div class="insert">+embedded into the HTML is &quot;presentation layer&quot; code. The &quot;layout.html&quot; file referenced at the top of the</div><div class="insert">+view is provided by web2py and constitutes the basic layout for all web2py applications. The layout file can</div><div class="insert">+easily be modified or replaced.</div><div class="insert">+</div><div class="insert">+### Why web2py</div><div class="insert">+</div><div class="insert">+web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class="insert">+web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class="insert">+- Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class="insert">+- web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class="insert">+- web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class="insert">+- web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="insert">+- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and IPv6.</div><div class="insert">+- web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class="insert">+- web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class="insert">+</div><div class="insert">+WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class="insert">+</div><div class="insert">+Here is a screenshot of the main web2py **admin** interface:</div><div class="insert">+</div><div class="insert">+[[image @///image/en200.png center 480px]]</div><div class="insert">+</div><div class="insert">+</div><div class="insert">+### Security</div><div class="insert">+``security``:inxx</div><div class="insert">+The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class="insert">+on improving the security of application software.</div><div class="insert">+</div><div class="insert">+OWASP has listed the top ten security issues that put web applications at risk.</div><div class="insert">+That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class="insert">+- ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class="insert">+- ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class="insert">+- ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class="insert">+- ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class="insert">+- ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class="insert">+- ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class="insert">+- &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class="insert">+- ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class="insert">+- ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class="insert">+- ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign ajax callbacks.&#x27;&#x27;</div><div class="insert">+</div><div class="insert">+web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class="insert">+</div><div class="insert">+### In the box</div><div class="insert">+</div><div class="insert">+You can download web2py from the official web site:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+http://www.web2py.com</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+web2py is composed of the following components:</div><div class="insert">+- **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class="insert">+- **web server**: the Rocket WSGI web server.</div><div class="insert">+- the **admin** application: used to create, design, and manage other web2py applications. **admin** provide a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class="insert">+- the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class="insert">+- the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class="insert">+</div><div class="insert">+web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class="insert">+</div><div class="insert">+The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class="insert">+To run the source code, you need Python 2.5 pre-installed on the system. You also need one of the supported database engines installed.</div><div class="insert">+For testing and light-demand applications, you can use the SQLite database, included with Python 2.5.</div><div class="insert">+</div><div class="insert">+The binary versions of web2py (for Windows and Mac OS X) include a Python 2.5 interpreter and</div><div class="insert">+the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class="insert">+enables you to run web2py out of the box.</div><div class="insert">+</div><div class="insert">+The following image depicts the overall web2py structure:</div><div class="insert">+</div><div class="insert">+[[image @///image/en300.png center 480px]]</div><div class="insert">+</div><div class="insert">+### License</div><div class="insert">+``license``:inxx</div><div class="insert">+</div><div class="insert">+web2py is licensed under the LGPL version 3 License. The full text of the license if available in ref.``lgpl3``:cite.</div><div class="insert">+</div><div class="insert">+In accordance with LGPL you may:</div><div class="insert">+</div><div class="insert">+- redistribute web2py with your apps (including official web2py binary versions)</div><div class="insert">+- release your applications which use official web2py libraries under any license you wish</div><div class="insert">+</div><div class="insert">+Yet you must:</div><div class="insert">+</div><div class="insert">+- make clear in the documentation that your application uses web2py</div><div class="insert">+- release any modification of the web2py libraries under the LGPLv3 license</div><div class="insert">+</div><div class="insert">+The license includes the usual disclaimer:</div><div class="insert">+</div><div class="insert">+THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.</div><div class="insert">+EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES</div><div class="insert">+PROVIDE THE PROGRAM “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED,</div><div class="insert">+INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</div><div class="insert">+FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE</div><div class="insert">+PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL</div><div class="insert">+NECESSARY SERVICING, REPAIR OR CORRECTION.</div><div class="insert">+</div><div class="insert">+IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT</div><div class="insert">+HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE,</div><div class="insert">+BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL</div><div class="insert">+DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED</div><div class="insert">+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES</div><div class="insert">+OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER</div><div class="insert">+PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</div><div class="insert">+</div><div class="insert">+**Earlier versions**</div><div class="insert">+</div><div class="insert">+Earlier versions of web2py, 1.0.*-1.90.*, were released under the GPL2 license plus a</div><div class="insert">+commercial exception which, for practical purposes, was very similar to the current LPGLv3.</div><div class="insert">+</div><div class="insert">+**Third party software distributed with web2py**</div><div class="insert">+</div><div class="insert">+web2py contains third party software under the gluon/contrib/ folder and various JavaScript and CSS files.</div><div class="insert">+These files are distributed with web2py under their original licenses, as stated in the files.</div><div class="insert">+</div><div class="insert">+</div><div class="insert">+### Acknowledgments</div><div class="insert">+</div><div class="insert">+web2py was originally developed by and copyrighted by Massimo Di Pierro.</div><div class="insert">+The first version (1.0) was released in October, 2007. Since then it has been adopted by many users, some of whom have also contributed bug reports, testing, debugging, patches, and proofreading of this book.</div><div class="insert">+</div><div class="insert">+Some of the major contributors are, in alphabetical order by first name:</div><div class="insert">+</div><div class="insert">+Alexey Nezhdanov,</div><div class="insert">+Alvaro Justen,</div><div class="insert">+Andrew Willimott,</div><div class="insert">+Angelo Compagnucci,</div><div class="insert">+Anthony Bastardi,</div><div class="insert">+Antonio Ramos,</div><div class="insert">+Arun K. Rajeevan,</div><div class="insert">+Attila Csipa,</div><div class="insert">+Ben Reinhart,</div><div class="insert">+Bill Ferret,</div><div class="insert">+Boris Manojlovic,</div><div class="insert">+Branko Vukelic,</div><div class="insert">+Brian Meredyk,</div><div class="insert">+Bruno Rocha,</div><div class="insert">+Carlos Galindo,</div><div class="insert">+Carsten Haese,</div><div class="insert">+Chris Clark,</div><div class="insert">+Chris Steel,</div><div class="insert">+Christian Foster Howes,</div><div class="insert">+Christopher Smiga,</div><div class="insert">+CJ Lazell,</div><div class="insert">+Cliff Kachinske,</div><div class="insert">+Craig Younkins,</div><div class="insert">+Daniel Lin,</div><div class="insert">+David Harrison,</div><div class="insert">+David Wagner,</div><div class="insert">+Denes Lengyel,</div><div class="insert">+Dirk Krause,</div><div class="insert">+Douglas Soares de Andrade,</div><div class="insert">+Eric Vicenti,</div><div class="insert">+Falko Krause,</div><div class="insert">+Farsheed Ashouri,</div><div class="insert">+Fran Boon,</div><div class="insert">+Francisco Gama,</div><div class="insert">+Fred Yanowski,</div><div class="insert">+Gilson Filho,</div><div class="insert">+Graham Dumpleton,</div><div class="insert">+Gyuris Szabolcs,</div><div class="insert">+Hamdy Abdel-Badeea,</div><div class="insert">+Hans Donner,</div><div class="insert">+Hans Murx,</div><div class="insert">+Hans C. v. Stockhausen,</div><div class="insert">+Ian Reinhart Geiser,</div><div class="insert">+Ismael Serratos,</div><div class="insert">+Jan Beilicke,</div><div class="insert">+Jonathan Benn,</div><div class="insert">+Jonathan Lundell,</div><div class="insert">+Josh Goldfoot,</div><div class="insert">+Jose Jachuf,</div><div class="insert">+Josh Jaques,</div><div class="insert">+José Vicente de Sousa,</div><div class="insert">+Keith Yang,</div><div class="insert">+Kenji Hosoda,</div><div class="insert">+Kyle Smith,</div><div class="insert">+Limodou,</div><div class="insert">+Lucas D&#x27;Ávila,</div><div class="insert">+Marcel Leuthi,</div><div class="insert">+Marcel Hellkamp,</div><div class="insert">+Marcello Della Longa,</div><div class="insert">+Mariano Reingart,</div><div class="insert">+Mark Larsen,</div><div class="insert">+Mark Moore,</div><div class="insert">+Markus Gritsch,</div><div class="insert">+Martin Hufsky,</div><div class="insert">+Martin Mulone,</div><div class="insert">+Mateusz Banach,</div><div class="insert">+Miguel Lopez,</div><div class="insert">+Michael Willis,</div><div class="insert">+Michele Comitini,</div><div class="insert">+Nathan Freeze,</div><div class="insert">+Niall Sweeny,</div><div class="insert">+Niccolo Polo,</div><div class="insert">+Nicolas Bruxer,</div><div class="insert">+Olaf Ferger,</div><div class="insert">+Omi Chiba,</div><div class="insert">+Ondrej Such,</div><div class="insert">+Ovidio Marinho Falcao Neto,</div><div class="insert">+Pai,</div><div class="insert">+Paolo Caruccio,</div><div class="insert">+Patrick Breitenbach,</div><div class="insert">+Phyo Arkar Lwin,</div><div class="insert">+Pierre Thibault,</div><div class="insert">+Ramjee Ganti,</div><div class="insert">+Robin Bhattacharyya,</div><div class="insert">+Ross Peoples,</div><div class="insert">+Ruijun Luo,</div><div class="insert">+Ryan Seto,</div><div class="insert">+Scott Roberts,</div><div class="insert">+Sergey Podlesnyi,</div><div class="insert">+Sharriff Aina,</div><div class="insert">+Simone Bizzotto,</div><div class="insert">+Sriram Durbha,</div><div class="insert">+Sterling Hankins,</div><div class="insert">+Stuart Rackham,</div><div class="insert">+Telman Yusupov,</div><div class="insert">+Thadeus Burgess,</div><div class="insert">+Tim Michelsen,</div><div class="insert">+Timothy Farrell,</div><div class="insert">+Yair Eshel,</div><div class="insert">+Yarko Tymciurak,</div><div class="insert">+Younghyun Jo,</div><div class="insert">+Vidul Nikolaev Petrov,</div><div class="insert">+Vinicius Assef,</div><div class="insert">+Vladyslav Kozlovskyy,</div><div class="insert">+Zahariash.</div><div class="insert">+</div><div class="insert">+</div><div class="insert">+I am sure I forgot somebody, so I apologize.</div><div class="insert">+</div><div class="insert">+I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class="insert">+</div><div class="insert">+web2py contains code from the following authors, whom I would like to thank:</div><div class="insert">+</div><div class="insert">+Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class="insert">+</div><div class="insert">+The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class="insert">+</div><div class="insert">+I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class="insert">+</div><div class="insert">+Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class="insert">+</div><div class="insert">+### About this book</div><div class="insert">+</div><div class="insert">+This book includes the following chapters, besides this introduction:</div><div class="insert">+- Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class="insert">+- Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class="insert">+- Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class="insert">+- Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class="insert">+- Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="insert">+- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class="insert">+- Chapter 8 covers communication with as sending emails and SMSes.</div><div class="insert">+- Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class="insert">+- Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class="insert">+- Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class="insert">+- Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class="insert">+- Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class="insert">+- Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class="insert">+</div><div class="insert">+This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class="insert">+This book does not cover web2py appliances (i.e. ready made applications).</div><div class="insert">+</div><div class="insert">+You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class="insert">+</div><div class="insert">+You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class="insert">+``MARKMIN``:inxx</div><div class="insert">+This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class="insert">+</div><div class="insert">+### Elements of style</div><div class="insert">+</div><div class="insert">+PEP8 ``style``:cite  contains good style practices when programming with Python. You will find</div><div class="insert">+that web2py does not always follow these rules. This is not because of omissions or negligence; it is our</div><div class="insert">+belief that the users of web2py should follow these rules and we encourage it. We chose not to</div><div class="insert">+follow some of those rules when defining web2py helper objects in order to minimize the probability</div><div class="insert">+of name conflict with objects defined by the user.</div><div class="insert">+</div><div class="insert">+For example, the class that represents a ``&lt;div&gt;`` is called ``DIV``, while according to the</div><div class="insert">+Python style reference it should have been called ``Div``. We believe that, for this specific example that</div><div class="insert">+using an all-upper-case &quot;DIV&quot; is a more natural choice. Moreover, this approach leaves programmers</div><div class="insert">+free to create a class called &quot;Div&quot; if they choose to do so.</div><div class="insert">+Our syntax also maps naturally into the DOM notation of most browsers (including, for example, Firefox).</div><div class="insert">+</div><div class="insert">+According to the Python style guide, all-upper-case strings should be used for constants and not</div><div class="insert">+variables. Continuing with our example, even considering that ``DIV`` is a class,</div><div class="insert">+it is a special class that should never be modified by</div><div class="insert">+the user because doing so would break other web2py applications.</div><div class="insert">+Hence, we believe this qualifies the ``DIV`` class as</div><div class="insert">+something that should be treated as a constant, further justifying our choice of notation.</div><div class="insert">+</div><div class="insert">+In summary, the following conventions are followed:</div><div class="insert">+- HTML helpers and validators are all upper case for the reasons discussed above (for example ``DIV``, ``A``, ``FORM``, ``URL``).</div><div class="insert">+- The translator object ``T`` is upper case despite the fact that it is an instance of a class and not a class itself. Logically the translator object performs an action similar to the HTML helpers, it affects rendering part of the presentation. Also, ``T`` needs to be easy to locate in the code and must have a short name.</div><div class="insert">+- DAL classes follow the Python style guide (first letter capitalized), for example ``Table``, ``Field``, ``Query``, ``Row``, ``Rows``, etc.</div><div class="insert">+</div><div class="insert">+In all other cases we believe we have followed, as much as possible,</div><div class="insert">+the Python Style Guide (PEP8).</div><div class="insert">+For example all instance objects are lower-case (request, response, session, cache), and all internal classes are capitalized.</div><div class="insert">+</div><div class="insert">+In all the examples of this book, web2py keywords are shown in bold, while strings and comments are shown in italic.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">-## Introduction</div><div class="delete">-web2py``web2py``:cite  is a free, open-source web framework for agile development of secure</div><div class="delete">-database-driven web applications; it is written in Python``python``:cite</div><div class="delete">-and programmable in Python.</div><div class="delete">-web2py is a full-stack framework,</div><div class="delete">-meaning that it contains all the components you need</div><div class="delete">-to build fully functional web applications.</div><div class="delete">-</div><div class="delete">-web2py is designed to guide a web developer to follow good software engineering practices, such as using</div><div class="delete">-the Model View Controller (MVC) pattern. web2py separates the data representation (the model)</div><div class="delete">-from the data presentation (the view) and also from the application logic and workflow (the controller). web2py</div><div class="delete">-provides libraries to help the developer design, implement, and test each of these three parts separately,</div><div class="delete">-and makes them work together.</div><div class="delete">-</div><div class="delete">-web2py is built for security. This means that it automatically addresses many of the issues</div><div class="delete">-that can lead to security vulnerabilities, by following well established practices. For</div><div class="delete">-example, it validates all input (to prevent injections), escapes all output (to prevent cross-site scripting),</div><div class="delete">-renames uploaded files (to prevent directory traversal attacks).</div><div class="delete">-web2py leaves little choice to application developers in matters related to security.</div><div class="delete">-</div><div class="delete">-web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql-w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class="delete">-SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class="delete">-FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, and</div><div class="delete">-Ingres``ingresdb``:cite.</div><div class="delete">-The DAL can also generate function calls for the Google Datastore</div><div class="delete">-when running on the Google App Engine (GAE)``gae``:cite.</div><div class="delete">-Experimentally we support more databases. Please check on the	web2py web site	and mailing list for more recent adapters.</div><div class="delete">-Once one or more database tables are defined, web2py also generates a fully functional web-based database</div><div class="delete">-administration interface to access the database and the tables.</div><div class="delete">-</div><div class="delete">-web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class="delete">-paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class="delete">-runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class="delete">-</div><div class="delete">-web2py provides a ticketing system. If an error occurs, a ticket is issued to the user,</div><div class="delete">-and the error is logged for the administrator.</div><div class="delete">-</div><div class="delete">-web2py is open source and released under the LGPL version 3 license.</div><div class="delete">-</div><div class="delete">-Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class="delete">-We have done so since the first release of web2py in October, 2007.</div><div class="delete">-New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will still work today.</div><div class="delete">-</div><div class="delete">-Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class="delete">-``</div><div class="delete">-db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class="delete">-needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class="delete">-</div><div class="delete">-Given the table defined above, the following code:</div><div class="delete">-``</div><div class="delete">-form = SQLFORM(db.person).process()</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-creates an insert form for this table that allows users to upload images. It also</div><div class="delete">-validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class="delete">-inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class="delete">-the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class="delete">-</div><div class="delete">-This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, adn oembed support:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-def index(): return auth.wiki()</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-The following code instead:</div><div class="delete">-``</div><div class="delete">-@auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class="delete">-def f(): ....</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class="delete">-</div><div class="delete">-web2py also supports components, i.e. actions which can be loaded in a view and interact with the visitor via Ajax without re-loading the entire page. This is done via a ``LOAD`` helper which allows very modular design of applications; it is discussed in chapter 3 in the context of the wiki and, in some detail, in the last chapter of this book.</div><div class="delete">-</div><div class="delete">-### Principles</div><div class="delete">-</div><div class="delete">-Python programming typically follows these basic principles:</div><div class="delete">-- Don&#x27;t repeat yourself (DRY).</div><div class="delete">-- There should be only one way of doing things.</div><div class="delete">-- Explicit is better than implicit.</div><div class="delete">-</div><div class="delete">-web2py fully embraces the first two principles by forcing the developer to use sound software</div><div class="delete">-engineering practices that discourage repetition of code. web2py guides the developer through almost</div><div class="delete">-all the tasks common in web application development (creating and processing forms, managing</div><div class="delete">-sessions, cookies, errors, etc.).</div><div class="delete">-</div><div class="delete">-``request``:inxx</div><div class="delete">-web2py differs from other frameworks with regard to the third principle, which sometimes conflicts</div><div class="delete">-with the other two. In particular, web2py does not import user applications, but executes them in a predefined context.  This context exposes the Python keywords, as well as the web2py keywords.</div><div class="delete">-</div><div class="delete">-To some this may appear as magic, but it should not.</div><div class="delete">-Simply, in practice, some modules are already imported without you doing so.</div><div class="delete">-web2py is trying to avoid the annoying characteristic of</div><div class="delete">-other frameworks that force the developer to import the same modules at the top of every model and</div><div class="delete">-controller.</div><div class="delete">-</div><div class="delete">-web2py, by importing its own modules, saves time and prevents mistakes, thus following the spirit of &quot;don&#x27;t repeat yourself&quot;</div><div class="delete">-and &quot;there should be only one way of doing things&quot;.</div><div class="delete">-</div><div class="delete">-If the developer wishes to use other Python modules or third-party modules, those</div><div class="delete">-modules must be imported explicitly, as in any other Python program.</div><div class="delete">-</div><div class="delete">-### Web frameworks</div><div class="delete">-``PHP``:inxx ``ASP``:inxx ``JSP``:inxx</div><div class="delete">-</div><div class="delete">-At its most fundamental level, a web application consists of a set of programs (or functions) that are</div><div class="delete">-executed when the corresponding URL is visited.</div><div class="delete">-The output of the program is returned to the visitor and rendered by the browser.</div><div class="delete">-</div><div class="delete">-The purpose of web frameworks is to allow developers to build new apps quickly, easily and without mistakes.</div><div class="delete">-This is done by providing APIs and tools that reduce and simplify the amount of coding that is required.</div><div class="delete">-</div><div class="delete">-The two classic approaches for developing web applications are:</div><div class="delete">-- Generating HTML``html-w``:cite ``html-o``:cite  programmatically.</div><div class="delete">-- Embedding code into HTML pages.</div><div class="delete">-</div><div class="delete">-The first model is the one that was followed, for example, by early CGI scripts.</div><div class="delete">-The second model is followed, for example, by PHP``php``:cite</div><div class="delete">-(where the code is in PHP, a C-like language), ASP (where the code is in Visual Basic), and JSP (where the code is in Java).</div><div class="delete">-</div><div class="delete">-Here is an example of a PHP program that, when executed, retrieves data from a database and</div><div class="delete">-returns an HTML page showing the selected records:</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;&lt;body&gt;&lt;h1&gt;Records&lt;/h1&gt;&lt;?</div><div class="delete">-  mysql_connect(localhost,username,password);</div><div class="delete">-  @mysql_select_db(database) or die( &quot;Unable to select database&quot;);</div><div class="delete">-  $query=&quot;SELECT * FROM contacts&quot;;</div><div class="delete">-  $result=mysql_query($query);</div><div class="delete">-  mysql_close();</div><div class="delete">-  $i=0;</div><div class="delete">-  while ($i &lt; mysql_numrows($result)) {</div><div class="delete">-    $name=mysql_result($result,$i,&quot;name&quot;);</div><div class="delete">-    $phone=mysql_result($result,$i,&quot;phone&quot;);</div><div class="delete">-    echo &quot;&lt;b&gt;$name&lt;/b&gt;&lt;br&gt;Phone:$phone&lt;br /&gt;&lt;br /&gt;&lt;hr /&gt;&lt;br /&gt;&quot;;</div><div class="delete">-    $i++;</div><div class="delete">-  }</div><div class="delete">-?&gt;&lt;/body&gt;&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The problem with this approach is that code is embedded into HTML, but the very same code also needs to</div><div class="delete">-generate additional HTML and to generate SQL statements</div><div class="delete">-to query the database, entangling multiple layers of</div><div class="delete">-the application and making it difficult to read and maintain. The situation is</div><div class="delete">-even worse for Ajax applications, and the complexity grows with the number of pages (files) that make up</div><div class="delete">-the application.</div><div class="delete">-</div><div class="delete">-The functionality of the above example can be expressed in web2py with two lines of Python code:</div><div class="delete">-``</div><div class="delete">-def index():</div><div class="delete">-    return HTML(BODY(H1(&#x27;Records&#x27;), db().select(db.contacts.ALL)))</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-In this simple example, the HTML page structure is represented programmatically by the ``HTML``, ``BODY``, and ``H1`` objects; the database ``db`` is queried by the ``select`` command; finally, everything</div><div class="delete">-is serialized into HTML.</div><div class="delete">-Notice that ``db`` is not a keyword but a user defined variable. We will use this name consistently to refer to a database connection to avoid confusion.</div><div class="delete">-</div><div class="delete">-Web frameworks are typically categorized as one of two types: A &quot;glued&quot; framework is</div><div class="delete">-built by assembling (gluing together) several third-party components. A &quot;full-stack&quot; framework is built</div><div class="delete">-by creating components designed specifically to be tightly integrated and work together.</div><div class="delete">-</div><div class="delete">-web2py is a full-stack framework. Almost all of its components are built from scratch and are designed to work</div><div class="delete">-together, but they function just as well outside of the complete web2py framework. For example, the</div><div class="delete">-Database Abstraction Layer (DAL) or the template language can be used independently of the</div><div class="delete">-web2py framework by importing ``gluon.dal`` or ``gluon.template`` into your own Python applications. ``gluon`` is the name of the web2py module that contains system libraries. Some web2py libraries,</div><div class="delete">-such as building and processing forms from database tables, have dependencies on other portions</div><div class="delete">-of web2py. web2py can also work with third-party Python libraries, including other template languages</div><div class="delete">-and DALs, but they will not be as tightly integrated as the original components.</div><div class="delete">-</div><div class="delete">-### Model-View-Controller</div><div class="delete">-``Model-View-Controller``:inxx</div><div class="delete">-web2py encourages the developer to separate data representation (the model), data</div><div class="delete">-presentation (the view) and the application workflow (the controller). Let&#x27;s consider again the previous example</div><div class="delete">-and see how to build a web2py application around it. Here is an example of the web2py MVC edit interface:</div><div class="delete">-</div><div class="delete">-[[image @///image/en0.png center 480px]]</div><div class="delete">-</div><div class="delete">-The typical workflow of a request in web2py is described in the following diagram:</div><div class="delete">-</div><div class="delete">-[[image @///image/en100.png center 480px]]</div><div class="delete">-</div><div class="delete">-In the diagram:</div><div class="delete">-- The Server can be the web2py built-in web server or a third-party server, such as Apache. The Server handles multi-threading.</div><div class="delete">-- &quot;main&quot; is the main WSGI application. It performs all common tasks and wraps user applications. It deals with cookies, sessions, transactions, URL routing and reverse routing, and dispatching.</div><div class="delete">-It can serve and stream static files if the web server is not doing it already.</div><div class="delete">-- The Models, Views and Controller components make up the user application.</div><div class="delete">-- Multiple applications can be hosted in the same web2py instance.</div><div class="delete">-- The dashed arrows represent communication with the database engine(s). The database queries can be written in raw SQL (discouraged) or by using the web2py Database Abstraction Layer (recommended), so that web2py application code is not dependent on the specific database engine.</div><div class="delete">-- The dispatcher maps the requested URL to a function call in the controller. The output of the function can be a string or a dictionary of symbols (a hash table). The data in the dictionary is rendered by a view. If the visitor requests an HTML page (the default), the dictionary is rendered into an HTML page. If the visitor requests the same page in XML, web2py tries to find a view that can render the dictionary in XML. The developer can create views to render pages in any of the already supported protocols (HTML, XML, JSON, RSS, CSV, RTF) or in additional custom protocols.</div><div class="delete">-- All calls are wrapped into a transaction, and any uncaught exception causes the transaction to be rolled back. If the request succeeds, the transaction is committed.</div><div class="delete">-- web2py also handles sessions and session cookies automatically, and when a transaction is committed, the session is also stored, unless specified otherwise.</div><div class="delete">-- It is possible to register recurrent tasks (via cron) to run at scheduled times and/or after the completion of certain actions. In this way it is possible to run long and compute-intensive tasks in the background without slowing down navigation.</div><div class="delete">-</div><div class="delete">-Here is a minimal and complete MVC application, consisting of three files:</div><div class="delete">-</div><div class="delete">-**&quot;db.py&quot; is the model:**</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-db = DAL(&#x27;sqlite://storage.sqlite&#x27;)</div><div class="delete">-db.define_table(&#x27;contact&#x27;,</div><div class="delete">-   Field(&#x27;name&#x27;),</div><div class="delete">-   Field(&#x27;phone&#x27;))</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-It connects to the database (in this example a SQLite database stored in the ``storage.sqlite`` file) and</div><div class="delete">-defines a table called ``contact``. If the table does not exist, web2py creates it and, transparently</div><div class="delete">-and in the background,</div><div class="delete">-generates SQL code in the appropriate SQL dialect for the specific database engine used.</div><div class="delete">-The developer can</div><div class="delete">-see the generated SQL but does not need to change the code if the database back-end, which defaults to</div><div class="delete">-SQLite, is replaced with MySQL, PostgreSQL, MSSQL, FireBird, Oracle, DB2, Informix, Interbase, Ingres, and the Google App Engine (both SQL and NoSQL).</div><div class="delete">-</div><div class="delete">-Once a table is defined and created, web2py also generates a fully functional web-based database</div><div class="delete">-administration interface, called **appadmin**, to access the database and the tables.</div><div class="delete">-</div><div class="delete">-**&quot;default.py&quot; is the controller:**</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-def contacts():</div><div class="delete">-    grid=SQLFORM.grid(db.contact, user_signature=False)</div><div class="delete">-    return locals()</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-In web2py, URLs are mapped to Python modules and function calls. In this case, the controller contains</div><div class="delete">-a single function (or &quot;action&quot;) called ``contacts``. An action may</div><div class="delete">-return a string (the returned web page) or a Python dictionary (a set of</div><div class="delete">-``key:value`` pairs) or the set of local variables (as in this example).</div><div class="delete">-If the function returns a dictionary, it is passed to a view with the same</div><div class="delete">-name as the controller/function, which in turn renders the page.</div><div class="delete">-In this example, the function ``contacts`` generates a select/search/create/update/delete grid for table ``db.contact``</div><div class="delete">-and returns the grid to the view.</div><div class="delete">-</div><div class="delete">-**&quot;default/contacts.html&quot; is the view:**</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{extend &#x27;layout.html&#x27;}}</div><div class="delete">-&lt;h1&gt;Manage My Contacts&lt;/h1&gt;</div><div class="delete">-{{=grid}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-This view is called automatically by web2py after the associated controller function (action) is executed.</div><div class="delete">-The purpose of this view is to render the variables in the returned dictionary (in our case ``grid``) into HTML.</div><div class="delete">-The view file is written in HTML, but it embeds Python code delimited by the special ``{{`` and ``}}``</div><div class="delete">-delimiters. This is quite different from the PHP code example, because the only code</div><div class="delete">-embedded into the HTML is &quot;presentation layer&quot; code. The &quot;layout.html&quot; file referenced at the top of the</div><div class="delete">-view is provided by web2py and constitutes the basic layout for all web2py applications. The layout file can</div><div class="delete">-easily be modified or replaced.</div><div class="delete">-</div><div class="delete">-### Why web2py</div><div class="delete">-</div><div class="delete">-web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class="delete">-web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class="delete">-- Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class="delete">-- web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class="delete">-- web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class="delete">-- web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="delete">-- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and IPv6.</div><div class="delete">-- web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class="delete">-- web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class="delete">-</div><div class="delete">-WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class="delete">-</div><div class="delete">-Here is a screenshot of the main web2py **admin** interface:</div><div class="delete">-</div><div class="delete">-[[image @///image/en200.png center 480px]]</div><div class="delete">-</div><div class="delete">-</div><div class="delete">-### Security</div><div class="delete">-``security``:inxx</div><div class="delete">-The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class="delete">-on improving the security of application software.</div><div class="delete">-</div><div class="delete">-OWASP has listed the top ten security issues that put web applications at risk.</div><div class="delete">-That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class="delete">-- ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class="delete">-- ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class="delete">-- ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class="delete">-- ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class="delete">-- ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class="delete">-- ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class="delete">-- &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class="delete">-- ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class="delete">-- ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class="delete">-- ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign ajax callbacks.&#x27;&#x27;</div><div class="delete">-</div><div class="delete">-web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class="delete">-</div><div class="delete">-### In the box</div><div class="delete">-</div><div class="delete">-You can download web2py from the official web site:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-http://www.web2py.com</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-web2py is composed of the following components:</div><div class="delete">-- **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class="delete">-- **web server**: the Rocket WSGI web server.</div><div class="delete">-- the **admin** application: used to create, design, and manage other web2py applications. **admin** provide a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class="delete">-- the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class="delete">-- the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class="delete">-</div><div class="delete">-web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class="delete">-</div><div class="delete">-The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class="delete">-To run the source code, you need Python 2.5 pre-installed on the system. You also need one of the supported database engines installed.</div><div class="delete">-For testing and light-demand applications, you can use the SQLite database, included with Python 2.5.</div><div class="delete">-</div><div class="delete">-The binary versions of web2py (for Windows and Mac OS X) include a Python 2.5 interpreter and</div><div class="delete">-the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class="delete">-enables you to run web2py out of the box.</div><div class="delete">-</div><div class="delete">-The following image depicts the overall web2py structure:</div><div class="delete">-</div><div class="delete">-[[image @///image/en300.png center 480px]]</div><div class="delete">-</div><div class="delete">-### License</div><div class="delete">-``license``:inxx</div><div class="delete">-</div><div class="delete">-web2py is licensed under the LGPL version 3 License. The full text of the license if available in ref.``lgpl3``:cite.</div><div class="delete">-</div><div class="delete">-In accordance with LGPL you may:</div><div class="delete">-</div><div class="delete">-- redistribute web2py with your apps (including official web2py binary versions)</div><div class="delete">-- release your applications which use official web2py libraries under any license you wish</div><div class="delete">-</div><div class="delete">-Yet you must:</div><div class="delete">-</div><div class="delete">-- make clear in the documentation that your application uses web2py</div><div class="delete">-- release any modification of the web2py libraries under the LGPLv3 license</div><div class="delete">-</div><div class="delete">-The license includes the usual disclaimer:</div><div class="delete">-</div><div class="delete">-THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.</div><div class="delete">-EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES</div><div class="delete">-PROVIDE THE PROGRAM “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED,</div><div class="delete">-INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</div><div class="delete">-FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE</div><div class="delete">-PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL</div><div class="delete">-NECESSARY SERVICING, REPAIR OR CORRECTION.</div><div class="delete">-</div><div class="delete">-IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT</div><div class="delete">-HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE,</div><div class="delete">-BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL</div><div class="delete">-DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED</div><div class="delete">-TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES</div><div class="delete">-OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER</div><div class="delete">-PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</div><div class="delete">-</div><div class="delete">-**Earlier versions**</div><div class="delete">-</div><div class="delete">-Earlier versions of web2py, 1.0.*-1.90.*, were released under the GPL2 license plus a</div><div class="delete">-commercial exception which, for practical purposes, was very similar to the current LPGLv3.</div><div class="delete">-</div><div class="delete">-**Third party software distributed with web2py**</div><div class="delete">-</div><div class="delete">-web2py contains third party software under the gluon/contrib/ folder and various JavaScript and CSS files.</div><div class="delete">-These files are distributed with web2py under their original licenses, as stated in the files.</div><div class="delete">-</div><div class="delete">-</div><div class="delete">-### Acknowledgments</div><div class="delete">-</div><div class="delete">-web2py was originally developed by and copyrighted by Massimo Di Pierro.</div><div class="delete">-The first version (1.0) was released in October, 2007. Since then it has been adopted by many users, some of whom have also contributed bug reports, testing, debugging, patches, and proofreading of this book.</div><div class="delete">-</div><div class="delete">-Some of the major contributors are, in alphabetical order by first name:</div><div class="delete">-</div><div class="delete">-Alexey Nezhdanov,</div><div class="delete">-Alvaro Justen,</div><div class="delete">-Andrew Willimott,</div><div class="delete">-Angelo Compagnucci,</div><div class="delete">-Anthony Bastardi,</div><div class="delete">-Antonio Ramos,</div><div class="delete">-Arun K. Rajeevan,</div><div class="delete">-Attila Csipa,</div><div class="delete">-Ben Reinhart,</div><div class="delete">-Bill Ferret,</div><div class="delete">-Boris Manojlovic,</div><div class="delete">-Branko Vukelic,</div><div class="delete">-Brian Meredyk,</div><div class="delete">-Bruno Rocha,</div><div class="delete">-Carlos Galindo,</div><div class="delete">-Carsten Haese,</div><div class="delete">-Chris Clark,</div><div class="delete">-Chris Steel,</div><div class="delete">-Christian Foster Howes,</div><div class="delete">-Christopher Smiga,</div><div class="delete">-CJ Lazell,</div><div class="delete">-Cliff Kachinske,</div><div class="delete">-Craig Younkins,</div><div class="delete">-Daniel Lin,</div><div class="delete">-David Harrison,</div><div class="delete">-David Wagner,</div><div class="delete">-Denes Lengyel,</div><div class="delete">-Dirk Krause,</div><div class="delete">-Douglas Soares de Andrade,</div><div class="delete">-Eric Vicenti,</div><div class="delete">-Falko Krause,</div><div class="delete">-Farsheed Ashouri,</div><div class="delete">-Fran Boon,</div><div class="delete">-Francisco Gama,</div><div class="delete">-Fred Yanowski,</div><div class="delete">-Gilson Filho,</div><div class="delete">-Graham Dumpleton,</div><div class="delete">-Gyuris Szabolcs,</div><div class="delete">-Hamdy Abdel-Badeea,</div><div class="delete">-Hans Donner,</div><div class="delete">-Hans Murx,</div><div class="delete">-Hans C. v. Stockhausen,</div><div class="delete">-Ian Reinhart Geiser,</div><div class="delete">-Ismael Serratos,</div><div class="delete">-Jan Beilicke,</div><div class="delete">-Jonathan Benn,</div><div class="delete">-Jonathan Lundell,</div><div class="delete">-Josh Goldfoot,</div><div class="delete">-Jose Jachuf,</div><div class="delete">-Josh Jaques,</div><div class="delete">-José Vicente de Sousa,</div><div class="delete">-Keith Yang,</div><div class="delete">-Kenji Hosoda,</div><div class="delete">-Kyle Smith,</div><div class="delete">-Limodou,</div><div class="delete">-Lucas D&#x27;Ávila,</div><div class="delete">-Marcel Leuthi,</div><div class="delete">-Marcel Hellkamp,</div><div class="delete">-Marcello Della Longa,</div><div class="delete">-Mariano Reingart,</div><div class="delete">-Mark Larsen,</div><div class="delete">-Mark Moore,</div><div class="delete">-Markus Gritsch,</div><div class="delete">-Martin Hufsky,</div><div class="delete">-Martin Mulone,</div><div class="delete">-Mateusz Banach,</div><div class="delete">-Miguel Lopez,</div><div class="delete">-Michael Willis,</div><div class="delete">-Michele Comitini,</div><div class="delete">-Nathan Freeze,</div><div class="delete">-Niall Sweeny,</div><div class="delete">-Niccolo Polo,</div><div class="delete">-Nicolas Bruxer,</div><div class="delete">-Olaf Ferger,</div><div class="delete">-Omi Chiba,</div><div class="delete">-Ondrej Such,</div><div class="delete">-Ovidio Marinho Falcao Neto,</div><div class="delete">-Pai,</div><div class="delete">-Paolo Caruccio,</div><div class="delete">-Patrick Breitenbach,</div><div class="delete">-Phyo Arkar Lwin,</div><div class="delete">-Pierre Thibault,</div><div class="delete">-Ramjee Ganti,</div><div class="delete">-Robin Bhattacharyya,</div><div class="delete">-Ross Peoples,</div><div class="delete">-Ruijun Luo,</div><div class="delete">-Ryan Seto,</div><div class="delete">-Scott Roberts,</div><div class="delete">-Sergey Podlesnyi,</div><div class="delete">-Sharriff Aina,</div><div class="delete">-Simone Bizzotto,</div><div class="delete">-Sriram Durbha,</div><div class="delete">-Sterling Hankins,</div><div class="delete">-Stuart Rackham,</div><div class="delete">-Telman Yusupov,</div><div class="delete">-Thadeus Burgess,</div><div class="delete">-Tim Michelsen,</div><div class="delete">-Timothy Farrell,</div><div class="delete">-Yair Eshel,</div><div class="delete">-Yarko Tymciurak,</div><div class="delete">-Younghyun Jo,</div><div class="delete">-Vidul Nikolaev Petrov,</div><div class="delete">-Vinicius Assef,</div><div class="delete">-Vladyslav Kozlovskyy,</div><div class="delete">-Zahariash.</div><div class="delete">-</div><div class="delete">-</div><div class="delete">-I am sure I forgot somebody, so I apologize.</div><div class="delete">-</div><div class="delete">-I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class="delete">-</div><div class="delete">-web2py contains code from the following authors, whom I would like to thank:</div><div class="delete">-</div><div class="delete">-Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class="delete">-</div><div class="delete">-The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class="delete">-</div><div class="delete">-I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class="delete">-</div><div class="delete">-Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class="delete">-</div><div class="delete">-### About this book</div><div class="delete">-</div><div class="delete">-This book includes the following chapters, besides this introduction:</div><div class="delete">-- Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class="delete">-- Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class="delete">-- Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class="delete">-- Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class="delete">-- Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="delete">-- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class="delete">-- Chapter 8 covers communication with as sending emails and SMSes.</div><div class="delete">-- Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class="delete">-- Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class="delete">-- Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class="delete">-- Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class="delete">-- Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class="delete">-- Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class="delete">-</div><div class="delete">-This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class="delete">-This book does not cover web2py appliances (i.e. ready made applications).</div><div class="delete">-</div><div class="delete">-You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class="delete">-</div><div class="delete">-You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class="delete">-``MARKMIN``:inxx</div><div class="delete">-This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class="delete">-</div><div class="delete">-### Elements of style</div><div class="delete">-</div><div class="delete">-PEP8 ``style``:cite  contains good style practices when programming with Python. You will find</div><div class="delete">-that web2py does not always follow these rules. This is not because of omissions or negligence; it is our</div><div class="delete">-belief that the users of web2py should follow these rules and we encourage it. We chose not to</div><div class="delete">-follow some of those rules when defining web2py helper objects in order to minimize the probability</div><div class="delete">-of name conflict with objects defined by the user.</div><div class="delete">-</div><div class="delete">-For example, the class that represents a ``&lt;div&gt;`` is called ``DIV``, while according to the</div><div class="delete">-Python style reference it should have been called ``Div``. We believe that, for this specific example that</div><div class="delete">-using an all-upper-case &quot;DIV&quot; is a more natural choice. Moreover, this approach leaves programmers</div><div class="delete">-free to create a class called &quot;Div&quot; if they choose to do so.</div><div class="delete">-Our syntax also maps naturally into the DOM notation of most browsers (including, for example, Firefox).</div><div class="delete">-</div><div class="delete">-According to the Python style guide, all-upper-case strings should be used for constants and not</div><div class="delete">-variables. Continuing with our example, even considering that ``DIV`` is a class,</div><div class="delete">-it is a special class that should never be modified by</div><div class="delete">-the user because doing so would break other web2py applications.</div><div class="delete">-Hence, we believe this qualifies the ``DIV`` class as</div><div class="delete">-something that should be treated as a constant, further justifying our choice of notation.</div><div class="delete">-</div><div class="delete">-In summary, the following conventions are followed:</div><div class="delete">-- HTML helpers and validators are all upper case for the reasons discussed above (for example ``DIV``, ``A``, ``FORM``, ``URL``).</div><div class="delete">-- The translator object ``T`` is upper case despite the fact that it is an instance of a class and not a class itself. Logically the translator object performs an action similar to the HTML helpers, it affects rendering part of the presentation. Also, ``T`` needs to be easy to locate in the code and must have a short name.</div><div class="delete">-- DAL classes follow the Python style guide (first letter capitalized), for example ``Table``, ``Field``, ``Query``, ``Row``, ``Rows``, etc.</div><div class="delete">-</div><div class="delete">-In all other cases we believe we have followed, as much as possible,</div><div class="delete">-the Python Style Guide (PEP8).</div><div class="delete">-For example all instance objects are lower-case (request, response, session, cache), and all internal classes are capitalized.</div><div class="delete">-</div><div class="delete">-In all the examples of this book, web2py keywords are shown in bold, while strings and comments are shown in italic.</div><div class="delete">-</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/c4d204c1ce228e1e5d39bd84d70dabbf970f515f">c4d204c</a><ul><li>Date : 2012-12-28</li><li>fixed spacing in convert</li></ul></li></ul>
<div class="row-fluid" id="com_c4d204c1ce228e1e5d39bd84d70dabbf970f515f">
    <div class="span6"><div class="diff"><div class="insert">Some of the major<span class="highlight"> developers and</span> contributors are, in alphabetical order by first name:</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">Some of the major<span class="highlight"></span> contributors are, in alphabetical order by first name:</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/b5ec2af9b064c76ede72c312a0520bda83fa6c97">b5ec2af</a><ul><li>Date : 2013-02-04</li><li>moved license</li></ul></li></ul>
<div class="row-fluid" id="com_b5ec2af9b064c76ede72c312a0520bda83fa6c97">
    <div class="span6"><div class="diff"><div class="insert">+### About this book</div><div class="insert">+</div><div class="insert">+This book includes the following chapters, besides this introduction:</div><div class="insert">+- Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class="insert">+- Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class="insert">+- Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class="insert">+- Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class="insert">+- Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="insert">+- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class="insert">+- Chapter 8 covers communication with as sending emails and SMSes.</div><div class="insert">+- Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class="insert">+- Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class="insert">+- Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class="insert">+- Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class="insert">+- Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class="insert">+- Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class="insert">+</div><div class="insert">+This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class="insert">+This book does not cover web2py appliances (i.e. ready made applications).</div><div class="insert">+</div><div class="insert">+You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class="insert">+</div><div class="insert">+You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class="insert">+``MARKMIN``:inxx</div><div class="insert">+This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class="insert">+</div><div class="insert">+### Support</div><div class="insert">+</div><div class="insert">+The main support channel is the usergroup``usergroup``:cite, with dozens of posts every day. Even if you&#x27;re a newbie, don&#x27;t hesitate to ask - we&#x27;ll be pleased to help you.  </div><div class="insert">+There is also a formal issue tracker system on http://code.google.com/p/web2py/issue . Last but not least, you can have professional support (see the web site for details). </div><div class="insert">+</div><div class="insert">+### Contribute</div><div class="insert">+</div><div class="insert">+Any help is really appreciated. You can help other users on the user group, or by directly submitting patches on the program (at the GitHub site https://github.com/web2py/web2py). </div><div class="insert">+Even if you find a typo on this book, or have an improvement on it, the best way to help is by patching the book itself (which is under the source folder of the repository </div><div class="insert">+at https://github.com/mdipierro/web2py-book).</div><div class="insert">+</div><div class="insert">+### Elements of style</div><div class="insert">+</div><div class="insert">+PEP8 ``style``:cite  contains good style practices when programming with Python. You will find</div><div class="insert">+that web2py does not always follow these rules. This is not because of omissions or negligence; it is our</div><div class="insert">+belief that the users of web2py should follow these rules and we encourage it. We chose not to</div><div class="insert">+follow some of those rules when defining web2py helper objects in order to minimize the probability</div><div class="insert">+of name conflict with objects defined by the user.</div><div class="insert">+</div><div class="insert">+For example, the class that represents a ``&lt;div&gt;`` is called ``DIV``, while according to the</div><div class="insert">+Python style reference it should have been called ``Div``. We believe that, for this specific example that</div><div class="insert">+using an all-upper-case &quot;DIV&quot; is a more natural choice. Moreover, this approach leaves programmers</div><div class="insert">+free to create a class called &quot;Div&quot; if they choose to do so.</div><div class="insert">+Our syntax also maps naturally into the DOM notation of most browsers (including, for example, Firefox).</div><div class="insert">+</div><div class="insert">+According to the Python style guide, all-upper-case strings should be used for constants and not</div><div class="insert">+variables. Continuing with our example, even considering that ``DIV`` is a class,</div><div class="insert">+it is a special class that should never be modified by</div><div class="insert">+the user because doing so would break other web2py applications.</div><div class="insert">+Hence, we believe this qualifies the ``DIV`` class as</div><div class="insert">+something that should be treated as a constant, further justifying our choice of notation.</div><div class="insert">+</div><div class="insert">+In summary, the following conventions are followed:</div><div class="insert">+- HTML helpers and validators are all upper case for the reasons discussed above (for example ``DIV``, ``A``, ``FORM``, ``URL``).</div><div class="insert">+- The translator object ``T`` is upper case despite the fact that it is an instance of a class and not a class itself. Logically the translator object performs an action similar to the HTML helpers, it affects rendering part of the presentation. Also, ``T`` needs to be easy to locate in the code and must have a short name.</div><div class="insert">+- DAL classes follow the Python style guide (first letter capitalized), for example ``Table``, ``Field``, ``Query``, ``Row``, ``Rows``, etc.</div><div class="insert">+</div><div class="insert">+In all other cases we believe we have followed, as much as possible,</div><div class="insert">+the Python Style Guide (PEP8).</div><div class="insert">+For example all instance objects are lower-case (request, response, session, cache), and all internal classes are capitalized.</div><div class="insert">+</div><div class="insert">+In all the examples of this book, web2py keywords are shown in bold, while strings and comments are shown in italic.</div><div class="insert">+</div><div class="insert">+</div><div class=""> ### License</div><div class=""> ``license``:inxx</div><div class=""> </div><div class=""> web2py is licensed under the LGPL version 3 License. The full text of the license if available in ref.``lgpl3``:cite.</div><div class=""> </div><div class=""> In accordance with LGPL you may:</div><div class=""> </div><div class=""> - redistribute web2py with your apps (including official web2py binary versions)</div><div class=""> - release your applications which use official web2py libraries under any license you wish</div><div class=""> </div><div class=""> Yet you must:</div><div class=""> </div><div class=""> - make clear in the documentation that your application uses web2py</div><div class=""> - release any modification of the web2py libraries under the LGPLv3 license</div><div class=""> </div><div class=""> The license includes the usual disclaimer:</div><div class=""> </div><div class=""> THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.</div><div class=""> EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES</div><div class=""> PROVIDE THE PROGRAM “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED,</div><div class=""> INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</div><div class=""> FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE</div><div class=""> PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL</div><div class=""> NECESSARY SERVICING, REPAIR OR CORRECTION.</div><div class=""> </div><div class=""> IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT</div><div class=""> HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE,</div><div class=""> BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL</div><div class=""> DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED</div><div class=""> TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wen Gong,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class=""> I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Brian, Bruno, Denes, Dane Denny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Margaret, Michele, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class=""> </div><div class=""> web2py contains code from the following authors, whom I would like to thank:</div><div class=""> </div><div class=""> Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class=""> </div><div class=""> The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class=""> </div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class=""> </div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div></div></div>
    <div class="span6"><div class="diff"><div class=""> ### License</div><div class=""> ``license``:inxx</div><div class=""> </div><div class=""> web2py is licensed under the LGPL version 3 License. The full text of the license if available in ref.``lgpl3``:cite.</div><div class=""> </div><div class=""> In accordance with LGPL you may:</div><div class=""> </div><div class=""> - redistribute web2py with your apps (including official web2py binary versions)</div><div class=""> - release your applications which use official web2py libraries under any license you wish</div><div class=""> </div><div class=""> Yet you must:</div><div class=""> </div><div class=""> - make clear in the documentation that your application uses web2py</div><div class=""> - release any modification of the web2py libraries under the LGPLv3 license</div><div class=""> </div><div class=""> The license includes the usual disclaimer:</div><div class=""> </div><div class=""> THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.</div><div class=""> EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES</div><div class=""> PROVIDE THE PROGRAM “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED,</div><div class=""> INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</div><div class=""> FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE</div><div class=""> PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL</div><div class=""> NECESSARY SERVICING, REPAIR OR CORRECTION.</div><div class=""> </div><div class=""> IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT</div><div class=""> HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE,</div><div class=""> BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL</div><div class=""> DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED</div><div class=""> TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wen Gong,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class=""> I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Brian, Bruno, Denes, Dane Denny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Margaret, Michele, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class=""> </div><div class=""> web2py contains code from the following authors, whom I would like to thank:</div><div class=""> </div><div class=""> Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class=""> </div><div class=""> The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class=""> </div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class=""> </div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div><div class="delete">-### About this book</div><div class="delete">-</div><div class="delete">-This book includes the following chapters, besides this introduction:</div><div class="delete">-- Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class="delete">-- Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class="delete">-- Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class="delete">-- Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class="delete">-- Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="delete">-- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class="delete">-- Chapter 8 covers communication with as sending emails and SMSes.</div><div class="delete">-- Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class="delete">-- Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class="delete">-- Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class="delete">-- Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class="delete">-- Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class="delete">-- Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class="delete">-</div><div class="delete">-This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class="delete">-This book does not cover web2py appliances (i.e. ready made applications).</div><div class="delete">-</div><div class="delete">-You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class="delete">-</div><div class="delete">-You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class="delete">-``MARKMIN``:inxx</div><div class="delete">-This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class="delete">-</div><div class="delete">-### Support</div><div class="delete">-</div><div class="delete">-The main support channel is the usergroup``usergroup``:cite, with dozens of posts every day. Even if you&#x27;re a newbie, don&#x27;t hesitate to ask - we&#x27;ll be pleased to help you.  </div><div class="delete">-There is also a formal issue tracker system on http://code.google.com/p/web2py/issue . Last but not least, you can have professional support (see the web site for details). </div><div class="delete">-</div><div class="delete">-### Contribute</div><div class="delete">-</div><div class="delete">-Any help is really appreciated. You can help other users on the user group, or by directly submitting patches on the program (at the GitHub site https://github.com/web2py/web2py). </div><div class="delete">-Even if you find a typo on this book, or have an improvement on it, the best way to help is by patching the book itself (which is under the source folder of the repository </div><div class="delete">-at https://github.com/mdipierro/web2py-book).</div><div class="delete">-</div><div class="delete">-### Elements of style</div><div class="delete">-</div><div class="delete">-PEP8 ``style``:cite  contains good style practices when programming with Python. You will find</div><div class="delete">-that web2py does not always follow these rules. This is not because of omissions or negligence; it is our</div><div class="delete">-belief that the users of web2py should follow these rules and we encourage it. We chose not to</div><div class="delete">-follow some of those rules when defining web2py helper objects in order to minimize the probability</div><div class="delete">-of name conflict with objects defined by the user.</div><div class="delete">-</div><div class="delete">-For example, the class that represents a ``&lt;div&gt;`` is called ``DIV``, while according to the</div><div class="delete">-Python style reference it should have been called ``Div``. We believe that, for this specific example that</div><div class="delete">-using an all-upper-case &quot;DIV&quot; is a more natural choice. Moreover, this approach leaves programmers</div><div class="delete">-free to create a class called &quot;Div&quot; if they choose to do so.</div><div class="delete">-Our syntax also maps naturally into the DOM notation of most browsers (including, for example, Firefox).</div><div class="delete">-</div><div class="delete">-According to the Python style guide, all-upper-case strings should be used for constants and not</div><div class="delete">-variables. Continuing with our example, even considering that ``DIV`` is a class,</div><div class="delete">-it is a special class that should never be modified by</div><div class="delete">-the user because doing so would break other web2py applications.</div><div class="delete">-Hence, we believe this qualifies the ``DIV`` class as</div><div class="delete">-something that should be treated as a constant, further justifying our choice of notation.</div><div class="delete">-</div><div class="delete">-In summary, the following conventions are followed:</div><div class="delete">-- HTML helpers and validators are all upper case for the reasons discussed above (for example ``DIV``, ``A``, ``FORM``, ``URL``).</div><div class="delete">-- The translator object ``T`` is upper case despite the fact that it is an instance of a class and not a class itself. Logically the translator object performs an action similar to the HTML helpers, it affects rendering part of the presentation. Also, ``T`` needs to be easy to locate in the code and must have a short name.</div><div class="delete">-- DAL classes follow the Python style guide (first letter capitalized), for example ``Table``, ``Field``, ``Query``, ``Row``, ``Rows``, etc.</div><div class="delete">-</div><div class="delete">-In all other cases we believe we have followed, as much as possible,</div><div class="delete">-the Python Style Guide (PEP8).</div><div class="delete">-For example all instance objects are lower-case (request, response, session, cache), and all internal classes are capitalized.</div><div class="delete">-</div><div class="delete">-In all the examples of this book, web2py keywords are shown in bold, while strings and comments are shown in italic.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/7bce1473ce90f4e60f49d72bf1b61d32f430cb54">7bce147</a><ul><li>Date : 2012-12-22</li><li>scheduler.queue_task</li></ul></li></ul>
<div class="row-fluid" id="com_7bce1473ce90f4e60f49d72bf1b61d32f430cb54">
    <div class="span6"><div class="diff"><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class="insert">form = <span class="highlight">SQLFORM</span>(db.person)<span class="highlight">.process()</span></div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> The following code:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class=""> prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class=""> The following code embeds a page component.</div><div class=""> ``</div><div class=""> {{=LOAD(&#x27;other_controller&#x27;,&#x27;function.load&#x27;,ajax=True, ajax_trap=True)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> This instructs web2py to load in a view the content generated by the other controller function (this works with any function). It loads the content via Ajax, embeds it into the current page (using the current layout, not the layout of the other_controller function), and traps all forms contained in the loaded content so that they are also submitted via Ajax without reloading the page. It can also LOAD content from non-web2py applications.</div><div class=""> </div><div class=""> The LOAD helper allows very modular design of applications; it is discussed in some detail in the last chapter of this book.</div><div class=""> </div><div class=""> ### Principles</div><div class=""> </div><div class=""> Python programming typically follows these basic principles:</div><div class=""> - Don&#x27;t repeat yourself (DRY).</div><div class=""> - There should be only one way of doing things.</div><div class=""> - Explicit is better than implicit.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary m</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and ipv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class=""> </div><div class=""> WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class=""> </div><div class=""> Here is a screenshot of the main web2py **admin** interface:</div><div class=""> </div><div class=""> [[image @///image/en200.png center 480px]]</div><div class=""> </div><div class=""> </div><div class=""> ### Security</div><div class=""> ``security``:inxx</div><div class=""> The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class=""> on improving the security of application software.</div><div class=""> </div><div class=""> OWASP has listed the top ten security issues that put web applications at risk.</div><div class=""> That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class=""> - ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class="insert">- ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with <span class="highlight">database filters</span> to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign ajax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> ### In the box</div><div class=""> </div><div class=""> You can download web2py from the official web site:</div><div class=""> </div><div class=""> ``</div><div class=""> http://www.web2py.com</div><div class=""> ``:code</div><div class=""> </div><div class=""> web2py is composed of the following components:</div><div class=""> - **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class=""> - **web server**: the Rocket WSGI web server.</div><div class=""> - the **admin** application: used to create, design, and manage other web2py applications. **admin** provide a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class=""> - the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class=""> - the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class=""> </div><div class=""> web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class=""> </div><div class=""> The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class=""> To run the source code, you need Python 2.5 pre-installed on the system. You also need one of the supported database engines installed.</div><div class=""> For testing and light-demand applications, you can use the SQLite database, included with Python 2.5.</div><div class=""> </div><div class=""> The binary versions of web2py (for Windows and Mac OS X) include a Python 2.5 interpreter and</div><div class=""> the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class=""> enables you to run web2py out of the box.</div><div class=""> </div><div class=""> The following image depicts the overall web2py structure:</div><div class=""> </div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Younghyun Jo,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class=""> I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class=""> </div><div class=""> web2py contains code from the following authors, whom I would like to thank:</div><div class=""> </div><div class=""> Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class=""> </div><div class=""> The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class=""> </div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class=""> </div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class=""> - Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="insert">- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss <span class="highlight">legacy</span> Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class=""> - Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class=""> - Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class="delete">form = <span class="highlight">crud.create</span>(db.person)<span class="highlight"></span></div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> The following code:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class=""> prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class=""> The following code embeds a page component.</div><div class=""> ``</div><div class=""> {{=LOAD(&#x27;other_controller&#x27;,&#x27;function.load&#x27;,ajax=True, ajax_trap=True)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> This instructs web2py to load in a view the content generated by the other controller function (this works with any function). It loads the content via Ajax, embeds it into the current page (using the current layout, not the layout of the other_controller function), and traps all forms contained in the loaded content so that they are also submitted via Ajax without reloading the page. It can also LOAD content from non-web2py applications.</div><div class=""> </div><div class=""> The LOAD helper allows very modular design of applications; it is discussed in some detail in the last chapter of this book.</div><div class=""> </div><div class=""> ### Principles</div><div class=""> </div><div class=""> Python programming typically follows these basic principles:</div><div class=""> - Don&#x27;t repeat yourself (DRY).</div><div class=""> - There should be only one way of doing things.</div><div class=""> - Explicit is better than implicit.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary m</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class=""> - web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and ipv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class=""> </div><div class=""> WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class=""> </div><div class=""> Here is a screenshot of the main web2py **admin** interface:</div><div class=""> </div><div class=""> [[image @///image/en200.png center 480px]]</div><div class=""> </div><div class=""> </div><div class=""> ### Security</div><div class=""> ``security``:inxx</div><div class=""> The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class=""> on improving the security of application software.</div><div class=""> </div><div class=""> OWASP has listed the top ten security issues that put web applications at risk.</div><div class=""> That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class=""> - ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class="delete">- ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with <span class="highlight">CRUD</span> to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign ajax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> ### In the box</div><div class=""> </div><div class=""> You can download web2py from the official web site:</div><div class=""> </div><div class=""> ``</div><div class=""> http://www.web2py.com</div><div class=""> ``:code</div><div class=""> </div><div class=""> web2py is composed of the following components:</div><div class=""> - **libraries**: provide core functionality of web2py and are accessible programmatically.</div><div class=""> - **web server**: the Rocket WSGI web server.</div><div class=""> - the **admin** application: used to create, design, and manage other web2py applications. **admin** provide a complete web-based Integrated Development Environment (IDE) for building web2py applications. It also includes other functionality, such as web-based testing and a web-based shell.</div><div class=""> - the **examples** application: contains documentation and interactive examples. **examples** is a clone of the official web2py.com web site, and includes epydoc documentation.</div><div class=""> - the **welcome** application: the basic scaffolding template for any other application. By default it includes a pure CSS cascading menu and user authentication (discussed in Chapter 9).</div><div class=""> </div><div class=""> web2py is distributed in source code, and in binary form for Microsoft Windows and for Mac OS X.</div><div class=""> </div><div class=""> The source code distribution can be used in any platform where Python runs and includes the above-mentioned components.</div><div class=""> To run the source code, you need Python 2.5 pre-installed on the system. You also need one of the supported database engines installed.</div><div class=""> For testing and light-demand applications, you can use the SQLite database, included with Python 2.5.</div><div class=""> </div><div class=""> The binary versions of web2py (for Windows and Mac OS X) include a Python 2.5 interpreter and</div><div class=""> the SQLite database. Technically, these two are not components of web2py. Including them in the binary distributions</div><div class=""> enables you to run web2py out of the box.</div><div class=""> </div><div class=""> The following image depicts the overall web2py structure:</div><div class=""> </div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Younghyun Jo,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class=""> I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div><div class=""> </div><div class=""> web2py contains code from the following authors, whom I would like to thank:</div><div class=""> </div><div class=""> Guido van Rossum for Python``python``:cite, Peter Hunt, Richard Gordon, Timothy Farrell for the Rocket``rocket``:cite  web server, Christopher Dolivet for EditArea``editarea``:cite, Bob Ippolito for simplejson``simplejson``:cite, Simon Cusack and Grant Edwards for pyRTF``pyrtf``:cite, Dalke Scientific Software for pyRSS2Gen``pyrss2gen``:cite, Mark Pilgrim for feedparser``feedparser``:cite, Trent Mick for markdown2``markdown2``:cite, Allan Saddi for fcgi.py, Evan Martin for the Python memcache module``memcache``:cite, John Resig for jQuery``jquery``:cite.</div><div class=""> </div><div class=""> The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class=""> </div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class=""> </div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class=""> - Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class="delete">- Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss <span class="highlight">the</span> Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class=""> - Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class=""> - Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/f4acbf65fe095fa93ffa48b7d082fa74c886be44">f4acbf6</a><ul><li>Date : 2012-09-17</li><li>added usergroup reference</li></ul></li></ul>
<div class="row-fluid" id="com_f4acbf65fe095fa93ffa48b7d082fa74c886be44">
    <div class="span6"><div class="diff"><div class="insert">+You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class="insert">+``MARKMIN``:inxx</div><div class="insert">+This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">-You can find additional topics discussed on AlterEgo``alterego``:cite, the interactive web2py FAQ.</div><div class="delete">-</div><div class="delete">-This book has been written using the markmin syntax ``MARKMIN``:inxx and automatically converted to HTML, LaTeX and PDF.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/13346ee2edacdf0949376d16611c0c74748f4e41">13346ee</a><ul><li>Date : 2013-02-10</li><li>fixed link to movica</li></ul></li></ul>
<div class="row-fluid" id="com_13346ee2edacdf0949376d16611c0c74748f4e41">
    <div class="span6"><div class="diff"><div class="insert">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Brian, Bruno, Denes, Dane Denny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Margaret, Michele, <span class="highlight">Nico, </span>Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Brian, Bruno, Denes, Dane Denny, Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Margaret, Michele, <span class="highlight"></span>Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus, Wen (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/60ecdf04f0802a47a3fb83116d1449f8c3e6f141">60ecdf0</a><ul><li>Date : 2012-12-26</li><li>added wiki info</li></ul></li></ul>
<div class="row-fluid" id="com_60ecdf04f0802a47a3fb83116d1449f8c3e6f141">
    <div class="span6"><div class="diff"><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class="insert">runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and <span class="highlight">PyPy</span> (<span class="highlight">Python written in Python), on Python </span>v<span class="highlight">ersions</span> 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class=""> </div><div class=""> web2py provides a ticketing system. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class=""> Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class=""> We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will still work today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class="insert">+This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, adn oembed support:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+def index(): return auth.wiki()</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class=""> prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class="insert"><span class="highlight">web2py also supports components, i.e. actions which can be loaded in a view and interact with the visitor via Ajax without re-loading the entire page. </span>Th<span class="highlight">is is done via a ``</span>LOAD<span class="highlight">`` helper which</span> allows very modular design of applications; it is discussed in <span class="highlight">chapter 3 in the context of the wiki and, in </span>some detail<span class="highlight">,</span> in the last chapter of this book.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class="delete">runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and <span class="highlight">Jython</span> (<span class="highlight">the Ja</span>v<span class="highlight">a implementation), on Python versions 2.4,</span> 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class=""> </div><div class=""> web2py provides a ticketing system. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class=""> Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class=""> We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will still work today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class="delete">-The following code:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class=""> prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class="delete">-The following code embeds a page component.</div><div class="delete">-``</div><div class="delete">-{{=LOAD(&#x27;other_controller&#x27;,&#x27;function.load&#x27;,ajax=True, ajax_trap=True)}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-This instructs web2py to load in a view the content generated by the other controller function (this works with any function). It loads the content via Ajax, embeds it into the current page (using the current layout, not the layout of the other_controller function), and traps all forms contained in the loaded content so that they are also submitted via Ajax without reloading the page. It can also LOAD content from non-web2py applications.</div><div class="delete">-</div><div class="delete"><span class="highlight"></span>Th<span class="highlight">e </span>LOAD<span class="highlight"> helper</span> allows very modular design of applications; it is discussed in <span class="highlight"></span>some detail<span class="highlight"></span> in the last chapter of this book.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/e706d40e67287f56741ecf730ef44a7e3ac66054">e706d40</a><ul><li>Date : 2013-01-20</li><li>edited acknowledgements</li></ul></li></ul>
<div class="row-fluid" id="com_e706d40e67287f56741ecf730ef44a7e3ac66054">
    <div class="span6"><div class="diff"><div class=""> web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql-w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class=""> SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class="insert">+FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, </div><div class="insert">+Ingres``ingresdb``:cite, and MongoDB``mongodb``:cite.</div><div class=""> The DAL can also generate function calls for the Google Datastore</div><div class=""> when running on the Google App Engine (GAE)``gae``:cite.</div><div class=""> Experimentally we support more databases. Please check on the        web2py web site        and mailing list for more recent adapters.</div><div class=""> Once one or more database tables are defined, web2py also generates a fully functional web-based database</div><div class=""> administration interface to access the database and the tables.</div><div class=""> </div><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class=""> runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class=""> </div><div class=""> web2py provides a ticketing system. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class=""> Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class=""> We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will work even better today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class=""> Pieter Muller,</div><div class=""> Piotr Banasziewicz,</div><div class=""> Ramjee Ganti,</div><div class=""> Richard Gordon,</div><div class=""> Richard Ree,</div><div class=""> Robert Kooij,</div><div class=""> Robert Valentak,</div><div class=""> Roberto	Perdomo,</div><div class=""> Robin Bhattacharyya,</div><div class=""> Roman Bataev,</div><div class=""> Ron McOuat,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class=""> Running Calm,</div><div class=""> Ryan Seto,</div><div class=""> Salomon Derossi,</div><div class=""> Sam Sheftel,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class="insert">+Tim Richardson,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql-w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class=""> SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class="delete">-FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, and</div><div class="delete">-Ingres``ingresdb``:cite.</div><div class=""> The DAL can also generate function calls for the Google Datastore</div><div class=""> when running on the Google App Engine (GAE)``gae``:cite.</div><div class=""> Experimentally we support more databases. Please check on the        web2py web site        and mailing list for more recent adapters.</div><div class=""> Once one or more database tables are defined, web2py also generates a fully functional web-based database</div><div class=""> administration interface to access the database and the tables.</div><div class=""> </div><div class=""> web2py differs from other web frameworks in that it is the only framework to fully embrace the Web 2.0</div><div class=""> paradigm, where the web is the computer. In fact, web2py does not require installation or configuration; it</div><div class=""> runs on any architecture that can run Python (Windows, Windows CE, Mac OS X, iOS, and Unix/Linux), and the development, deployment, and maintenance phases for the applications can be done via a local or remote web interface.  web2py runs with CPython (the C implementation) and PyPy (Python written in Python), on Python versions 2.5, 2.6, and 2.7, although &quot;officially&quot; it only supports 2.5 so that we can guarantee backward compatibility for applications.</div><div class=""> </div><div class=""> web2py provides a ticketing system. If an error occurs, a ticket is issued to the user,</div><div class=""> and the error is logged for the administrator.</div><div class=""> </div><div class=""> web2py is open source and released under the LGPL version 3 license.</div><div class=""> </div><div class=""> Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class=""> We have done so since the first release of web2py in October, 2007.</div><div class=""> New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will work even better today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class=""> Pieter Muller,</div><div class=""> Piotr Banasziewicz,</div><div class=""> Ramjee Ganti,</div><div class=""> Richard Gordon,</div><div class=""> Richard Ree,</div><div class=""> Robert Kooij,</div><div class=""> Robert Valentak,</div><div class=""> Roberto	Perdomo,</div><div class=""> Robin Bhattacharyya,</div><div class=""> Roman Bataev,</div><div class=""> Ron McOuat,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class=""> Running Calm,</div><div class=""> Ryan Seto,</div><div class=""> Salomon Derossi,</div><div class=""> Sam Sheftel,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/8017cbc3b9f2baffb10e902d03c1dfa21e709243">8017cbc</a><ul><li>Date : 2013-01-15</li><li>added SUPPORT and CONTRIBUTE paragraph on chapter 1</li></ul></li></ul>
<div class="row-fluid" id="com_8017cbc3b9f2baffb10e902d03c1dfa21e709243">
    <div class="span6"><div class="diff"><div class=""> Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class=""> We have done so since the first release of web2py in October, 2007.</div><div class="insert">New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will <span class="highlight"></span>work<span class="highlight"> even better</span> today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, and oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class=""> </div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class=""> - Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class=""> - Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class=""> - Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class=""> - Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class=""> </div><div class=""> This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class=""> This book does not cover web2py appliances (i.e. ready made applications).</div><div class=""> </div><div class=""> You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class=""> </div><div class=""> You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class=""> ``MARKMIN``:inxx</div><div class=""> This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class=""> </div><div class="insert">+### Support</div><div class="insert">+</div><div class="insert">+The main support channel is the usergroup``usergroup``:cite, with dozens of posts everyday. Even if you&#x27;re a newby, don&#x27;t hesitate to ask - we&#x27;ll be pleased to help you.  </div><div class="insert">+There is also a formal issue tracker system on http://code.google.com/p/web2py/issue . Last but not least, you can have professional support (see the web site for details). </div><div class="insert">+</div><div class="insert">+### Contribute</div><div class="insert">+</div><div class="insert">+Any help is really appreciated. You can help other users on the usergroup, or by directly submitting patches on the program (at the GitHub site https://github.com/web2py/web2py). </div><div class="insert">+Even if you find a typo on this book, or have an improvement on it, the best way to help is by patching the book itself (which is under the source folder of the repository </div><div class="insert">+at https://github.com/mdipierro/web2py-book).</div><div class="insert">+</div><div class=""> ### Elements of style</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Another feature of web2py is that we, its developers, commit to maintain backward compatibility in future versions.</div><div class=""> We have done so since the first release of web2py in October, 2007.</div><div class="delete">New features have been added and bugs have been fixed, but if a program worked with web2py 1.0, that program will <span class="highlight">still </span>work<span class="highlight"></span> today.</div><div class=""> </div><div class=""> Here are some examples of web2py statements that illustrate its power and simplicity. The following code:</div><div class=""> ``</div><div class=""> db.define_table(&#x27;person&#x27;, Field(&#x27;name&#x27;), Field(&#x27;image&#x27;, &#x27;upload&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates a database table called &quot;person&quot; with two fields: &quot;name&quot;, a string; and &quot;image&quot;, something that</div><div class=""> needs to be uploaded (the actual image). If the table already exists but does not match this definition, it is altered appropriately.</div><div class=""> </div><div class=""> Given the table defined above, the following code:</div><div class=""> ``</div><div class=""> form = SQLFORM(db.person).process()</div><div class=""> ``:code</div><div class=""> </div><div class=""> creates an insert form for this table that allows users to upload images. It also</div><div class=""> validates a submitted form, renames the uploaded image in a secure way, stores the image in a file,</div><div class=""> inserts the corresponding record in the database, prevents double submission, and eventually modifies</div><div class=""> the form itself by adding error messages if the data submitted by the user does not pass validation.</div><div class=""> </div><div class=""> This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, and oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> The cover of this book was designed by Peter Kirchner at Young Designers.</div><div class=""> I thank Helmut Epp (provost of DePaul University), David Miller (Dean of the College of Computing and Digital Media of DePaul University), and Estia Eichten (Member of MetaCryption LLC), for their continuous trust and support.</div><div class=""> </div><div class=""> Finally, I wish to thank my wife, Claudia, and my son, Marco, for putting up with me during the many hours I have spent developing web2py, exchanging emails with users and collaborators, and writing this book. This book is dedicated to them.</div><div class=""> </div><div class=""> ### About this book</div><div class=""> </div><div class=""> This book includes the following chapters, besides this introduction:</div><div class=""> - Chapter 2 is a minimalist introduction to Python. It assumes knowledge of both procedural and object-oriented programming concepts such as loops, conditions, function calls and classes, and covers basic Python syntax. It also covers examples of Python modules that are used throughout the book. If you already know Python, you may skip Chapter 2.</div><div class=""> - Chapter 3 shows how to start web2py, discusses the administrative interface, and guides the reader through various examples of increasing complexity: an application that returns a string, a counter application, an image blog, and a full blown wiki application that allows image uploads and comments, provides authentication, authorization, web services and an RSS feed. While reading this chapter, you may need to refer to Chapter 2 for general Python syntax and to the following chapters for a more detailed reference about the functions that are used.</div><div class=""> - Chapter 4 covers more systematically the core structure and libraries: URL mapping, request, response, sessions, caching, cron, internationalization and general workflow.</div><div class=""> - Chapter 5 is a reference for the template language used to build views. It shows how to embed Python code into HTML, and demonstrates the use of helpers (objects that can generate HTML).</div><div class=""> - Chapter 6 covers the Database Abstraction Layer, or DAL. The syntax of the DAL is presented through a series of examples.</div><div class=""> - Chapter 7 covers forms, form validation and form processing. FORM is the low level helper for form building. SQLFORM is the high level form builder. In Chapter 7 we also discuss legacy Create/Read/Update/Delete (CRUD) API.</div><div class=""> - Chapter 8 covers communication with as sending emails and SMSes.</div><div class=""> - Chapter 9 covers authentication, authorization and the extensible Role-Based Access Control mechanism available in web2py. Mail configuration and CAPTCHA are also discussed here, since they are used for authentication. In the third edition of the book we have added extensive coverage of integration with third-party authentication mechanisms such as OpenID, OAuth, Google, Facebook, LinkedIn, etc.</div><div class=""> - Chapter 10 is about creating web services in web2py. We provide examples of integration with the Google Web Toolkit via Pyjamas, and with Adobe Flash via PyAMF.</div><div class=""> - Chapter 11 is about web2py and jQuery recipes. web2py is designed mainly for server-side programming, but it includes jQuery, since we have found it to be the best open-source JavaScript library available for effects and Ajax. In this chapter, we discuss how to effectively use jQuery with web2py.</div><div class=""> - Chapter 12 discusses web2py components and plugins as a way to build modular applications. We provide an example of a plugin that implements many commonly used functionality, such as charting, comments, tagging, and wiki.</div><div class=""> - Chapter 13 is about production deployment of web2py applications. We mainly address three possible production scenarios: on a Linux web server or a set of servers (which we consider the main deployment alternative), running as a service on a Microsoft Windows environment, and deployment on the Google Applications Engine. In this chapter, we also discuss security and scalability issues.</div><div class=""> - Chapter 14 contains a variety of other recipes to solve specific tasks, including upgrades, geocoding, pagination, the Twitter API, and more.</div><div class=""> </div><div class=""> This book only covers basic web2py functionalities and the API that ships with web2py.</div><div class=""> This book does not cover web2py appliances (i.e. ready made applications).</div><div class=""> </div><div class=""> You can download web2py appliances from the corresponding web site ``appliances``:cite.</div><div class=""> </div><div class=""> You can find additional topics discussed on the usergroup``usergroup``:cite. There is also AlterEgo``alterego``:cite, the old web2py blog and FAQ.</div><div class=""> ``MARKMIN``:inxx</div><div class=""> This book has been written using the markmin syntax and automatically converted to HTML, LaTeX and PDF.</div><div class=""> </div><div class=""> ### Elements of style</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/e9ef9bd3f5cf6e50bf3ecb806fdf04300c7fc6fd">e9ef9bd</a><ul><li>Date : 2012-12-28</li><li>edited intro</li></ul></li></ul>
<div class="row-fluid" id="com_e9ef9bd3f5cf6e50bf3ecb806fdf04300c7fc6fd">
    <div class="span6"><div class="diff"><div class="insert">+Nico Zanferrari,</div><div class=""> Nicolas Bruxer,</div><div class=""> Nik Klever,</div><div class=""> Olaf Ferger,</div><div class=""> Oliver Dain,</div><div class=""> Olivier Roch Vilato,</div><div class=""> Omi Chiba,</div><div class=""> Ondrej Such,</div><div class=""> Ont Rif,</div><div class=""> Oscar Benjamin,</div><div class=""> Osman Masood,</div><div class=""> Ovidio Marinho Falcao Neto,</div><div class=""> Pai,</div><div class=""> Panos Jee,</div><div class=""> Paolo Betti,</div><div class=""> Paolo Caruccio,</div><div class=""> Paolo Gasparello,</div><div class=""> Paolo Velleri,</div><div class=""> Patrick Breitenbach,</div><div class=""> Pearu Peterson,</div><div class=""> Peli Gergely,</div><div class=""> Pete Hunt,</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class=""> Pieter Muller,</div><div class=""> Piotr Banasziewicz,</div><div class=""> Ramjee Ganti,</div><div class=""> Richard Gordon,</div><div class=""> Richard Ree,</div><div class=""> Robert Kooij,</div><div class=""> Robert Valentak,</div><div class="insert">+Roberto	Perdomo,</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Nicolas Bruxer,</div><div class=""> Nik Klever,</div><div class=""> Olaf Ferger,</div><div class=""> Oliver Dain,</div><div class=""> Olivier Roch Vilato,</div><div class=""> Omi Chiba,</div><div class=""> Ondrej Such,</div><div class=""> Ont Rif,</div><div class=""> Oscar Benjamin,</div><div class=""> Osman Masood,</div><div class=""> Ovidio Marinho Falcao Neto,</div><div class=""> Pai,</div><div class=""> Panos Jee,</div><div class=""> Paolo Betti,</div><div class=""> Paolo Caruccio,</div><div class=""> Paolo Gasparello,</div><div class=""> Paolo Velleri,</div><div class=""> Patrick Breitenbach,</div><div class=""> Pearu Peterson,</div><div class=""> Peli Gergely,</div><div class=""> Pete Hunt,</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class=""> Pieter Muller,</div><div class=""> Piotr Banasziewicz,</div><div class=""> Ramjee Ganti,</div><div class=""> Richard Gordon,</div><div class=""> Richard Ree,</div><div class=""> Robert Kooij,</div><div class=""> Robert Valentak,</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/2b20826f933cdc4c573965d6aa7e7b61cf42bcea">2b20826</a><ul><li>Date : 2012-12-27</li><li>updated list of contributors</li></ul></li></ul>
<div class="row-fluid" id="com_2b20826f933cdc4c573965d6aa7e7b61cf42bcea">
    <div class="span6"><div class="diff"><div class="insert">+Adam Bryzak,</div><div class="insert">+Adam Gojdas,</div><div class="insert">+Adrian Klaver,</div><div class="insert">+Alain Boulch,</div><div class="insert">+Alan Etkin,</div><div class="insert">+Alec Taylor,</div><div class="insert">+Alexandre Andrade,</div><div class=""> Alexey Nezhdanov,</div><div class=""> Alvaro Justen,</div><div class="insert">+Anand Vaidya,</div><div class="insert">+Anatoly Belyakov,</div><div class="insert">+Ander Arbelaiz,</div><div class="insert">+Anders Roos,</div><div class="insert">+Andrew Replogle,</div><div class=""> Andrew Willimott,</div><div class=""> Angelo Compagnucci,</div><div class="insert">+Angelo and Villas,</div><div class="insert">+Annet Vermeer,</div><div class=""> Anthony Bastardi,</div><div class="insert">+Anton Muecki,</div><div class=""> Antonio Ramos,</div><div class="insert">Arun<span class="highlight"></span> Rajeevan,</div><div class=""> Attila Csipa,</div><div class="insert">+Ben Goosman,</div><div class=""> Ben Reinhart,</div><div class="insert">+Benjamin,</div><div class="insert">+Bernd Rothert,</div><div class=""> Bill Ferret,</div><div class="insert">+Blomqvist,</div><div class=""> Boris Manojlovic,</div><div class=""> Branko Vukelic,</div><div class="insert">+Brent Zeiben,</div><div class="insert">+Brian Cottingham,</div><div class="insert">+Brian Harrison,</div><div class=""> Brian Meredyk,</div><div class=""> Bruno Rocha,</div><div class="insert">+CJ Lazell,</div><div class="insert">+Caleb Hattingh,</div><div class=""> Carlos Galindo,</div><div class="insert">+Carlos Hanson,</div><div class=""> Carsten Haese,</div><div class="insert">+Cedric Meyer,</div><div class="insert">+Charles Law,</div><div class="insert">+Charles Winebrinner,</div><div class=""> Chris Clark,</div><div class="insert">+Chris May,</div><div class="insert">+Chris Sanders,</div><div class=""> Christian Foster Howes,</div><div class=""> Christopher Smiga,</div><div class="insert">+Christopher Steel,</div><div class="insert">+Clavin Sim,</div><div class=""> Cliff Kachinske,</div><div class="insert">+Corne Dickens,</div><div class=""> Craig Younkins,</div><div class="insert">+Dan McGee,</div><div class="insert">+Dan Ragubba,</div><div class="insert">+Daniel Gonz,</div><div class="insert">+Daniel Haag,</div><div class=""> Daniel Lin,</div><div class="insert">+Dave Stoll,</div><div class="insert">+David Adley,</div><div class=""> David Harrison,</div><div class="insert">+David Lin,</div><div class="insert">+David Marko,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div><div class="insert">+Diaz Luis,</div><div class=""> Dirk Krause,</div><div class="insert">+Dominic Koenig,</div><div class="insert">+Doug Warren,</div><div class="insert">+Douglas Philips,</div><div class=""> Douglas Soares de Andrade,</div><div class="insert">+Douglas and Alan,</div><div class="insert">+Dustin Bensing,</div><div class="insert">+Elcio Ferreira,</div><div class=""> Eric Vicenti,</div><div class=""> Falko Krause,</div><div class=""> Farsheed Ashouri,</div><div class="insert">+Felipe Meirelles,</div><div class="insert">+Flavien Scheurer,</div><div class=""> Fran Boon,</div><div class=""> Francisco Gama,</div><div class=""> Fred Yanowski,</div><div class="insert">+Friedrich Weber,</div><div class="insert">+Gabriele Alberti,</div><div class="insert">+Gergely Kontra,</div><div class="insert">+Gergely Peli,</div><div class="insert">+Gerley Kontra,</div><div class=""> Gilson Filho,</div><div class="insert">+Glenn Caltech,</div><div class=""> Graham Dumpleton,</div><div class="insert">+Gregory Benjamin,</div><div class="insert">+Gustavo Di Pietro,</div><div class=""> Gyuris Szabolcs,</div><div class=""> Hamdy Abdel-Badeea,</div><div class="insert">+Hans C. v. Stockhausen,</div><div class=""> Hans Donner,</div><div class=""> Hans Murx,</div><div class="insert">H<span class="highlight">uaiyu W</span>an<span class="highlight">g</span>,</div><div class=""> Ian Reinhart Geiser,</div><div class="insert">+Iceberg,</div><div class="insert">+Igor Gassko,</div><div class=""> Ismael Serratos,</div><div class=""> Jan Beilicke,</div><div class="insert">+Jay Kelkar,</div><div class="insert">+Jeff Bauer,</div><div class="insert">+Jesus Matrinez,</div><div class="insert">+Jim Karsten,</div><div class="insert">+Joachim Breitsprecher,</div><div class="insert">+Joakim Eriksson,</div><div class="insert">+Joe Barnhart,</div><div class="insert">+Joel Carrier,</div><div class="insert">+Joel Samuelsson,</div><div class="insert">+John Heenan,</div><div class="insert">+Jon Romero,</div><div class="insert">+Jonas Rundberg,</div><div class=""> Jonathan Benn,</div><div class=""> Jonathan Lundell,</div><div class=""> Jose Jachuf,</div><div class="insert">+Joseph Piron,</div><div class="insert">+Josh Goldfoot,</div><div class=""> Josh Jaques,</div><div class=""> José Vicente de Sousa,</div><div class="insert">+Jurgis Pralgauskis,</div><div class=""> Keith Yang,</div><div class=""> Kenji Hosoda,</div><div class="insert">+Kenneth Lundstr,</div><div class="insert">+Kirill Spitsin,</div><div class=""> Kyle Smith,</div><div class="insert">+Larry Weinberg,</div><div class=""> Limodou,</div><div class="insert">+Loren McGinnis,</div><div class="insert">+Louis DaPrato,</div><div class="insert">+Luca Zachetti,</div><div class=""> Lucas D&#x27;Ávila,</div><div class="insert">+Madhukar R Pai,</div><div class="insert">+Manuele Presenti,</div><div class="insert">+Marc Abramowitz,</div><div class=""> Marcel Hellkamp,</div><div class="insert">+Marcel Leuthi,</div><div class=""> Marcello Della Longa,</div><div class="insert">+Maria Mitica,</div><div class=""> Mariano Reingart,</div><div class="insert">+Marin Prajic,</div><div class="insert">+Marin Pranji,</div><div class="insert">+Marius van Niekerk,</div><div class="insert">+Mark Kirkwood,</div><div class=""> Mark Larsen,</div><div class=""> Mark Moore,</div><div class=""> Markus Gritsch,</div><div class="insert">+Mart Senecal,</div><div class=""> Martin Hufsky,</div><div class=""> Martin Mulone,</div><div class="insert">+Martin Weissenboeck,</div><div class=""> Mateusz Banach,</div><div class="insert">+Mathew Grabau,</div><div class="insert">+Mathieu Clabaut,</div><div class="insert">+Matt Doiron,</div><div class="insert">+Matthew Norris,</div><div class="insert">+Michael Fig,</div><div class="insert">+Michael Herman,</div><div class="insert">+Michael Howden,</div><div class="insert">+Michael Jursa,</div><div class="insert">+Michael Toomim,</div><div class=""> Michael Willis,</div><div class=""> Michele Comitini,</div><div class="insert">+Miguel Goncalves,</div><div class="insert">+Miguel Lopez,</div><div class="insert">+Mike Amy,</div><div class="insert">+Mike Dickun,</div><div class="insert">+Mike Ellis,</div><div class="insert">+Mike Pechkin,</div><div class="insert">+Milan Melena,</div><div class="insert">+Muhammet Aydin,</div><div class="insert">+Napoleon Moreno,</div><div class=""> Nathan Freeze,</div><div class=""> Niall Sweeny,</div><div class=""> Niccolo Polo,</div><div class="insert">+Nick Groenke,</div><div class="insert">+Nico de Groot,</div><div class=""> Nicolas Bruxer,</div><div class="insert">+Nik Klever,</div><div class=""> Olaf Ferger,</div><div class="insert">+Oliver Dain,</div><div class="insert">+Olivier Roch Vilato,</div><div class=""> Omi Chiba,</div><div class=""> Ondrej Such,</div><div class="insert">+Ont Rif,</div><div class="insert">+Oscar Benjamin,</div><div class="insert">+Osman Masood,</div><div class=""> Ovidio Marinho Falcao Neto,</div><div class=""> Pai,</div><div class="insert">+Panos Jee,</div><div class="insert">+Paolo Betti,</div><div class=""> Paolo Caruccio,</div><div class="insert">+Paolo Gasparello,</div><div class="insert">+Paolo Velleri,</div><div class=""> Patrick Breitenbach,</div><div class="insert">+Pearu Peterson,</div><div class="insert">+Peli Gergely,</div><div class="insert">+Pete Hunt,</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class="insert">+Pieter Muller,</div><div class="insert">+Piotr Banasziewicz,</div><div class=""> Ramjee Ganti,</div><div class="insert">+Richard Gordon,</div><div class="insert">+Richard Ree,</div><div class="insert">+Robert Kooij,</div><div class="insert">+Robert Valentak,</div><div class=""> Robin Bhattacharyya,</div><div class="insert">+Roman Bataev,</div><div class="insert">+Ron McOuat,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class="insert">+Running Calm,</div><div class=""> Ryan Seto,</div><div class="insert">+Salomon Derossi,</div><div class="insert">+Sam Sheftel,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class="insert">+Thomas Dallagnese,</div><div class="insert">+Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Timothy Farrell,</div><div class="insert">+Tito Garrido,</div><div class="insert">+Tyrone Hattingh,</div><div class="insert">+Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class="insert">+Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class="insert">+Vladimir Donnikov,</div><div class="insert">+Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class="insert">+Wang Huaiyu,</div><div class="insert">+Wes James,</div><div class="insert">+Will Stevens,</div><div class="insert">+Yair Eshel,</div><div class="insert">+Yarko Tymciurak,</div><div class="insert">+Yoshiyuki Nakamura,</div><div class="insert">+Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Alexey Nezhdanov,</div><div class=""> Alvaro Justen,</div><div class=""> Andrew Willimott,</div><div class=""> Angelo Compagnucci,</div><div class=""> Anthony Bastardi,</div><div class=""> Antonio Ramos,</div><div class="delete">Arun<span class="highlight"> K.</span> Rajeevan,</div><div class=""> Attila Csipa,</div><div class=""> Ben Reinhart,</div><div class=""> Bill Ferret,</div><div class=""> Boris Manojlovic,</div><div class=""> Branko Vukelic,</div><div class=""> Brian Meredyk,</div><div class=""> Bruno Rocha,</div><div class=""> Carlos Galindo,</div><div class=""> Carsten Haese,</div><div class=""> Chris Clark,</div><div class="delete">-Chris Steel,</div><div class=""> Christian Foster Howes,</div><div class=""> Christopher Smiga,</div><div class="delete">-CJ Lazell,</div><div class=""> Cliff Kachinske,</div><div class=""> Craig Younkins,</div><div class=""> Daniel Lin,</div><div class=""> David Harrison,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div><div class=""> Dirk Krause,</div><div class=""> Douglas Soares de Andrade,</div><div class=""> Eric Vicenti,</div><div class=""> Falko Krause,</div><div class=""> Farsheed Ashouri,</div><div class=""> Fran Boon,</div><div class=""> Francisco Gama,</div><div class=""> Fred Yanowski,</div><div class=""> Gilson Filho,</div><div class=""> Graham Dumpleton,</div><div class=""> Gyuris Szabolcs,</div><div class=""> Hamdy Abdel-Badeea,</div><div class=""> Hans Donner,</div><div class=""> Hans Murx,</div><div class="delete">H<span class="highlight"></span>an<span class="highlight">s C. v. Stockhausen</span>,</div><div class=""> Ian Reinhart Geiser,</div><div class=""> Ismael Serratos,</div><div class=""> Jan Beilicke,</div><div class=""> Jonathan Benn,</div><div class=""> Jonathan Lundell,</div><div class="delete">-Josh Goldfoot,</div><div class=""> Jose Jachuf,</div><div class=""> Josh Jaques,</div><div class=""> José Vicente de Sousa,</div><div class=""> Keith Yang,</div><div class=""> Kenji Hosoda,</div><div class=""> Kyle Smith,</div><div class=""> Limodou,</div><div class=""> Lucas D&#x27;Ávila,</div><div class="delete">-Marcel Leuthi,</div><div class=""> Marcel Hellkamp,</div><div class=""> Marcello Della Longa,</div><div class=""> Mariano Reingart,</div><div class=""> Mark Larsen,</div><div class=""> Mark Moore,</div><div class=""> Markus Gritsch,</div><div class=""> Martin Hufsky,</div><div class=""> Martin Mulone,</div><div class=""> Mateusz Banach,</div><div class="delete">-Miguel Lopez,</div><div class=""> Michael Willis,</div><div class=""> Michele Comitini,</div><div class=""> Nathan Freeze,</div><div class=""> Niall Sweeny,</div><div class=""> Niccolo Polo,</div><div class=""> Nicolas Bruxer,</div><div class=""> Olaf Ferger,</div><div class=""> Omi Chiba,</div><div class=""> Ondrej Such,</div><div class=""> Ovidio Marinho Falcao Neto,</div><div class=""> Pai,</div><div class=""> Paolo Caruccio,</div><div class=""> Patrick Breitenbach,</div><div class=""> Phyo Arkar Lwin,</div><div class=""> Pierre Thibault,</div><div class=""> Ramjee Ganti,</div><div class=""> Robin Bhattacharyya,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class=""> Ryan Seto,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Tim Michelsen,</div><div class=""> Timothy Farrell,</div><div class="delete">-Yair Eshel,</div><div class="delete">-Yarko Tymciurak,</div><div class="delete">-Younghyun Jo,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Zahariash.</div><div class=""> </div><div class="delete">-</div><div class=""> I am sure I forgot somebody, so I apologize.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/f2fd41dd2a0d4bf68f5cd4f0989fb32bdc35eac5">f2fd41d</a><ul><li>Date : 2012-12-31</li><li>spell check of diffs, thanks Joanthan</li></ul></li></ul>
<div class="row-fluid" id="com_f2fd41dd2a0d4bf68f5cd4f0989fb32bdc35eac5">
    <div class="span6"><div class="diff"><div class="insert">This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, a<span class="highlight">n</span>d<span class="highlight"></span> oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class=""> prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class=""> web2py also supports components, i.e. actions which can be loaded in a view and interact with the visitor via Ajax without re-loading the entire page. This is done via a ``LOAD`` helper which allows very modular design of applications; it is discussed in chapter 3 in the context of the wiki and, in some detail, in the last chapter of this book.</div><div class=""> </div><div class=""> ### Principles</div><div class=""> </div><div class=""> Python programming typically follows these basic principles:</div><div class=""> - Don&#x27;t repeat yourself (DRY).</div><div class=""> - There should be only one way of doing things.</div><div class=""> - Explicit is better than implicit.</div><div class=""> </div><div class=""> web2py fully embraces the first two principles by forcing the developer to use sound software</div><div class=""> engineering practices that discourage repetition of code. web2py guides the developer through almost</div><div class=""> all the tasks common in web application development (creating and processing forms, managing</div><div class=""> sessions, cookies, errors, etc.).</div><div class=""> </div><div class=""> ``request``:inxx</div><div class=""> web2py differs from other frameworks with regard to the third principle, which sometimes conflicts</div><div class=""> with the other two. In particular, web2py does not import user applications, but executes them in a predefined context.  This context exposes the Python keywords, as well as the web2py keywords.</div><div class=""> def contacts():</div><div class=""> </div><div class=""> In web2py, URLs are mapped to Python modules and function calls. In this case, the controller contains</div><div class=""> a single function (or &quot;action&quot;) called ``contacts``. An action may</div><div class=""> return a string (the returned web page) or a Python dictionary (a set of</div><div class=""> ``key:value`` pairs) or the set of local variables (as in this example).</div><div class=""> If the function returns a dictionary, it is passed to a view with the same</div><div class=""> name as the controller/function, which in turn renders the page.</div><div class=""> In this example, the function ``contacts`` generates a select/search/create/update/delete grid for table ``db.contact``</div><div class=""> and returns the grid to the view.</div><div class=""> </div><div class=""> **&quot;default/contacts.html&quot; is the view:**</div><div class=""> </div><div class=""> ``</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> &lt;h1&gt;Manage My Contacts&lt;/h1&gt;</div><div class=""> {{=grid}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> This view is called automatically by web2py after the associated controller function (action) is executed.</div><div class=""> The purpose of this view is to render the variables in the returned dictionary (in our case ``grid``) into HTML.</div><div class=""> The view file is written in HTML, but it embeds Python code delimited by the special ``{{`` and ``}}``</div><div class=""> delimiters. This is quite different from the PHP code example, because the only code</div><div class=""> embedded into the HTML is &quot;presentation layer&quot; code. The &quot;layout.html&quot; file referenced at the top of the</div><div class=""> view is provided by web2py and constitutes the basic layout for all web2py applications. The layout file can</div><div class=""> easily be modified or replaced.</div><div class=""> </div><div class=""> ### Why web2py</div><div class=""> </div><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class="insert">- Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web interface, inc<span class="highlight">l</span>uding an Integrated Development Environment with Debugger and database interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="insert">- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, <span class="highlight">and </span>supports <span class="highlight">SSL</span> and IPv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class=""> </div><div class=""> WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class=""> </div><div class=""> Here is a screenshot of the main web2py **admin** interface:</div><div class=""> </div><div class=""> [[image @///image/en200.png center 480px]]</div><div class=""> </div><div class=""> </div><div class=""> ### Security</div><div class=""> ``security``:inxx</div><div class=""> The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class=""> on improving the security of application software.</div><div class=""> </div><div class=""> OWASP has listed the top ten security issues that put web applications at risk.</div><div class=""> That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class=""> - ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class=""> - ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign ajax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="insert">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, <span class="highlight">Erwin, </span>Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard<span class="highlight">, Roberto</span>, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">This code embeds a fully working wiki with tags, search, tag cloud, permissions, media attachments, a<span class="highlight"></span>d<span class="highlight">n</span> oembed support:</div><div class=""> </div><div class=""> ``</div><div class=""> def index(): return auth.wiki()</div><div class=""> ``</div><div class=""> </div><div class=""> The following code instead:</div><div class=""> ``</div><div class=""> @auth.requires_permission(&#x27;read&#x27;,&#x27;person&#x27;)</div><div class=""> def f(): ....</div><div class=""> ``:code</div><div class=""> </div><div class=""> prevents visitors from accessing the function ``f`` unless the visitor is a member of a group whose members have permissions to &quot;read&quot; records of table &quot;person&quot;. If the visitor is not logged in, he gets directed to a login page (provided by default by web2py).</div><div class=""> </div><div class=""> web2py also supports components, i.e. actions which can be loaded in a view and interact with the visitor via Ajax without re-loading the entire page. This is done via a ``LOAD`` helper which allows very modular design of applications; it is discussed in chapter 3 in the context of the wiki and, in some detail, in the last chapter of this book.</div><div class=""> </div><div class=""> ### Principles</div><div class=""> </div><div class=""> Python programming typically follows these basic principles:</div><div class=""> - Don&#x27;t repeat yourself (DRY).</div><div class=""> - There should be only one way of doing things.</div><div class=""> - Explicit is better than implicit.</div><div class=""> </div><div class=""> web2py fully embraces the first two principles by forcing the developer to use sound software</div><div class=""> engineering practices that discourage repetition of code. web2py guides the developer through almost</div><div class=""> all the tasks common in web application development (creating and processing forms, managing</div><div class=""> sessions, cookies, errors, etc.).</div><div class=""> </div><div class=""> ``request``:inxx</div><div class=""> web2py differs from other frameworks with regard to the third principle, which sometimes conflicts</div><div class=""> with the other two. In particular, web2py does not import user applications, but executes them in a predefined context.  This context exposes the Python keywords, as well as the web2py keywords.</div><div class=""> def contacts():</div><div class=""> </div><div class=""> In web2py, URLs are mapped to Python modules and function calls. In this case, the controller contains</div><div class=""> a single function (or &quot;action&quot;) called ``contacts``. An action may</div><div class=""> return a string (the returned web page) or a Python dictionary (a set of</div><div class=""> ``key:value`` pairs) or the set of local variables (as in this example).</div><div class=""> If the function returns a dictionary, it is passed to a view with the same</div><div class=""> name as the controller/function, which in turn renders the page.</div><div class=""> In this example, the function ``contacts`` generates a select/search/create/update/delete grid for table ``db.contact``</div><div class=""> and returns the grid to the view.</div><div class=""> </div><div class=""> **&quot;default/contacts.html&quot; is the view:**</div><div class=""> </div><div class=""> ``</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> &lt;h1&gt;Manage My Contacts&lt;/h1&gt;</div><div class=""> {{=grid}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> This view is called automatically by web2py after the associated controller function (action) is executed.</div><div class=""> The purpose of this view is to render the variables in the returned dictionary (in our case ``grid``) into HTML.</div><div class=""> The view file is written in HTML, but it embeds Python code delimited by the special ``{{`` and ``}}``</div><div class=""> delimiters. This is quite different from the PHP code example, because the only code</div><div class=""> embedded into the HTML is &quot;presentation layer&quot; code. The &quot;layout.html&quot; file referenced at the top of the</div><div class=""> view is provided by web2py and constitutes the basic layout for all web2py applications. The layout file can</div><div class=""> easily be modified or replaced.</div><div class=""> </div><div class=""> ### Why web2py</div><div class=""> </div><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class="delete">- Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web interface, inc<span class="highlight"></span>uding an Integrated Development Environment with Debugger and database interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="delete">- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, <span class="highlight"></span>supports <span class="highlight">ssl</span> and IPv6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div><div class=""> </div><div class=""> WSGI ``wsgi-w``:cite ``wsgi-o``:cite (Web Server Gateway Interface) is an emerging Python standard for communication between a web server and Python applications).</div><div class=""> </div><div class=""> Here is a screenshot of the main web2py **admin** interface:</div><div class=""> </div><div class=""> [[image @///image/en200.png center 480px]]</div><div class=""> </div><div class=""> </div><div class=""> ### Security</div><div class=""> ``security``:inxx</div><div class=""> The Open Web Application Security Project``owasp``:cite  (OWASP) is a free and open worldwide community focused</div><div class=""> on improving the security of application software.</div><div class=""> </div><div class=""> OWASP has listed the top ten security issues that put web applications at risk.</div><div class=""> That list is reproduced here, along with a description of how each issue is addressed by web2py:</div><div class=""> - ``cross site scripting``:inxx  &quot;Cross Site Scripting (XSS): XSS flaws occur whenever an application takes user supplied data and sends it to a web browser without first validating or encoding that content. XSS allows attackers to execute scripts in the victim&#x27;s browser which can hijack user sessions, deface web sites, possibly introduce worms, etc.&quot; &#x27;&#x27;web2py, by default, escapes all variables rendered in the view, preventing XSS.&#x27;&#x27;</div><div class=""> - ``injection flaws``:inxx &quot;Injection Flaws: Injection flaws, particularly SQL injection, are common in web applications. Injection occurs when user-supplied data is sent to an interpreter as part of a command or query. The attacker&#x27;s hostile data tricks the interpreter into executing unintended commands or changing data.&quot; &#x27;&#x27;web2py includes a Database Abstraction Layer that makes SQL injection impossible. Normally, SQL statements are not written by the developer.  Instead, SQL is generated dynamically by the DAL, ensuring that all inserted data is properly escaped.&#x27;&#x27;</div><div class=""> - ``malicious file execution``:inxx &quot;Malicious File Execution: Code vulnerable to remote file inclusion (RFI) allows attackers to include hostile code and data, resulting in devastating attacks, such as total server compromise.&quot; &#x27;&#x27;web2py allows only exposed functions to be executed, preventing malicious file execution. Imported functions are never exposed; only actions are exposed. web2py uses a Web-based administration interface which makes it very easy to keep track of what is exposed and what is not.&#x27;&#x27;</div><div class=""> - ``insecure object reference``:inxx &quot;Insecure Direct Object Reference: A direct object reference occurs when a developer exposes a reference to an internal implementation object, such as a file, directory, database record, or key, as a URL or form parameter. Attackers can manipulate those references to access other objects without authorization.&quot; &#x27;&#x27;web2py does not expose any internal objects; moreover, web2py validates all URLs, thus preventing directory traversal attacks. web2py also provides a simple mechanism to create forms that automatically validate all input values.&#x27;&#x27;</div><div class=""> - ``CSRF``:inxx &quot;Cross Site Request Forgery (CSRF): A CSRF attack forces a logged-on victim&#x27;s browser to send a pre-authenticated request to a vulnerable web application, which then forces the victim&#x27;s browser to perform a hostile action to the benefit of the attacker. CSRF can be as powerful as the web application that it attacks.&quot; &#x27;&#x27;web2py prevents CSRF as well as accidental double submission of forms by assigning a one-time random token to each form. Moreover web2py uses UUID for session cookie.&#x27;&#x27;</div><div class=""> - ``information leakage``:inxx ``improper error handling``:inxx &quot;Information Leakage and Improper Error Handling: Applications can unintentionally leak information about their configuration, internal workings, or violate privacy through a variety of application problems. Attackers use this weakness to steal sensitive data, or conduct more serious attacks.&quot; &#x27;&#x27;web2py includes a ticketing system. No error can result in code being exposed to the users. All errors are logged and a ticket is issued to the user that allows error tracking. But errors and source code are accessible only to the administrator.&#x27;&#x27;</div><div class=""> - &quot;Broken Authentication and Session Management: Account credentials and session tokens are often not properly protected. Attackers compromise passwords, keys, or authentication tokens to assume other users&#x27; identities.&quot; &#x27;&#x27;web2py provides a built-in mechanism for administrator authentication, and it manages sessions independently for each application. The administrative interface also forces the use of secure session cookies when the client is not &quot;localhost&quot;. For applications, it includes a powerful Role Based Access Control API.&#x27;&#x27;</div><div class=""> - ``cryptographic store``:inxx &quot;Insecure Cryptographic Storage: Web applications rarely use cryptographic functions properly to protect data and credentials. Attackers use weakly protected data to conduct identity theft and other crimes, such as credit card fraud.&quot; &#x27;&#x27;web2py uses the MD5 or the HMAC+SHA-512 hash algorithms to protect stored passwords. Other algorithms are also available.&#x27;&#x27;</div><div class=""> - ``secure communications``:inxx &quot;Insecure Communications: Applications frequently fail to encrypt network traffic when it is necessary to protect sensitive communications.&quot; &#x27;&#x27;web2py includes the SSL-enabled``ssl``:cite  Rocket WSGI server, but it can also use Apache or Lighttpd and mod_ssl to provide SSL encryption of communications.&#x27;&#x27;</div><div class=""> - ``access restriction``:inxx &quot;Failure to Restrict URL Access: Frequently an application only protects sensitive functionality by preventing the display of links or URLs to unauthorized users. Attackers can use this weakness to access and perform unauthorized operations by accessing those URLs directly.&quot; &#x27;&#x27;web2py maps URL requests to Python modules and functions. web2py provides a mechanism for declaring which functions are public and which require authentication and authorization. The included Role Based Access Control API allow developers to restrict access to any function based on login, group membership or group based permissions. The permissions are very granular and can be combined with database filters to allow, for example, to give access to specific tables and/or records. web2py also allows digitally signed URL and provides API to digitally sign ajax callbacks.&#x27;&#x27;</div><div class=""> </div><div class=""> web2py was reviewed for security and you can find the result of the review in ref.``pythonsecurity``:cite.</div><div class=""> </div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="delete">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, <span class="highlight"></span>Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard<span class="highlight"></span>, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/e234f6edf67361b3ba718ea10184ba8e7c2f773d">e234f6e</a><ul><li>Date : 2012-12-20</li><li>lots of improvements</li></ul></li></ul>
<div class="row-fluid" id="com_e234f6edf67361b3ba718ea10184ba8e7c2f773d">
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class=""> - Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="insert">- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed <span class="highlight">b</span>y Timothy Farrell. It is as fast as Apache with mod_wsgi<span class="highlight">,</span> <span class="highlight">s</span>u<span class="highlight">ppo</span>r<span class="highlight"></span>ts <span class="highlight">ss</span>l<span class="highlight"></span> an<span class="highlight">d</span> i<span class="highlight">p</span>v<span class="highlight">6</span>.<span class="highlight"></span></div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class=""> - Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="delete">- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed <span class="highlight">B</span>y Timothy Farrell. It is as fast as Apache with mod_wsgi<span class="highlight">.</span> <span class="highlight">O</span>u<span class="highlight"></span>r<span class="highlight"> tes</span>ts <span class="highlight">a</span>l<span class="highlight">so indicate that, on</span> an<span class="highlight"> average PC,</span> i<span class="highlight">t ser</span>v<span class="highlight">es an average dynamic page without database access in about 10ms</span>.<span class="highlight"> The DAL has very low overhead, typically less than 3%.</span></div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/2aa7b14c4f84ebf42f5c3e2d498705868f2568fe">2aa7b14</a><ul><li>Date : 2012-12-25</li><li>fixed style</li></ul></li></ul>
<div class="row-fluid" id="com_2aa7b14c4f84ebf42f5c3e2d498705868f2568fe">
    <div class="span6"><div class="diff"><div class="insert"><span class="highlight">**</span>&quot;db.py&quot; is the model:<span class="highlight">**</span></div><div class=""> </div><div class=""> ``</div><div class=""> db = DAL(&#x27;sqlite://storage.sqlite&#x27;)</div><div class=""> db.define_table(&#x27;contact&#x27;,</div><div class="">    Field(&#x27;name&#x27;),</div><div class="">    Field(&#x27;phone&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> It connects to the database (in this example a SQLite database stored in the ``storage.sqlite`` file) and</div><div class=""> defines a table called ``contact``. If the table does not exist, web2py creates it and, transparently</div><div class=""> and in the background,</div><div class=""> generates SQL code in the appropriate SQL dialect for the specific database engine used.</div><div class=""> The developer can</div><div class=""> see the generated SQL but does not need to change the code if the database back-end, which defaults to</div><div class=""> SQLite, is replaced with MySQL, PostgreSQL, MSSQL, FireBird, Oracle, DB2, Informix, Interbase, Ingres, and the Google App Engine (both SQL and NoSQL).</div><div class=""> </div><div class=""> Once a table is defined and created, web2py also generates a fully functional web-based database</div><div class=""> administration interface, called **appadmin**, to access the database and the tables.</div><div class=""> </div><div class="insert"><span class="highlight">**</span>&quot;default.py&quot; is the controller:<span class="highlight">**</span></div><div class=""> </div><div class=""> ``</div><div class=""> def contacts():</div><div class="">     grid=SQLFORM.grid(db.contact, user_signature=False)</div><div class="">     return locals()</div><div class=""> ``:code</div><div class=""> </div><div class=""> In web2py, URLs are mapped to Python modules and function calls. In this case, the controller contains</div><div class=""> a single function (or &quot;action&quot;) called ``contacts``. An action may</div><div class=""> return a string (the returned web page) or a Python dictionary (a set of</div><div class=""> ``key:value`` pairs) or the set of local variables (as in this example).</div><div class=""> If the function returns a dictionary, it is passed to a view with the same</div><div class=""> name as the controller/function, which in turn renders the page.</div><div class=""> In this example, the function ``contacts`` generates a select/search/create/update/delete grid for table ``db.contact``</div><div class=""> and returns the grid to the view.</div><div class=""> </div><div class="insert"><span class="highlight">**</span>&quot;default/contacts.html&quot; is the view:<span class="highlight">**</span></div></div></div>
    <div class="span6"><div class="diff"><div class="delete"><span class="highlight"></span>&quot;db.py&quot; is the model:<span class="highlight"></span></div><div class=""> </div><div class=""> ``</div><div class=""> db = DAL(&#x27;sqlite://storage.sqlite&#x27;)</div><div class=""> db.define_table(&#x27;contact&#x27;,</div><div class="">    Field(&#x27;name&#x27;),</div><div class="">    Field(&#x27;phone&#x27;))</div><div class=""> ``:code</div><div class=""> </div><div class=""> It connects to the database (in this example a SQLite database stored in the ``storage.sqlite`` file) and</div><div class=""> defines a table called ``contact``. If the table does not exist, web2py creates it and, transparently</div><div class=""> and in the background,</div><div class=""> generates SQL code in the appropriate SQL dialect for the specific database engine used.</div><div class=""> The developer can</div><div class=""> see the generated SQL but does not need to change the code if the database back-end, which defaults to</div><div class=""> SQLite, is replaced with MySQL, PostgreSQL, MSSQL, FireBird, Oracle, DB2, Informix, Interbase, Ingres, and the Google App Engine (both SQL and NoSQL).</div><div class=""> </div><div class=""> Once a table is defined and created, web2py also generates a fully functional web-based database</div><div class=""> administration interface, called **appadmin**, to access the database and the tables.</div><div class=""> </div><div class="delete"><span class="highlight"></span>&quot;default.py&quot; is the controller:<span class="highlight"></span></div><div class=""> </div><div class=""> ``</div><div class=""> def contacts():</div><div class="">     grid=SQLFORM.grid(db.contact, user_signature=False)</div><div class="">     return locals()</div><div class=""> ``:code</div><div class=""> </div><div class=""> In web2py, URLs are mapped to Python modules and function calls. In this case, the controller contains</div><div class=""> a single function (or &quot;action&quot;) called ``contacts``. An action may</div><div class=""> return a string (the returned web page) or a Python dictionary (a set of</div><div class=""> ``key:value`` pairs) or the set of local variables (as in this example).</div><div class=""> If the function returns a dictionary, it is passed to a view with the same</div><div class=""> name as the controller/function, which in turn renders the page.</div><div class=""> In this example, the function ``contacts`` generates a select/search/create/update/delete grid for table ``db.contact``</div><div class=""> and returns the grid to the view.</div><div class=""> </div><div class="delete"><span class="highlight"></span>&quot;default/contacts.html&quot; is the view:<span class="highlight"></span></div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/83521b165c2d34b0f5904766b5cf9d6f9cf3660a">83521b1</a><ul><li>Date : 2013-02-04</li><li>added pythonanywhere screenshots</li></ul></li></ul>
<div class="row-fluid" id="com_83521b165c2d34b0f5904766b5cf9d6f9cf3660a">
    <div class="span6"><div class="diff"><div class="insert">+Danny Morgan,</div><div class=""> Daniel Gonz,</div><div class=""> Daniel Haag,</div><div class=""> Daniel Lin,</div><div class=""> Dave Stoll,</div><div class=""> David Adley,</div><div class=""> David Harrison,</div><div class=""> David Lin,</div><div class=""> David Marko,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div><div class=""> Diaz Luis,</div><div class=""> Dirk Krause,</div><div class=""> Dominic Koenig,</div><div class=""> Doug Warren,</div><div class=""> Douglas Philips,</div><div class=""> Douglas Soares de Andrade,</div><div class=""> Douglas and Alan,</div><div class=""> Dustin Bensing,</div><div class=""> Elcio Ferreira,</div><div class=""> Eric Vicenti,</div><div class=""> Erwin Olario,</div><div class=""> Falko Krause,</div><div class=""> Farsheed Ashouri,</div><div class=""> Felipe Meirelles,</div><div class=""> Flavien Scheurer,</div><div class=""> Fran Boon,</div><div class=""> Francisco Gama,</div><div class=""> Fred Yanowski,</div><div class=""> Friedrich Weber,</div><div class=""> Gabriele Alberti,</div><div class=""> Ron McOuat,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class=""> Running Calm,</div><div class=""> Ryan Seto,</div><div class=""> Salomon Derossi,</div><div class=""> Sam Sheftel,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Tim Richardson,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class="insert">+Wen Gong,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="insert">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, <span class="highlight">Denny, </span>Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus<span class="highlight">, Wen</span> (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Daniel Gonz,</div><div class=""> Daniel Haag,</div><div class=""> Daniel Lin,</div><div class=""> Dave Stoll,</div><div class=""> David Adley,</div><div class=""> David Harrison,</div><div class=""> David Lin,</div><div class=""> David Marko,</div><div class=""> David Wagner,</div><div class=""> Denes Lengyel,</div><div class=""> Diaz Luis,</div><div class=""> Dirk Krause,</div><div class=""> Dominic Koenig,</div><div class=""> Doug Warren,</div><div class=""> Douglas Philips,</div><div class=""> Douglas Soares de Andrade,</div><div class=""> Douglas and Alan,</div><div class=""> Dustin Bensing,</div><div class=""> Elcio Ferreira,</div><div class=""> Eric Vicenti,</div><div class=""> Erwin Olario,</div><div class=""> Falko Krause,</div><div class=""> Farsheed Ashouri,</div><div class=""> Felipe Meirelles,</div><div class=""> Flavien Scheurer,</div><div class=""> Fran Boon,</div><div class=""> Francisco Gama,</div><div class=""> Fred Yanowski,</div><div class=""> Friedrich Weber,</div><div class=""> Gabriele Alberti,</div><div class=""> Ron McOuat,</div><div class=""> Ross Peoples,</div><div class=""> Ruijun Luo,</div><div class=""> Running Calm,</div><div class=""> Ryan Seto,</div><div class=""> Salomon Derossi,</div><div class=""> Sam Sheftel,</div><div class=""> Scott Roberts,</div><div class=""> Sergey Podlesnyi,</div><div class=""> Sharriff Aina,</div><div class=""> Simone Bizzotto,</div><div class=""> Sriram Durbha,</div><div class=""> Sterling Hankins,</div><div class=""> Stuart Rackham,</div><div class=""> Telman Yusupov,</div><div class=""> Thadeus Burgess,</div><div class=""> Thomas Dallagnese,</div><div class=""> Tim Farrell,</div><div class=""> Tim Michelsen,</div><div class=""> Tim Richardson,</div><div class=""> Timothy Farrell,</div><div class=""> Tito Garrido,</div><div class=""> Tyrone Hattingh,</div><div class=""> Vasile Ermicioi,</div><div class=""> Vidul Nikolaev Petrov,</div><div class=""> Vidul Petrov,</div><div class=""> Vinicius Assef,</div><div class=""> Vladimir Donnikov,</div><div class=""> Vladyslav Kozlovsky,</div><div class=""> Vladyslav Kozlovskyy,</div><div class=""> Wang Huaiyu,</div><div class=""> Wes James,</div><div class=""> Will Stevens,</div><div class=""> Yair Eshel,</div><div class=""> Yarko Tymciurak,</div><div class=""> Yoshiyuki Nakamura,</div><div class=""> Younghyun Jo,</div><div class=""> Zahariash.</div><div class=""> </div><div class=""> I am sure I forgot somebody, so I apologize.</div><div class=""> </div><div class="delete">I particularly thank Anthony, Jonathan, Mariano, Bruno, Vladyslav, Martin, Nathan, Simone, Thadeus, Tim, Iceberg, Denes, Hans, Christian, Fran and Patrick for their major contributions to web2py and Anthony, Alvaro, Bruno, Denes, <span class="highlight"></span>Erwin, Felipe, Graham, Jonathan, Hans, Kyle, Mark, Michele, Richard, Roberto, Robin, Roman, Scott, Shane, Sharriff, Sriram, Sterling, Stuart, Thadeus<span class="highlight"></span> (and others) for proofreading various versions of this book. Their contribution was invaluable. If you find any errors in this book, they are exclusively my fault, probably introduced by a last-minute edit. I also thank Ryan Steffen of Wiley Custom Learning Solutions for help with publishing the first edition of this book.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/76c0363755694c36971ffc9db176312fe5c14276">76c0363</a><ul><li>Date : 2012-12-22</li><li>more and more additions and corrections</li></ul></li></ul>
<div class="row-fluid" id="com_76c0363755694c36971ffc9db176312fe5c14276">
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class=""> - Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="insert">- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and <span class="highlight">IP</span>v6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> web2py is one of many web application frameworks, but it has compelling and unique features.</div><div class=""> web2py was originally developed as a teaching tool, with the following primary motivations:</div><div class=""> - Easy for users to learn server-side web development without compromising functionality. For this reason, web2py requires no installation and no configuration, has no dependencies (except for the source code distribution, which requires Python 2.5 and its standard library modules), and exposes most of its functionality via a Web browser interface.</div><div class=""> - web2py has been stable from day one because it follows a top-down design; i.e., its API was designed before it was implemented. Even as new functionality has been added, web2py has never broken backwards compatibility, and it will not break compatibility when additional functionality is added in the future.</div><div class=""> - web2py proactively addresses the most important security issues which plague many modern web applications, as determined by OWASP``owasp``:cite  below.</div><div class=""> - web2py is lightweight. Its core libraries, including the Database Abstraction Layer, the template language, and all the helpers amount to 1.4MB. The entire source code including sample applications and images amounts to 10.4MB.</div><div class="delete">- web2py has a small footprint and is very fast. It uses the Rocket``rocket``:cite  WSGI web server developed by Timothy Farrell. It is as fast as Apache with mod_wsgi, supports ssl and <span class="highlight">ip</span>v6.</div><div class=""> - web2py uses Python syntax for models, controllers, and views, but does not import models and controllers (as all the other Python frameworks do) - instead it executes them. This means that apps can be installed, uninstalled, and modified without having to restart the web server (even in production), and different apps can coexist without their modules interfering with one another.</div><div class=""> - web2py uses a Database Abstraction Layer (DAL) instead of an Object Relational Mapper (ORM). From a conceptual point of view, this means that different database tables are mapped into different instances of one ``Table`` class and not into different classes, while records are mapped into instances of one ``Row`` class, not into instances of the corresponding table class. From a practical point of view, it means that SQL syntax maps almost one-to-one into DAL syntax, and there is no complex metaclass programming going on under the hood as in popular ORMs, which would add latency.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/2036cd246d994aba206bc072eeb7985ff36e808c">2036cd2</a><ul><li>Date : 2012-09-17</li><li>typo</li></ul></li></ul>
<div class="row-fluid" id="com_2036cd246d994aba206bc072eeb7985ff36e808c">
    <div class="span6"><div class="diff"><div class="insert">web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql<span class="highlight">-</span>w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class=""> SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class=""> FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, and</div><div class=""> Ingres``ingresdb``:cite.</div><div class=""> The DAL can also generate function calls for the Google Datastore</div><div class=""> when running on the Google App Engine (GAE)``gae``:cite.</div><div class=""> Experimentally we support more databases. Please check on the	web2py web site	and mailing list for more recent adapters.</div><div class=""> Once one or more database tables are defined, web2py also generates a fully functional web-based database</div><div class=""> administration interface to access the database and the tables.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">web2py includes a Database Abstraction Layer (DAL) that writes SQL``sql<span class="highlight">:</span>w``:cite  dynamically so that you, the developer, don&#x27;t have to. The DAL knows how to generate SQL transparently for</div><div class=""> SQLite``sqlite``:cite, MySQL``mysql``:cite, PostgreSQL``postgres``:cite, MSSQL``mssql``:cite,</div><div class=""> FireBird``firebird``:cite, Oracle``oracle``:cite, IBM DB2``db2``:cite, Informix``informix``:cite, and</div><div class=""> Ingres``ingresdb``:cite.</div><div class=""> The DAL can also generate function calls for the Google Datastore</div><div class=""> when running on the Google App Engine (GAE)``gae``:cite.</div><div class=""> Experimentally we support more databases. Please check on the	web2py web site	and mailing list for more recent adapters.</div><div class=""> Once one or more database tables are defined, web2py also generates a fully functional web-based database</div><div class=""> administration interface to access the database and the tables.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/a5a674979a2383b6d39345cb858e119c6435fb71">a5a6749</a><ul><li>Date : 2013-03-03</li><li>final book 5th edition</li></ul></li></ul>
<div class="row-fluid" id="com_a5a674979a2383b6d39345cb858e119c6435fb71">
    <div class="span6"><div class="diff"><div class="insert">+This 5th edition of the book describes ``web2py`` 2.4.1 and later versions.</div><div class="insert">+</div><div class=""> ### Principles</div></div></div>
    <div class="span6"><div class="diff"><div class=""> ### Principles</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/0e40a4db49511e5ef707d53bdd9728433b9c5694">0e40a4d</a><ul><li>Date : 2012-09-06</li><li>added Ben to acknowledgments</li></ul></li></ul>
<div class="row-fluid" id="com_0e40a4db49511e5ef707d53bdd9728433b9c5694">
    <div class="span6"><div class="diff"><div class=""> Alexey Nezhdanov,</div><div class=""> Alvaro Justen,</div><div class=""> Andrew Willimott,</div><div class=""> Angelo Compagnucci,</div><div class=""> Anthony Bastardi,</div><div class=""> Antonio Ramos,</div><div class=""> Arun K. Rajeevan,</div><div class=""> Attila Csipa,</div><div class="insert">+Ben Reinhart,</div></div></div>
    <div class="span6"><div class="diff"><div class=""> Alexey Nezhdanov,</div><div class=""> Alvaro Justen,</div><div class=""> Andrew Willimott,</div><div class=""> Angelo Compagnucci,</div><div class=""> Anthony Bastardi,</div><div class=""> Antonio Ramos,</div><div class=""> Arun K. Rajeevan,</div><div class=""> Attila Csipa,</div></div></div>
</div>
<hr />


        
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container-fluid">
          <div class="copyright pull-left">Copyright &#169; 2013</div>
          <div id="poweredBy" class="pull-right">
              Powered by
              <a href="http://www.web2py.com/">web2py</a>
          </div>
      </div>
    </div>
<script src="static/js/bootstrap.min.js"></script>
<script src="static/js/web2py_bootstrap.js"></script>
</body>
</html>
