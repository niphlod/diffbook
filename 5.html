<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]><html class="ie ie6 ie-lte9 ie-lte8 ie-lte7 no-js" lang="en-us"> <![endif]-->
<!--[if IE 7]><html class="ie ie7 ie-lte9 ie-lte8 ie-lte7 no-js" lang="en-us"> <![endif]-->
<!--[if IE 8]><html class="ie ie8 ie-lte9 ie-lte8 no-js" lang="en-us"> <![endif]-->
<!--[if IE 9]><html class="ie9 ie-lte9 no-js" lang="en-us"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="en-us"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <!-- www.phpied.com/conditional-comments-block-downloads/ -->
  <!-- Always force latest IE rendering engine
       (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <!--[if IE]>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <![endif]-->

  <title>Diffbook</title>

  <!-- http://dev.w3.org/html5/markup/meta.name.html -->
  <meta name="application-name" content="diffbook" />

  <!-- Speaking of Google, don't forget to set your site up:
       http://google.com/webmasters -->
  <meta name="google-site-verification" content="" />

  <!--  Mobile Viewport Fix
        j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag
        device-width: Occupy full width of the screen in its current orientation
        initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
        user-scalable = yes allows the user to zoom in -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="shortcut icon" href="static/images/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="static/images/favicon.png">

  <!-- All JavaScript at the bottom, except for Modernizr which enables
       HTML5 elements & feature detects -->
  <script src="static/js/modernizr.custom.js"></script>

  <!-- include stylesheets -->
  

  <script type="text/javascript"><!--
    // These variables are used by the web2py_ajax_init function in web2py_ajax.js (which is loaded below).
    var w2p_ajax_confirm_message = "Are you sure you want to delete this object?";
    var w2p_ajax_date_format = "%Y-%m-%d";
    var w2p_ajax_datetime_format = "%Y-%m-%d %H:%M:%S";
    //--></script>
<meta name="keywords" content="web2py, python, framework" />

<meta name="description" content="a cool new app" />

<meta name="generator" content="Web2py Web Framework" />

<meta name="author" content="Your Name &lt;you@example.com&gt;" />
<script src="static/js/jquery.js" type="text/javascript"></script><link href="static/css/calendar.css" rel="stylesheet" type="text/css" /><script src="static/js/calendar.js" type="text/javascript"></script><script src="static/js/web2py.js" type="text/javascript"></script><link href="static/css/web2py.css" rel="stylesheet" type="text/css" /><link href="static/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="static/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" /><link href="static/css/web2py_bootstrap.css" rel="stylesheet" type="text/css" />


  

  <!-- uncomment here to load jquery-ui
       <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all" />
       <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
       uncomment to load jquery-ui //-->
  <noscript><link href="static/css/web2py_bootstrap_nojs.css" rel="stylesheet" type="text/css" /></noscript>
  
  <style type="text/css">

      /* Sticky footer styles
      -------------------------------------------------- */

      html,
      body {
        height: 100%;
        /* The html and body elements cannot have any padding or margin. */
      }

      /* Wrapper for page content to push down footer */
      #wrap {
        min-height: 100%;
        height: auto !important;
        height: 100%;
        /* Negative indent footer by it's height */
        margin: 0 auto -60px;
      }

      /* Set the fixed height of the footer here */
      #push,
      #footer {
        height: 60px;
      }
      #footer {
        background-color: #f5f5f5;
      }

      /* Lastly, apply responsive CSS fixes as necessary */
      @media (max-width: 767px) {
        #footer {
          margin-left: -20px;
          margin-right: -20px;
          padding-left: 20px;
          padding-right: 20px;
        }
      }



      /* Custom page CSS
      -------------------------------------------------- */
      /* Not required for template or sticky footer method. */

      .container {
        width: auto;
        max-width: 680px;
      }
      .container .credit {
        margin: 20px 0;
      }

    </style>
</head>

<body>
  
  <body>


    <!-- Part 1: Wrap all page content here -->
    <div id="wrap">

      <!-- Begin page content -->
      <div class="container-fluid">
        <div class="page-header">
          	<h1>
              Diffbook
              <small>easy? diffbook</small>
            </h1>
        </div>
        
        


<div class="pagination">
  <ul>

      <li><a href="/diffbook/0.html">Chapter 0</a></li>

      <li><a href="/diffbook/1.html">Chapter 1</a></li>

      <li><a href="/diffbook/2.html">Chapter 2</a></li>

      <li><a href="/diffbook/3.html">Chapter 3</a></li>

      <li><a href="/diffbook/4.html">Chapter 4</a></li>

      <li><a href="/diffbook/5.html">Chapter 5</a></li>

      <li><a href="/diffbook/6.html">Chapter 6</a></li>

      <li><a href="/diffbook/7.html">Chapter 7</a></li>

      <li><a href="/diffbook/8.html">Chapter 8</a></li>

      <li><a href="/diffbook/9.html">Chapter 9</a></li>

      <li><a href="/diffbook/10.html">Chapter 10</a></li>

      <li><a href="/diffbook/11.html">Chapter 11</a></li>

      <li><a href="/diffbook/12.html">Chapter 12</a></li>

  </ul>
</div>

<div class="pagination">
  <ul>

      <li><a href="#com_49f38ab7ef56de1eb4ef48f68427ebf8a46b505d">49f38ab</a></li>

      <li><a href="#com_f2fd41dd2a0d4bf68f5cd4f0989fb32bdc35eac5">f2fd41d</a></li>

      <li><a href="#com_7a03a4c6ff63bf3919d846d23d0335091b23def6">7a03a4c</a></li>

      <li><a href="#com_82dc64e7baa231edd3896ca7a0d41393e426f123">82dc64e</a></li>

      <li><a href="#com_e234f6edf67361b3ba718ea10184ba8e7c2f773d">e234f6e</a></li>

      <li><a href="#com_097d699dc16179206ccb7e4aee863d6523cd471c">097d699</a></li>

      <li><a href="#com_d70086e374f3d93371823e3a509dd0167961b34c">d70086e</a></li>

      <li><a href="#com_76c0363755694c36971ffc9db176312fe5c14276">76c0363</a></li>

      <li><a href="#com_e9cfe4c59d781f0c6856c48992ec384892311fde">e9cfe4c</a></li>

      <li><a href="#com_28816a98948c4a6577f73bdeb2b7424dc55d2582">28816a9</a></li>

      <li><a href="#com_ac4003f4349f9ee22c67309ceeb48de5539b0308">ac4003f</a></li>

      <li><a href="#com_9f8f7358720ecddc06a79b90a68cc94ae5b28603">9f8f735</a></li>

      <li><a href="#com_31b67861f63a89ddbca5db525b9ea745b956670e">31b6786</a></li>

  </ul>
</div>



<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/49f38ab7ef56de1eb4ef48f68427ebf8a46b505d">49f38ab</a><ul><li>Date : 2012-12-26</li><li>more small edits</li></ul></li></ul>
<div class="row-fluid" id="com_49f38ab7ef56de1eb4ef48f68427ebf8a46b505d">
    <div class="span6"><div class="diff"><div class="insert">##### ``CAT``<span class="highlight"></span></div><div class=""> ``CAT``:inxx</div><div class=""> </div><div class=""> This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class=""> Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CENTER``</div><div class=""> ``CENTER``:inxx</div><div class=""> </div><div class=""> This helper centers its content.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class=""> &gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CODE``</div><div class=""> ``CODE``:inxx</div><div class=""> </div><div class=""> This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class=""> </div><div class=""> Here is an example of highlighting sections of Python code.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CODE(&#x27;print &quot;hello&quot;&#x27;, language=&#x27;python&#x27;).xml()</div><div class=""> &lt;table&gt;&lt;tr valign=&quot;top&quot;&gt;&lt;td style=&quot;width:40px; text-align: right;&quot;&gt;&lt;pre style=&quot;</div><div class="">         font-size: 11px;</div><div class="">         font-family: Bitstream Vera Sans Mono,monospace;</div><div class="">         background-color: transparent;</div><div class=""> It makes a list item and should be contained in a ``UL`` or ``OL`` tag.</div><div class=""> &gt;&gt;&gt; print LI(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;li id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``META``</div><div class=""> </div><div class=""> To be used for building ``META`` tags in the ``HTML`` head. For example:</div><div class=""> </div><div class=""> ``META``:inxx</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print META(_name=&#x27;security&#x27;, _content=&#x27;high&#x27;)</div><div class=""> &lt;meta name=&quot;security&quot; content=&quot;high&quot; /&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``MARKMIN``</div><div class=""> </div><div class=""> Implements the markmin wiki syntax. It converts the input text into output html according to the markmin rules described in the example below:</div><div class=""> </div><div class=""> ``MARKMIN``:inxx</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MARKMIN(&quot;this is **bold** or &#x27;&#x27;italic&#x27;&#x27; and this [[a link http://web2py.com]]&quot;)</div><div class=""> &lt;p&gt;this is &lt;b&gt;bold&lt;/b&gt; or &lt;i&gt;italic&lt;/i&gt; and</div><div class=""> this &lt;a href=&quot;http://web2py.com&quot;&gt;a link&lt;/a&gt;&lt;/p&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> The markmin syntax is described in this file that ships with web2py:</div><div class=""> ``</div><div class=""> http://127.0.0.1:8000/examples/static/markmin.html</div><div class=""> ``:code</div><div class=""> </div><div class=""> You can use markmin to generate HTML, LaTeX and PDF documents:</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">##### ``CAT``<span class="highlight"> (1.98.1 and up)</span></div><div class=""> ``CAT``:inxx</div><div class=""> </div><div class=""> This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class=""> Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CENTER``</div><div class=""> ``CENTER``:inxx</div><div class=""> </div><div class=""> This helper centers its content.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class=""> &gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CODE``</div><div class=""> ``CODE``:inxx</div><div class=""> </div><div class=""> This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class=""> </div><div class=""> Here is an example of highlighting sections of Python code.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CODE(&#x27;print &quot;hello&quot;&#x27;, language=&#x27;python&#x27;).xml()</div><div class=""> &lt;table&gt;&lt;tr valign=&quot;top&quot;&gt;&lt;td style=&quot;width:40px; text-align: right;&quot;&gt;&lt;pre style=&quot;</div><div class="">         font-size: 11px;</div><div class="">         font-family: Bitstream Vera Sans Mono,monospace;</div><div class="">         background-color: transparent;</div><div class=""> It makes a list item and should be contained in a ``UL`` or ``OL`` tag.</div><div class=""> &gt;&gt;&gt; print LI(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;li id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``META``</div><div class=""> </div><div class=""> To be used for building ``META`` tags in the ``HTML`` head. For example:</div><div class=""> </div><div class=""> ``META``:inxx</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print META(_name=&#x27;security&#x27;, _content=&#x27;high&#x27;)</div><div class=""> &lt;meta name=&quot;security&quot; content=&quot;high&quot; /&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``MARKMIN``</div><div class=""> </div><div class=""> Implements the markmin wiki syntax. It converts the input text into output html according to the markmin rules described in the example below:</div><div class=""> </div><div class=""> ``MARKMIN``:inxx</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MARKMIN(&quot;this is **bold** or &#x27;&#x27;italic&#x27;&#x27; and this [[a link http://web2py.com]]&quot;)</div><div class=""> &lt;p&gt;this is &lt;b&gt;bold&lt;/b&gt; or &lt;i&gt;italic&lt;/i&gt; and</div><div class=""> this &lt;a href=&quot;http://web2py.com&quot;&gt;a link&lt;/a&gt;&lt;/p&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> The markmin syntax is described in this file that ships with web2py:</div><div class=""> ``</div><div class=""> http://127.0.0.1:8000/examples/static/markmin.html</div><div class=""> ``:code</div><div class=""> </div><div class="delete">-and some examples are shown in chapter 12 in the context of plugin_wiki, which uses MARKMIN extensively.</div><div class="delete">-</div><div class=""> You can use markmin to generate HTML, LaTeX and PDF documents:</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/f2fd41dd2a0d4bf68f5cd4f0989fb32bdc35eac5">f2fd41d</a><ul><li>Date : 2012-12-31</li><li>spell check of diffs, thanks Joanthan</li></ul></li></ul>
<div class="row-fluid" id="com_f2fd41dd2a0d4bf68f5cd4f0989fb32bdc35eac5">
    <div class="span6"><div class="diff"><div class="insert">Notice that h<span class="highlight">e</span>lpers can be repeated using the multiplication operator:</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print BR()*5</div><div class=""> &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CAT``</div><div class=""> ``CAT``:inxx</div><div class=""> </div><div class=""> This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class=""> Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CENTER``</div><div class=""> ``CENTER``:inxx</div><div class=""> </div><div class=""> This helper centers its content.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class=""> &gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CODE``</div><div class=""> ``CODE``:inxx</div><div class=""> </div><div class=""> This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class=""> </div><div class=""> The &quot;views/layout.html&quot; that ships with the web2py scaffolding application **wel</div><div class="">             &lt;div class=&quot;footer-content&quot;&gt;</div><div class="">                 {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="">                 ...</div><div class="">                 {{end}}</div><div class="">             &lt;/div&gt;</div><div class="">         &lt;/footer&gt;</div><div class="">     &lt;/div&gt;</div><div class=""> </div><div class="">   &lt;/div&gt; &lt;!-- /container --&gt;</div><div class=""> </div><div class="">   &lt;!-- The javascript =============================================</div><div class="">        (Placed at the end of the document so the pages load faster) --&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/bootstrap.min.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/web2py_bootstrap.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   {{if response.google_analytics_id:}}</div><div class="">     &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/analytics.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">     &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="">     analytics.initialize({</div><div class="">       &#x27;Google Analytics&#x27;:{trackingId:&#x27;{{=response.google_analytics_id}}&#x27;}</div><div class="">     });&lt;/script&gt;</div><div class="">   {{pass}}</div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class="insert">- It uses a modified version of Twitter Boo<span class="highlight">t</span>strap for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class=""> - It uses &quot;analytics.js&quot; to connect to Google Analytics.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> In views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is easy because the welcome application is based on Twitter Bootstrap which is well documented and supports themes. In web2py four static files which are relevant to style:</div><div class=""> </div><div class=""> - &quot;css/web2py.css&quot; contains web2py specific styles</div><div class="insert">- &quot;css/bootstrap.min.css&quot; contains the Twitter Boo<span class="highlight">t</span>strap CSS style ``bootstrap``:cite ``Bootstrap``:inxx</div><div class=""> - &quot;css/web2py_bootstrap.css&quot; contains with overrides some Bootstrap styles to conform to web2py needs.</div><div class=""> - &quot;js/bootstrap.min.js&quot; which includes the libraries for menu effects, modals, panels.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">Notice that h<span class="highlight">a</span>lpers can be repeated using the multiplication operator:</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print BR()*5</div><div class=""> &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CAT``</div><div class=""> ``CAT``:inxx</div><div class=""> </div><div class=""> This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class=""> Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CENTER``</div><div class=""> ``CENTER``:inxx</div><div class=""> </div><div class=""> This helper centers its content.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class=""> &gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CODE``</div><div class=""> ``CODE``:inxx</div><div class=""> </div><div class=""> This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class=""> </div><div class=""> The &quot;views/layout.html&quot; that ships with the web2py scaffolding application **wel</div><div class="">             &lt;div class=&quot;footer-content&quot;&gt;</div><div class="">                 {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="">                 ...</div><div class="">                 {{end}}</div><div class="">             &lt;/div&gt;</div><div class="">         &lt;/footer&gt;</div><div class="">     &lt;/div&gt;</div><div class=""> </div><div class="">   &lt;/div&gt; &lt;!-- /container --&gt;</div><div class=""> </div><div class="">   &lt;!-- The javascript =============================================</div><div class="">        (Placed at the end of the document so the pages load faster) --&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/bootstrap.min.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/web2py_bootstrap.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   {{if response.google_analytics_id:}}</div><div class="">     &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/analytics.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">     &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="">     analytics.initialize({</div><div class="">       &#x27;Google Analytics&#x27;:{trackingId:&#x27;{{=response.google_analytics_id}}&#x27;}</div><div class="">     });&lt;/script&gt;</div><div class="">   {{pass}}</div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class="delete">- It uses a modified version of Twitter Boo<span class="highlight"></span>strap for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class=""> - It uses &quot;analytics.js&quot; to connect to Google Analytics.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> In views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is easy because the welcome application is based on Twitter Bootstrap which is well documented and supports themes. In web2py four static files which are relevant to style:</div><div class=""> </div><div class=""> - &quot;css/web2py.css&quot; contains web2py specific styles</div><div class="delete">- &quot;css/bootstrap.min.css&quot; contains the Twitter Boo<span class="highlight"></span>strap CSS style ``bootstrap``:cite ``Bootstrap``:inxx</div><div class=""> - &quot;css/web2py_bootstrap.css&quot; contains with overrides some Bootstrap styles to conform to web2py needs.</div><div class=""> - &quot;js/bootstrap.min.js&quot; which includes the libraries for menu effects, modals, panels.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/7a03a4c6ff63bf3919d846d23d0335091b23def6">7a03a4c</a><ul><li>Date : 2012-11-14</li><li>Typo + added references to bootstrap and superfish</li></ul></li></ul>
<div class="row-fluid" id="com_7a03a4c6ff63bf3919d846d23d0335091b23def6">
    <div class="span6"><div class="diff"><div class="insert">+## The views</div><div class="insert">+``views``:inxx ``template language``:inxx ``HTML``:inxx</div><div class="insert">+</div><div class="insert">+web2py uses Python for its models, controllers, and views, although it uses a slightly modified Python syntax in the views to allow more readable code without imposing any restrictions on proper Python usage.</div><div class="insert">+</div><div class="insert">+The purpose of a view is to embed code (Python) in an HTML document. In general, this poses some problems:</div><div class="insert">+- How should embedded code be escaped?</div><div class="insert">+- Should indenting be based on Python or HTML rules?</div><div class="insert">+</div><div class="insert">+web2py uses ``{{ ... }}`` to escape Python code embedded in HTML. The advantage of using curly brackets instead of angle brackets is that it&#x27;s transparent to all common HTML editors. This allows the developer to use those editors to create web2py views.</div><div class="insert">+</div><div class="insert">+Since the developer is embedding Python code into HTML, the document should be indented according to HTML rules, and not Python rules. Therefore, we allow unindented Python inside the ``{{ ... }}`` tags. Since Python normally uses indentation to delimit blocks of code, we need a different way to delimit them; this is why the web2py template language makes use of the Python keyword ``pass``.</div><div class="insert">+</div><div class="insert">+-------</div><div class="insert">+A code block starts with a line ending with a colon and ends with a line beginning with ``pass``. The keyword ``pass`` is not necessary when the end of the block is obvious from the context.</div><div class="insert">+-------</div><div class="insert">+</div><div class="insert">+Here is an example:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{</div><div class="insert">+if i == 0:</div><div class="insert">+response.write(&#x27;i is 0&#x27;)</div><div class="insert">+else:</div><div class="insert">+response.write(&#x27;i is not 0&#x27;)</div><div class="insert">+pass</div><div class="insert">+}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Note that ``pass`` is a Python keyword, not a web2py keyword. Some Python editors, such as Emacs, use the keyword ``pass`` to signify the division of blocks and use it to re-indent code automatically.</div><div class="insert">+</div><div class="insert">+The web2py template language does exactly the same. When it finds something like:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;&lt;body&gt;</div><div class="insert">+{{for x in range(10):}}{{=x}}hello&lt;br /&gt;{{pass}}</div><div class="insert">+&lt;/body&gt;&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+it translates it into a program:</div><div class="insert">+``</div><div class="insert">+response.write(&quot;&quot;&quot;&lt;html&gt;&lt;body&gt;&quot;&quot;&quot;, escape=False)</div><div class="insert">+for x in range(10):</div><div class="insert">+    response.write(x)</div><div class="insert">+    response.write(&quot;&quot;&quot;hello&lt;br /&gt;&quot;&quot;&quot;, escape=False)</div><div class="insert">+response.write(&quot;&quot;&quot;&lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;, escape=False)</div><div class="insert">+``:code</div><div class="insert">+``response.write`` writes to the ``response.body``.</div><div class="insert">+</div><div class="insert">+When there is an error in a web2py view, the error report shows the generated view code, not the actual view as written by the developer. This helps the developer debug the code by highlighting the actual code that is executed (which is something that can be debugged with an HTML editor or the DOM inspector of the browser).</div><div class="insert">+</div><div class="insert">+Also note that:</div><div class="insert">+``</div><div class="insert">+{{=x}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+generates</div><div class="insert">+``response.write``:inxx ``escape``:inxx</div><div class="insert">+``</div><div class="insert">+response.write(x)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Variables injected into the HTML in this way are escaped by default.</div><div class="insert">+The escaping is ignored if ``x`` is an ``XML`` object, even if escape is set to ``True``.</div><div class="insert">+</div><div class="insert">+Here is an example that introduces the ``H1`` helper:</div><div class="insert">+``</div><div class="insert">+{{=H1(i)}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+which is translated to:</div><div class="insert">+``</div><div class="insert">+response.write(H1(i))</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+upon evaluation, the ``H1`` object and its components are recursively serialized, escaped and written to the response body. The tags generated by ``H1`` and inner HTML are not escaped. This mechanism guarantees that all text --- and only text --- displayed on the web page is always escaped, thus preventing XSS vulnerabilities. At the same time, the code is simple and easy to debug.</div><div class="insert">+</div><div class="insert">+The method ``response.write(obj, escape=True)`` takes two arguments, the object to be written and whether it has to be escaped (set to ``True`` by default). If ``obj`` has an ``.xml()`` method, it is called and the result written to the response body (the ``escape`` argument is ignored). Otherwise it uses the object&#x27;s ``__str__`` method to serialize it and, if the escape argument is ``True``, escapes it. All built-in helper objects (``H1`` in the example) are objects that know how to serialize themselves via the ``.xml()`` method.</div><div class="insert">+</div><div class="insert">+This is all done transparently. You never need to (and never should) call the ``response.write`` method explicitly.</div><div class="insert">+</div><div class="insert">+### Basic syntax</div><div class="insert">+</div><div class="insert">+The web2py template language supports all Python control structures. Here we provide some examples of each of them. They can be nested according to usual programming practice.</div><div class="insert">+</div><div class="insert">+#### ``for...in``</div><div class="insert">+``for``:inxx</div><div class="insert">+</div><div class="insert">+In templates you can loop over any iterable object:</div><div class="insert">+``</div><div class="insert">+{{items = [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]}}</div><div class="insert">+&lt;ul&gt;</div><div class="insert">+{{for item in items:}}&lt;li&gt;{{=item}}&lt;/li&gt;{{pass}}</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+which produces:</div><div class="insert">+``</div><div class="insert">+&lt;ul&gt;</div><div class="insert">+&lt;li&gt;a&lt;/li&gt;</div><div class="insert">+&lt;li&gt;b&lt;/li&gt;</div><div class="insert">+&lt;li&gt;c&lt;/li&gt;</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Here ``item`` is any iterable object such as a Python list, Python tuple, or Rows object, or any object that is implemented as an iterator. The elements displayed are first serialized and escaped.</div><div class="insert">+</div><div class="insert">+#### ``while``</div><div class="insert">+``while``:inxx</div><div class="insert">+</div><div class="insert">+You can create a loop using the while keyword:</div><div class="insert">+``</div><div class="insert">+{{k = 3}}</div><div class="insert">+&lt;ul&gt;</div><div class="insert">+{{while k &gt; 0:}}&lt;li&gt;{{=k}}{{k = k - 1}}&lt;/li&gt;{{pass}}</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+which produces:</div><div class="insert">+``</div><div class="insert">+&lt;ul&gt;</div><div class="insert">+&lt;li&gt;3&lt;/li&gt;</div><div class="insert">+&lt;li&gt;2&lt;/li&gt;</div><div class="insert">+&lt;li&gt;1&lt;/li&gt;</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### ``if...elif...else``</div><div class="insert">+``if``:inxx ``elif``:inxx ``else``:inxx</div><div class="insert">+</div><div class="insert">+You can use conditional clauses:</div><div class="insert">+``</div><div class="insert">+{{</div><div class="insert">+import random</div><div class="insert">+k = random.randint(0, 100)</div><div class="insert">+}}</div><div class="insert">+&lt;h2&gt;</div><div class="insert">+{{=k}}</div><div class="insert">+{{if k % 2:}}is odd{{else:}}is even{{pass}}</div><div class="insert">+&lt;/h2&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+which produces:</div><div class="insert">+``</div><div class="insert">+&lt;h2&gt;</div><div class="insert">+45 is odd</div><div class="insert">+&lt;/h2&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Since it is obvious that ``else`` closes the first ``if`` block, there is no need for a ``pass`` statement, and using one would be incorrect. However, you must explicitly close the ``else`` block with a ``pass``.</div><div class="insert">+</div><div class="insert">+Recall that in Python &quot;else if&quot; is written ``elif`` as in the following example:</div><div class="insert">+``</div><div class="insert">+{{</div><div class="insert">+import random</div><div class="insert">+k = random.randint(0, 100)</div><div class="insert">+}}</div><div class="insert">+&lt;h2&gt;</div><div class="insert">+{{=k}}</div><div class="insert">+{{if k % 4 == 0:}}is divisible by 4</div><div class="insert">+{{elif k % 2 == 0:}}is even</div><div class="insert">+{{else:}}is odd</div><div class="insert">+{{pass}}</div><div class="insert">+&lt;/h2&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+It produces:</div><div class="insert">+``</div><div class="insert">+&lt;h2&gt;</div><div class="insert">+64 is divisible by 4</div><div class="insert">+&lt;/h2&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### ``try...except...else...finally``</div><div class="insert">+``try``:inxx ``except``:inxx ``else``:inxx ``finally``:inxx</div><div class="insert">+</div><div class="insert">+It is also possible to use ``try...except`` statements in views with one caveat. Consider the following example:</div><div class="insert">+``</div><div class="insert">+{{try:}}</div><div class="insert">+Hello {{= 1 / 0}}</div><div class="insert">+{{except:}}</div><div class="insert">+division by zero</div><div class="insert">+{{else:}}</div><div class="insert">+no division by zero</div><div class="insert">+{{finally}}</div><div class="insert">+&lt;br /&gt;</div><div class="insert">+{{pass}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+It will produce the following output:</div><div class="insert">+``</div><div class="insert">+Hello</div><div class="insert">+division by zero</div><div class="insert">+&lt;br /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+This example illustrates that all output generated before an exception occurs is rendered (including output that preceded the exception) inside the try block. &quot;Hello&quot; is written because it precedes the exception.</div><div class="insert">+</div><div class="insert">+#### ``def...return``</div><div class="insert">+``def``:inxx ``return``:inxx</div><div class="insert">+</div><div class="insert">+The web2py template language allows the developer to define and implement functions that can return any Python object or a text/html string. Here we consider two examples:</div><div class="insert">+``</div><div class="insert">+{{def itemize1(link): return LI(A(link, _href=&quot;http://&quot; + link))}}</div><div class="insert">+&lt;ul&gt;</div><div class="insert">+{{=itemize1(&#x27;www.google.com&#x27;)}}</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+produces the following output:</div><div class="insert">+``</div><div class="insert">+&lt;ul&gt;</div><div class="insert">+&lt;li&gt;&lt;a href=&quot;http:/www.google.com&quot;&gt;www.google.com&lt;/a&gt;&lt;/li&gt;</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The function ``itemize1`` returns a helper object that is inserted at the location where the function is called.</div><div class="insert">+</div><div class="insert">+Consider now the following code:</div><div class="insert">+``</div><div class="insert">+{{def itemize2(link):}}</div><div class="insert">+&lt;li&gt;&lt;a href=&quot;http://{{=link}}&quot;&gt;{{=link}}&lt;/a&gt;&lt;/li&gt;</div><div class="insert">+{{return}}</div><div class="insert">+&lt;ul&gt;</div><div class="insert">+{{itemize2(&#x27;www.google.com&#x27;)}}</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+It produces exactly the same output as above. In this case, the function ``itemize2`` represents a piece of HTML that is going to replace the web2py tag where the function is called. Notice that there is no &#x27;=&#x27; in front of the call to ``itemize2``, since the function does not return the text, but it writes it directly into the response.</div><div class="insert">+</div><div class="insert">+There is one caveat: functions defined inside a view must terminate with a return statement, or the automatic indentation will fail.</div><div class="insert">+</div><div class="insert">+### HTML helpers</div><div class="insert">+``helpers``:inxx</div><div class="insert">+</div><div class="insert">+Consider the following code in a view:</div><div class="insert">+``</div><div class="insert">+{{=DIV(&#x27;this&#x27;, &#x27;is&#x27;, &#x27;a&#x27;, &#x27;test&#x27;, _id=&#x27;123&#x27;, _class=&#x27;myclass&#x27;)}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+it is rendered as:</div><div class="insert">+``</div><div class="insert">+&lt;div id=&quot;123&quot; class=&quot;myclass&quot;&gt;thisisatest&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+``DIV`` is a helper class, i.e., something that can be used to build HTML programmatically. It corresponds to the HTML ``&lt;div&gt;`` tag.</div><div class="insert">+</div><div class="insert">+Positional arguments are interpreted as objects contained between the open and close tags. Named arguments that start with an underscore are interpreted as HTML tag attributes (without the underscore). Some helpers also have named arguments that do not start with underscore; these arguments are tag-specific.</div><div class="insert">+</div><div class="insert">+Instead of a set of unnamed arguments, a helper can also take a single list or tuple as its set of components using the ``*`` notation and it can take a single dictionary as its set of attributes using the ``**``, for example:</div><div class="insert">+``</div><div class="insert">+{{</div><div class="insert">+contents = [&#x27;this&#x27;,&#x27;is&#x27;,&#x27;a&#x27;,&#x27;test&#x27;]</div><div class="insert">+attributes = {&#x27;_id&#x27;:&#x27;123&#x27;, &#x27;_class&#x27;:&#x27;myclass&#x27;}</div><div class="insert">+=DIV(*contents,**attributes)</div><div class="insert">+}}</div><div class="insert">+``:code</div><div class="insert">+(produces the same output as before).</div><div class="insert">+</div><div class="insert">+The following set of helpers:</div><div class="insert">+</div><div class="insert">+``A``,  ``B``,  ``BEAUTIFY``,  ``BODY``,  ``BR``,  ``CAT``,  ``CENTER``,  ``CODE``,  ``COL``, ``COLGROUP``, ``DIV``,  ``EM``,  ``EMBED``,  ``FIELDSET``,  ``FORM``,  ``H1``,  ``H2``,  ``H3``,  ``H4``,  ``H5``,  ``H6``,  ``HEAD``,  ``HR``,  ``HTML``,  ``I``,  ``IFRAME``,  ``IMG``,  ``INPUT``,  ``LABEL``,  ``LEGEND``,  ``LI``,  ``LINK``,  ``MARKMIN``,  ``MENU``,  ``META``,  ``OBJECT``,  ``ON``,  ``OL``,  ``OPTGROUP``,  ``OPTION``,  ``P``,  ``PRE``,  ``SCRIPT``,  ``SELECT``,  ``SPAN``,  ``STYLE``,  ``TABLE``,  ``TAG``,  ``TBODY``,  ``TD``,  ``TEXTAREA``,  ``TFOOT``,  ``TH``,  ``THEAD``,  ``TITLE``,  ``TR``,  ``TT``, ``UL``,   ``URL``,  ``XHTML``,  ``XML``,  ``embed64``,  ``xmlescape``</div><div class="insert">+</div><div class="insert">+can be used to build complex expressions that can then be serialized to XML``xml:w``:cite ``xml:o``:cite. For example:</div><div class="insert">+``</div><div class="insert">+{{=DIV(B(I(&quot;hello &quot;, &quot;&lt;world&gt;&quot;))), _class=&quot;myclass&quot;)}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+is rendered:</div><div class="insert">+``</div><div class="insert">+&lt;div class=&quot;myclass&quot;&gt;&lt;b&gt;&lt;i&gt;hello &amp;lt;world&amp;gt;&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Helpers can also be serialized into strings, equivalently, with the ``__str__`` and the ``xml`` methods:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print str(DIV(&quot;hello world&quot;))</div><div class="insert">+&lt;div&gt;hello world&lt;/div&gt;</div><div class="insert">+&gt;&gt;&gt; print DIV(&quot;hello world&quot;).xml()</div><div class="insert">+&lt;div&gt;hello world&lt;/div&gt;</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+``Document Object Model (DOM)``:inxx</div><div class="insert">+The helpers mechanism in web2py is more than a system to generate HTML without concatenating strings. It provides a server-side representation of the Document Object Model (DOM).</div><div class="insert">+</div><div class="insert">+Components of helpers can be referenced via their position, and helpers act as lists with respect to their components:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, &#x27;b&#x27;), &#x27;c&#x27;)</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div&gt;&lt;span&gt;ab&lt;/span&gt;c&lt;/div&gt;</div><div class="insert">+&gt;&gt;&gt; del a[1]</div><div class="insert">+&gt;&gt;&gt; a.append(B(&#x27;x&#x27;))</div><div class="insert">+&gt;&gt;&gt; a[0][0] = &#x27;y&#x27;</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div&gt;&lt;span&gt;yb&lt;/span&gt;&lt;b&gt;x&lt;/b&gt;&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Attributes of helpers can be referenced by name, and helpers act as dictionaries with respect to their attributes:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, &#x27;b&#x27;), &#x27;c&#x27;)</div><div class="insert">+&gt;&gt;&gt; a[&#x27;_class&#x27;] = &#x27;s&#x27;</div><div class="insert">+&gt;&gt;&gt; a[0][&#x27;_class&#x27;] = &#x27;t&#x27;</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div class=&quot;s&quot;&gt;&lt;span class=&quot;t&quot;&gt;ab&lt;/span&gt;c&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Note, the complete set of components can be accessed via a list called ``a.components``, and the complete set of attributes can be accessed via a dictionary called ``a.attributes``. So, ``a[i]`` is equivalent to ``a.components[i]`` when ``i`` is an integer, and ``a[s]`` is equivalent to ``a.attributes[s]`` when ``s`` is a string.</div><div class="insert">+</div><div class="insert">+Notice that helper attributes are passed as keyword arguments to the helper. In some cases, however, attribute names include special characters that are not allowed in Python identifiers (e.g., hyphens) and therefore cannot be used as keyword argument names. For example:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+DIV(&#x27;text&#x27;, _data-role=&#x27;collapsible&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+will not work because &quot;_data-role&quot; includes a hyphen, which will produce a Python syntax error.</div><div class="insert">+</div><div class="insert">+In such cases, you can instead pass the attributes as a dictionary and make use of Python&#x27;s ``**`` function arguments notation, which map a dictionary of (key:value) pairs into a set of keyword arguments:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print DIV(&#x27;text&#x27;, **{&#x27;_data-role&#x27;: &#x27;collapsible&#x27;})</div><div class="insert">+&lt;div data-role=&quot;collapsible&quot;&gt;text&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+You can also dynamically create special TAGs:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TAG[&#x27;soap:Body&#x27;](&#x27;whatever&#x27;,**{&#x27;_xmlns:m&#x27;:&#x27;http://www.example.org&#x27;})</div><div class="insert">+&lt;soap:Body xmlns:m=&quot;http://www.example.org&quot;&gt;whatever&lt;/soap:Body&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### ``XML``</div><div class="insert">+``XML``:inxx</div><div class="insert">+``XML`` is an object used to encapsulate text that should not be escaped. The text may or may not contain valid XML. For example, it could contain JavaScript.</div><div class="insert">+</div><div class="insert">+The text in this example is escaped:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print DIV(&quot;&lt;b&gt;hello&lt;/b&gt;&quot;)</div><div class="insert">+&amp;lt;b&amp;gt;hello&amp;lt;/b&amp;gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+by using ``XML`` you can prevent escaping:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print DIV(XML(&quot;&lt;b&gt;hello&lt;/b&gt;&quot;))</div><div class="insert">+&lt;b&gt;hello&lt;/b&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Sometimes you want to render HTML stored in a variable, but the HTML may contain unsafe tags such as scripts:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print XML(&#x27;&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;&#x27;)</div><div class="insert">+&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Un-escaped executable input such as this (for example, entered in the body of a comment in a blog) is unsafe, because it can be used to generate Cross Site Scripting (XSS) attacks against other visitors to the page.</div><div class="insert">+</div><div class="insert">+``sanitize``:inxx</div><div class="insert">+The web2py ``XML`` helper can sanitize our text to prevent injections and escape all tags except those that you explicitly allow. Here is an example:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print XML(&#x27;&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;&#x27;, sanitize=True)</div><div class="insert">+&amp;lt;script&amp;gt;alert(&amp;quot;unsafe!&amp;quot;)&amp;lt;/script&amp;gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The ``XML`` constructors, by default, consider the content of some tags and some of their attributes safe. You can override the defaults using the optional ``permitted_tags`` and ``allowed_attributes`` arguments. Here are the default values of the optional arguments of the ``XML`` helper.</div><div class="insert">+``</div><div class="insert">+XML(text, sanitize=False,</div><div class="insert">+    permitted_tags=[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;blockquote&#x27;, &#x27;br/&#x27;, &#x27;i&#x27;, &#x27;li&#x27;,</div><div class="insert">+       &#x27;ol&#x27;, &#x27;ul&#x27;, &#x27;p&#x27;, &#x27;cite&#x27;, &#x27;code&#x27;, &#x27;pre&#x27;, &#x27;img/&#x27;],</div><div class="insert">+    allowed_attributes={&#x27;a&#x27;:[&#x27;href&#x27;, &#x27;title&#x27;],</div><div class="insert">+       &#x27;img&#x27;:[&#x27;src&#x27;, &#x27;alt&#x27;], &#x27;blockquote&#x27;:[&#x27;type&#x27;]})</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### Built-in helpers</div><div class="insert">+</div><div class="insert">+##### ``A``</div><div class="insert">+</div><div class="insert">+This helper is used to build links.</div><div class="insert">+</div><div class="insert">+``A``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print A(&#x27;&lt;click&gt;&#x27;, XML(&#x27;&lt;b&gt;me&lt;/b&gt;&#x27;),</div><div class="insert">+            _href=&#x27;http://www.web2py.com&#x27;)</div><div class="insert">+&lt;a href=&#x27;http://www.web2py.com&#x27;&gt;&amp;lt;click&amp;gt;&lt;b&gt;me/b&gt;&lt;/a&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Instead of ``_href`` you can pass the URL using the ``callback`` argument. For example in a view:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;))}}</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+and the effect of pressing the link will be an ajax call to &quot;myaction&quot; instead of a redirection.</div><div class="insert">+In this case, optionally you can specify two more arguments: ``target`` and ``delete``:</div><div class="insert">+``</div><div class="insert">+{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;), target=&quot;t&quot;)}}</div><div class="insert">+&lt;div id=&quot;t&quot;&gt;&lt;div&gt;</div><div class="insert">+``</div><div class="insert">+and the response of the ajax callback will be stored in the DIV with id equal to &quot;t&quot;.</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;div id=&quot;b&quot;&gt;{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;), delete=&#x27;div#b&quot;)}}&lt;/div&gt;</div><div class="insert">+``</div><div class="insert">+and upon response, the closest tag matching &quot;div#b&quot; will be deleted. In this case, the button will be deleted.</div><div class="insert">+A typical application is:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;), delete=&#x27;tr&quot;)}}</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+in a table. Pressing the button will perform the callback and delete the table row.</div><div class="insert">+</div><div class="insert">+``callback`` and ``delete`` can be combined.</div><div class="insert">+</div><div class="insert">+The A helper takes a special argument called ``cid``. It works as follows:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{=A(&#x27;linked page&#x27;, _href=&#x27;http://example.com&#x27;, cid=&#x27;myid&#x27;)}}</div><div class="insert">+&lt;div id=&quot;myid&quot;&gt;&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+and a click on the link causes the content to be loaded in the div. This is similar but more powerful than the above syntax since it is designed to refresh page components. We discuss applications of ``cid`` in more detail in Chapter 12, in the context of components.</div><div class="insert">+</div><div class="insert">+These ajax features require jQuery and &quot;static/js/web2py_ajax.js&quot;, which are automatically included by placing ``{{include &#x27;web2py_ajax.html&#x27;}}`` in the layout head. &quot;views/web2py_ajax.html&quot; defines some variables based on ``request`` and includes all necessary js and css files.</div><div class="insert">+</div><div class="insert">+</div><div class="insert">+##### ``B``</div><div class="insert">+``B``:inxx</div><div class="insert">+</div><div class="insert">+This helper makes its contents bold.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print B(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;i&gt;world&lt;/i&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;b id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;i&gt;world&lt;/i&gt;&lt;/b&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``BODY``</div><div class="insert">+``BODY``:inxx</div><div class="insert">+This helper makes the body of a page.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _bgcolor=&#x27;red&#x27;)</div><div class="insert">+&lt;body bgcolor=&quot;red&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``BR``</div><div class="insert">+``BR``:inxx</div><div class="insert">+</div><div class="insert">+This helper creates a line break.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print BR()</div><div class="insert">+&lt;br /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``CAT`` (1.98.1 and up)</div><div class="insert">+``CAT``:inxx</div><div class="insert">+</div><div class="insert">+This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class="insert">+Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``CENTER``</div><div class="insert">+``CENTER``:inxx</div><div class="insert">+</div><div class="insert">+This helper centers its content.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class="insert">+&gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``CODE``</div><div class="insert">+``CODE``:inxx</div><div class="insert">+</div><div class="insert">+This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class="insert">+</div><div class="insert">+Here is an example of highlighting sections of Python code.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print CODE(&#x27;print &quot;hello&quot;&#x27;, language=&#x27;python&#x27;).xml()</div><div class="insert">+&lt;table&gt;&lt;tr valign=&quot;top&quot;&gt;&lt;td style=&quot;width:40px; text-align: right;&quot;&gt;&lt;pre style=&quot;</div><div class="insert">+        font-size: 11px;</div><div class="insert">+        font-family: Bitstream Vera Sans Mono,monospace;</div><div class="insert">+        background-color: transparent;</div><div class="insert">+            margin: 0;</div><div class="insert">+            padding: 5px;</div><div class="insert">+            border: none;</div><div class="insert">+        background-color: #E0E0E0;</div><div class="insert">+        color: #A0A0A0;</div><div class="insert">+    &quot;&gt;1.&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre style=&quot;</div><div class="insert">+        font-size: 11px;</div><div class="insert">+        font-family: Bitstream Vera Sans Mono,monospace;</div><div class="insert">+        background-color: transparent;</div><div class="insert">+            margin: 0;</div><div class="insert">+            padding: 5px;</div><div class="insert">+            border: none;</div><div class="insert">+            overflow: auto;</div><div class="insert">+    &quot;&gt;&lt;span style=&quot;color:#185369; font-weight: bold&quot;&gt;print &lt;/span&gt;</div><div class="insert">+    &lt;span style=&quot;color: #FF9966&quot;&gt;&quot;hello&quot;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="insert">+&lt;/table&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Here is a similar example for HTML</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print CODE(</div><div class="insert">+&gt;&gt;&gt;   &#x27;&lt;html&gt;&lt;body&gt;{{=request.env.remote_add}}&lt;/body&gt;&lt;/html&gt;&#x27;,</div><div class="insert">+&gt;&gt;&gt;   language=&#x27;html&#x27;)</div><div class="insert">+``:code</div><div class="insert">+``</div><div class="insert">+&lt;table&gt;...&lt;code&gt;...</div><div class="insert">+&lt;html&gt;&lt;body&gt;{{=request.env.remote_add}}&lt;/body&gt;&lt;/html&gt;</div><div class="insert">+...&lt;/code&gt;...&lt;/table&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+These are the default arguments for the ``CODE`` helper:</div><div class="insert">+``</div><div class="insert">+CODE(&quot;print &#x27;hello world&#x27;&quot;, language=&#x27;python&#x27;, link=None, counter=1, styles={})</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Supported values for the ``language`` argument are &quot;python&quot;, &quot;html_plain&quot;, &quot;c&quot;, &quot;cpp&quot;, &quot;web2py&quot;, and &quot;html&quot;. The &quot;html&quot; language interprets {{ and }} tags as &quot;web2py&quot; code, while &quot;html_plain&quot; doesn&#x27;t.</div><div class="insert">+</div><div class="insert">+If a ``link`` value is specified, for example &quot;/examples/global/vars/&quot;, web2py API references in the code are linked to documentation at the link URL. For example &quot;request&quot; would be linked to &quot;/examples/global/vars/request&quot;. In the above example, the link URL is handled by the &quot;vars&quot; action in the &quot;global.py&quot; controller that is distributed as part of the web2py &quot;examples&quot; application.</div><div class="insert">+</div><div class="insert">+The ``counter`` argument is used for line numbering. It can be set to any of three different values. It can be ``None`` for no line numbers, a numerical value specifying the start number, or a string. If the counter is set to a string, it is interpreted as a prompt, and there are no line numbers.</div><div class="insert">+</div><div class="insert">+The ``styles`` argument is a bit tricky. If you look at the generated HTML above, it contains a table with two columns, and each column has its own style declared inline using CSS. The ``styles`` attributes allows you to override those two CSS styles. For example:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{=CODE(...,styles={&#x27;CODE&#x27;:&#x27;margin: 0;padding: 5px;border: none;&#x27;})}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The ``styles`` attribute must be a dictionary, and it allows two possible keys: ``CODE`` for the style of the actual code, and ``LINENUMBERS`` for the style of the left column, which contains the line numbers. Mind that these styles completely replace the default styles and are not simply added to them.</div><div class="insert">+</div><div class="insert">+##### ``COL``</div><div class="insert">+``COL``:inxx</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print COL(&#x27;a&#x27;,&#x27;b&#x27;)</div><div class="insert">+&lt;col&gt;ab&lt;/col&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``COLGROUP``</div><div class="insert">+``COLGROUP``:inxx</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print COLGROUP(&#x27;a&#x27;,&#x27;b&#x27;)</div><div class="insert">+&lt;colgroup&gt;ab&lt;/colgroup&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``DIV``</div><div class="insert">+All helpers apart from ``XML`` are derived from ``DIV`` and inherit its basic methods.</div><div class="insert">+</div><div class="insert">+``DIV``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print DIV(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;div id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``EM``</div><div class="insert">+</div><div class="insert">+Emphasizes its content.</div><div class="insert">+</div><div class="insert">+``EM``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print EM(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;em id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/em&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``FIELDSET``</div><div class="insert">+``FIELDSET``:inxx</div><div class="insert">+</div><div class="insert">+This is used to create an input field together with its label.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print FIELDSET(&#x27;Height:&#x27;, INPUT(_name=&#x27;height&#x27;), _class=&#x27;test&#x27;)</div><div class="insert">+&lt;fieldset class=&quot;test&quot;&gt;Height:&lt;input name=&quot;height&quot; /&gt;&lt;/fieldset&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``FORM``</div><div class="insert">+``FORM``:inxx</div><div class="insert">+</div><div class="insert">+This is one of the most important helpers. In its simple form, it just makes a ``&lt;form&gt;...&lt;/form&gt;`` tag, but because helpers are objects and have knowledge of what they contain, they can process submitted forms (for example, perform validation of the fields). This will be discussed in detail in Chapter 7.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print FORM(INPUT(_type=&#x27;submit&#x27;), _action=&#x27;&#x27;, _method=&#x27;post&#x27;)</div><div class="insert">+&lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</div><div class="insert">+&lt;input type=&quot;submit&quot; /&gt;&lt;/form&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The &quot;enctype&quot; is &quot;multipart/form-data&quot; by default.</div><div class="insert">+</div><div class="insert">+``hidden``:inxx</div><div class="insert">+The constructor of a ``FORM``, and of ``SQLFORM``, can also take a special argument called ``hidden``. When a dictionary is passed as ``hidden``, its items are translated into &quot;hidden&quot; INPUT fields. For example:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print FORM(hidden=dict(a=&#x27;b&#x27;))</div><div class="insert">+&lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</div><div class="insert">+&lt;input value=&quot;b&quot; type=&quot;hidden&quot; name=&quot;a&quot; /&gt;&lt;/form&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``H1``, ``H2``, ``H3``, ``H4``, ``H5``, ``H6``</div><div class="insert">+``H1``:inxx</div><div class="insert">+</div><div class="insert">+These helpers are for paragraph headings and subheadings:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print H1(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;h1 id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/h1&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``HEAD``</div><div class="insert">+</div><div class="insert">+For tagging the HEAD of an HTML page.</div><div class="insert">+</div><div class="insert">+``HEAD``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print HEAD(TITLE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class="insert">+&lt;head&gt;&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;&lt;/head&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``HTML``</div><div class="insert">+``HTML``:inxx ``XHTML``:inxx</div><div class="insert">+</div><div class="insert">+This helper is a little different. In addition to making the ``&lt;html&gt;`` tags,</div><div class="insert">+it prepends the tag with a doctype string``xhtml:w,xhtml:o,xhtml:school``:cite .</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print HTML(BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class="insert">+&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</div><div class="insert">+                      &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</div><div class="insert">+&lt;html&gt;&lt;body&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The HTML helper also takes some additional optional arguments that have the following default:</div><div class="insert">+``</div><div class="insert">+HTML(..., lang=&#x27;en&#x27;, doctype=&#x27;transitional&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+where doctype can be &#x27;strict&#x27;, &#x27;transitional&#x27;, &#x27;frameset&#x27;, &#x27;html5&#x27;, or a full doctype string.</div><div class="insert">+</div><div class="insert">+##### ``XHTML``</div><div class="insert">+``XHTML``:inxx</div><div class="insert">+</div><div class="insert">+XHTML is similar to HTML but it creates an XHTML doctype instead.</div><div class="insert">+``</div><div class="insert">+XHTML(..., lang=&#x27;en&#x27;, doctype=&#x27;transitional&#x27;, xmlns=&#x27;http://www.w3.org/1999/xhtml&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+where doctype can be &#x27;strict&#x27;, &#x27;transitional&#x27;, &#x27;frameset&#x27;, or a full doctype string.</div><div class="insert">+</div><div class="insert">+##### ``HR``</div><div class="insert">+``HR``:inxx</div><div class="insert">+</div><div class="insert">+This helper creates a horizontal line in an HTML page</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print HR()</div><div class="insert">+&lt;hr /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``I``</div><div class="insert">+``I``:inxx</div><div class="insert">+</div><div class="insert">+This helper makes its contents italic.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print I(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;i id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/i&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``INPUT``</div><div class="insert">+``INPUT``:inxx</div><div class="insert">+</div><div class="insert">+Creates an ``&lt;input.../&gt;`` tag. An input tag may not contain other tags, and is closed by ``/&gt;`` instead of ``&gt;``. The input tag has an optional attribute ``_type`` that can be set to &quot;text&quot; (the default), &quot;submit&quot;, &quot;checkbox&quot;, or &quot;radio&quot;.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print INPUT(_name=&#x27;test&#x27;, _value=&#x27;a&#x27;)</div><div class="insert">+&lt;input value=&quot;a&quot; name=&quot;test&quot; /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+It also takes an optional special argument called &quot;value&quot;, distinct from &quot;_value&quot;. The latter sets the default value for the input field; the former sets its current value. For an input of type &quot;text&quot;, the former overrides the latter:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print INPUT(_name=&#x27;test&#x27;, _value=&#x27;a&#x27;, value=&#x27;b&#x27;)</div><div class="insert">+&lt;input value=&quot;b&quot; name=&quot;test&quot; /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+For radio buttons, ``INPUT`` selectively sets the &quot;checked&quot; attribute:</div><div class="insert">+</div><div class="insert">+``radio``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; for v in [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]:</div><div class="insert">+&gt;&gt;&gt;     print INPUT(_type=&#x27;radio&#x27;, _name=&#x27;test&#x27;, _value=v, value=&#x27;b&#x27;), v</div><div class="insert">+&lt;input value=&quot;a&quot; type=&quot;radio&quot; name=&quot;test&quot; /&gt; a</div><div class="insert">+&lt;input value=&quot;b&quot; type=&quot;radio&quot; checked=&quot;checked&quot; name=&quot;test&quot; /&gt; b</div><div class="insert">+&lt;input value=&quot;c&quot; type=&quot;radio&quot; name=&quot;test&quot; /&gt; c</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+and similarly for checkboxes:</div><div class="insert">+</div><div class="insert">+``checkbox``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print INPUT(_type=&#x27;checkbox&#x27;, _name=&#x27;test&#x27;, _value=&#x27;a&#x27;, value=True)</div><div class="insert">+&lt;input value=&quot;a&quot; type=&quot;checkbox&quot; checked=&quot;checked&quot; name=&quot;test&quot; /&gt;</div><div class="insert">+&gt;&gt;&gt; print INPUT(_type=&#x27;checkbox&#x27;, _name=&#x27;test&#x27;, _value=&#x27;a&#x27;, value=False)</div><div class="insert">+&lt;input value=&quot;a&quot; type=&quot;checkbox&quot; name=&quot;test&quot; /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``IFRAME``</div><div class="insert">+</div><div class="insert">+This helper includes another web page in the current page. The url of the other page is specified via the &quot;_src&quot; attribute.</div><div class="insert">+</div><div class="insert">+``IFRAME``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print IFRAME(_src=&#x27;http://www.web2py.com&#x27;)</div><div class="insert">+&lt;iframe src=&quot;http://www.web2py.com&quot;&gt;&lt;/iframe&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``IMG``</div><div class="insert">+``IMG``:inxx</div><div class="insert">+</div><div class="insert">+It can be used to embed images into HTML:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; IMG(_src=&#x27;http://example.com/image.png&#x27;,_alt=&#x27;test&#x27;)</div><div class="insert">+&lt;img src=&quot;http://example.com/image.ong&quot; alt=&quot;rest&quot; /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Here is a combination of A, IMG, and URL helpers for including a static image with a link:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; A(IMG(_src=URL(&#x27;static&#x27;,&#x27;logo.png&#x27;), _alt=&quot;My Logo&quot;),</div><div class="insert">+      _href=URL(&#x27;default&#x27;,&#x27;index&#x27;))</div><div class="insert">+&lt;a href=&quot;/myapp/default/index&quot;&gt;</div><div class="insert">+  &lt;img src=&quot;/myapp/static/logo.png&quot; alt=&quot;My Logo&quot; /&gt;</div><div class="insert">+&lt;/a&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``LABEL``</div><div class="insert">+</div><div class="insert">+It is used to create a LABEL tag for an INPUT field.</div><div class="insert">+</div><div class="insert">+``LABEL``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print LABEL(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;label id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/label&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``LEGEND``</div><div class="insert">+</div><div class="insert">+It is used to create a legend tag for a field in a form.</div><div class="insert">+</div><div class="insert">+``LEGEND``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print LEGEND(&#x27;Name&#x27;, _for=&#x27;myfield&#x27;)</div><div class="insert">+&lt;legend for=&quot;myfield&quot;&gt;Name&lt;/legend&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``LI``</div><div class="insert">+</div><div class="insert">+It makes a list item and should be contained in a ``UL`` or ``OL`` tag.</div><div class="insert">+</div><div class="insert">+``LI``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print LI(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;li id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``META``</div><div class="insert">+</div><div class="insert">+To be used for building ``META`` tags in the ``HTML`` head. For example:</div><div class="insert">+</div><div class="insert">+``META``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print META(_name=&#x27;security&#x27;, _content=&#x27;high&#x27;)</div><div class="insert">+&lt;meta name=&quot;security&quot; content=&quot;high&quot; /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``MARKMIN``</div><div class="insert">+</div><div class="insert">+Implements the markmin wiki syntax. It converts the input text into output html according to the markmin rules described in the example below:</div><div class="insert">+</div><div class="insert">+``MARKMIN``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print MARKMIN(&quot;this is **bold** or &#x27;&#x27;italic&#x27;&#x27; and this [[a link http://web2py.com]]&quot;)</div><div class="insert">+&lt;p&gt;this is &lt;b&gt;bold&lt;/b&gt; or &lt;i&gt;italic&lt;/i&gt; and</div><div class="insert">+this &lt;a href=&quot;http://web2py.com&quot;&gt;a link&lt;/a&gt;&lt;/p&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The markmin syntax is described in this file that ships with web2py:</div><div class="insert">+``</div><div class="insert">+http://127.0.0.1:8000/examples/static/markmin.html</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+and some examples are shown in chapter 12 in the context of plugin_wiki, which uses MARKMIN extensively.</div><div class="insert">+</div><div class="insert">+You can use markmin to generate HTML, LaTeX and PDF documents:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+m = &quot;Hello **world** [[link http://web2py.com]]&quot;</div><div class="insert">+from gluon.contrib.markmin.markmin2html import markmin2html</div><div class="insert">+print markmin2html(m)</div><div class="insert">+from gluon.contrib.markmin.markmin2latex import markmin2latex</div><div class="insert">+print markmin2latex(m)</div><div class="insert">+from gluon.contrib.markmin.markmin2pdf import markmin2pdf</div><div class="insert">+print markmin2pdf(m) # requires pdflatex</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+(the ``MARKMIN`` helper is a shortcut for ``markmin2html``)</div><div class="insert">+</div><div class="insert">+Here is a basic syntax primer:</div><div class="insert">+</div><div class="insert">+--------------------------------------------------</div><div class="insert">+**SOURCE**                 | **OUTPUT**</div><div class="insert">+``# title``                | **title**</div><div class="insert">+``## section``             | **section**</div><div class="insert">+``### subsection``         | **subsection**</div><div class="insert">+``**bold**``               | **bold**</div><div class="insert">+``&#x27;&#x27;italic&#x27;&#x27;``             | &#x27;&#x27;italic&#x27;&#x27;</div><div class="insert">+``!`!`verbatim`!`!``       | ``verbatim``</div><div class="insert">+``http://google.com``      | http://google.com</div><div class="insert">+``http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;http:...&lt;/a&gt;``</div><div class="insert">+``http://...png`` | ``&lt;img src=&quot;http://...png&quot; /&gt;``</div><div class="insert">+``http://...mp3`` | ``&lt;audio src=&quot;http://...mp3&quot;&gt;&lt;/audio&gt;``</div><div class="insert">+``http://...mp4`` | ``&lt;video src=&quot;http://...mp4&quot;&gt;&lt;/video&gt;``</div><div class="insert">+``qr:http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;&lt;img src=&quot;qr code&quot;/&gt;&lt;/a&gt;``</div><div class="insert">+``embed:http://...`` | ``&lt;iframe src=&quot;http://...&quot;&gt;&lt;/iframe&gt;``</div><div class="insert">+``[[click me #myanchor]]`` | [[click me #myanchor]]</div><div class="insert">+``$````$\int_a^b sin(x)dx$````$``  | $$\int_a^b sin(x)dx$$</div><div class="insert">+---------------------------------------------------</div><div class="insert">+</div><div class="insert">+Simply including a link to an image, a videos or an audio files without markup result in the corresponding image, video or audio file being included automatically (for audio and video it uses html &lt;audio&gt; and &lt;video&gt; tags).</div><div class="insert">+</div><div class="insert">+Adding a link with the ``qr:`` prefix such as</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+qr:http://web2py.com</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+results in the corresponding QR code being embedded and linking the said URL.</div><div class="insert">+</div><div class="insert">+Adding a link with the ``embed:`` prefix such as</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+embed:http://www.youtube.com/embed/x1w8hKTJ2Co</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+results in the page being embedded, in this case a youtube video is embedded.</div><div class="insert">+</div><div class="insert">+Images can also be embedded with the following syntax:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+[[image-description http://.../image.png right 200px]]</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+Unordered lists with:</div><div class="insert">+``</div><div class="insert">+- one</div><div class="insert">+- two</div><div class="insert">+- three</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+Ordered lists with:</div><div class="insert">+``</div><div class="insert">++ one</div><div class="insert">++ two</div><div class="insert">++ three</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+and tables with:</div><div class="insert">+``</div><div class="insert">+----------</div><div class="insert">+ X | 0 | 0</div><div class="insert">+ 0 | X | 0</div><div class="insert">+ 0 | 0 | 1</div><div class="insert">+----------</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+The MARKMIN syntax also supports blockquotes, HTML5 audio and video tags, image alignment, custom css, and it can be extended:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+MARKMIN(&quot;!`!!`!abab!`!!`!:custom&quot;, extra=dict(custom=lambda text: text.replace(&#x27;a&#x27;,&#x27;c&#x27;))</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+generates</div><div class="insert">+</div><div class="insert">+``&#x27;cbcb&#x27;``:code</div><div class="insert">+</div><div class="insert">+Custom blocks are delimited by ``!`!!`!...!`!!`!:&lt;key&gt;`` and they are rendered by the function passed as value for the corresponding key in the extra dictionary argument of MARKMIN. Mind that the function may need to escape the output to prevent XSS.</div><div class="insert">+</div><div class="insert">+##### ``OBJECT``</div><div class="insert">+</div><div class="insert">+Used to embed objects (for example, a flash player) in the HTML.</div><div class="insert">+</div><div class="insert">+``OBJECT``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print OBJECT(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class="insert">+&gt;&gt;&gt;              _src=&#x27;http://www.web2py.com&#x27;)</div><div class="insert">+&lt;object src=&quot;http://www.web2py.com&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/object&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``OL``</div><div class="insert">+</div><div class="insert">+It stands for Ordered List. The list should contain LI tags. ``OL`` arguments that are not ``LI`` objects are automatically enclosed in ``&lt;li&gt;...&lt;/li&gt;`` tags.</div><div class="insert">+</div><div class="insert">+``OL``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print OL(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;ol id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;li&gt;&amp;lt;hello&amp;gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``ON``</div><div class="insert">+</div><div class="insert">+This is here for backward compatibility and it is simply an alias for ``True``. It is used exclusively for checkboxes and deprecated since ``True`` is more Pythonic.</div><div class="insert">+</div><div class="insert">+``ON``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print INPUT(_type=&#x27;checkbox&#x27;, _name=&#x27;test&#x27;, _checked=ON)</div><div class="insert">+&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;test&quot; /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``OPTGROUP``</div><div class="insert">+</div><div class="insert">+Allows you to group multiple options in a SELECT and it is useful to customize the fields using CSS.</div><div class="insert">+</div><div class="insert">+``OPTGROUP``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print SELECT(&#x27;a&#x27;, OPTGROUP(&#x27;b&#x27;, &#x27;c&#x27;))</div><div class="insert">+&lt;select&gt;</div><div class="insert">+  &lt;option value=&quot;a&quot;&gt;a&lt;/option&gt;</div><div class="insert">+  &lt;optgroup&gt;</div><div class="insert">+    &lt;option value=&quot;b&quot;&gt;b&lt;/option&gt;</div><div class="insert">+    &lt;option value=&quot;c&quot;&gt;c&lt;/option&gt;</div><div class="insert">+  &lt;/optgroup&gt;</div><div class="insert">+&lt;/select&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``OPTION``</div><div class="insert">+</div><div class="insert">+This should only be used as part of a SELECT/OPTION combination.</div><div class="insert">+</div><div class="insert">+``OPTION``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print OPTION(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _value=&#x27;a&#x27;)</div><div class="insert">+&lt;option value=&quot;a&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/option&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+As in the case of ``INPUT``, web2py make a distinction between &quot;_value&quot; (the value of the OPTION), and &quot;value&quot; (the current value of the enclosing select). If they are equal, the option is &quot;selected&quot;.</div><div class="insert">+</div><div class="insert">+``selected``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print SELECT(&#x27;a&#x27;, &#x27;b&#x27;, value=&#x27;b&#x27;):</div><div class="insert">+&lt;select&gt;</div><div class="insert">+&lt;option value=&quot;a&quot;&gt;a&lt;/option&gt;</div><div class="insert">+&lt;option value=&quot;b&quot; selected=&quot;selected&quot;&gt;b&lt;/option&gt;</div><div class="insert">+&lt;/select&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``P``</div><div class="insert">+``P``:inxx</div><div class="insert">+</div><div class="insert">+This is for tagging a paragraph.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print P(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;p id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/p&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``PRE``</div><div class="insert">+``PRE``:inxx</div><div class="insert">+</div><div class="insert">+Generates a ``&lt;pre&gt;...&lt;/pre&gt;`` tag for displaying pre-formatted text. The ``CODE`` helper is generally preferable for code listings.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print PRE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;pre id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/pre&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``SCRIPT``</div><div class="insert">+``SCRIPT``:inxx</div><div class="insert">+</div><div class="insert">+This is include or link a script, such as JavaScript. The content between the tags is rendered as an HTML comment, for the benefit of really old browsers.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print SCRIPT(&#x27;alert(&quot;hello world&quot;);&#x27;, _type=&#x27;text/javascript&#x27;)</div><div class="insert">+&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--</div><div class="insert">+alert(&quot;hello world&quot;);</div><div class="insert">+//--&gt;&lt;/script&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``SELECT``</div><div class="insert">+``SELECT``:inxx</div><div class="insert">+</div><div class="insert">+Makes a ``&lt;select&gt;...&lt;/select&gt;`` tag. This is used with the ``OPTION`` helper. Those ``SELECT`` arguments that are not ``OPTION`` objects are automatically converted to options.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print SELECT(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;select id=&quot;0&quot; class=&quot;test&quot;&gt;</div><div class="insert">+   &lt;option value=&quot;&amp;lt;hello&amp;gt;&quot;&gt;&amp;lt;hello&amp;gt;&lt;/option&gt;</div><div class="insert">+   &lt;option value=&quot;&amp;lt;b&amp;gt;world&amp;lt;/b&amp;gt;&quot;&gt;&lt;b&gt;world&lt;/b&gt;&lt;/option&gt;</div><div class="insert">+&lt;/select&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``SPAN``</div><div class="insert">+``SPAN``:inxx</div><div class="insert">+</div><div class="insert">+Similar to ``DIV`` but used to tag inline (rather than block) content.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print SPAN(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;span id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/span&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``STYLE``</div><div class="insert">+``STYLE``:inxx</div><div class="insert">+</div><div class="insert">+Similar to script, but used to either include or link CSS code.</div><div class="insert">+Here the CSS is included:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print STYLE(XML(&#x27;body {color: white}&#x27;))</div><div class="insert">+&lt;style&gt;&lt;!--</div><div class="insert">+body { color: white }</div><div class="insert">+//--&gt;&lt;/style&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+and here it is linked:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print STYLE(_src=&#x27;style.css&#x27;)</div><div class="insert">+&lt;style src=&quot;style.css&quot;&gt;&lt;!--</div><div class="insert">+//--&gt;&lt;/style&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TABLE``, ``TR``, ``TD``</div><div class="insert">+``TABLE``:inxx ``TR``:inxx ``TD``:inxx</div><div class="insert">+</div><div class="insert">+These tags (along with the optional ``THEAD``, ``TBODY`` and ``TFOOTER`` helpers) are used to build HTML tables.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TABLE(TR(TD(&#x27;a&#x27;), TD(&#x27;b&#x27;)), TR(TD(&#x27;c&#x27;), TD(&#x27;d&#x27;)))</div><div class="insert">+&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="insert">+``:code</div><div class="insert">+``TR`` expects ``TD`` content; arguments that are not ``TD`` objects are converted automatically.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TABLE(TR(&#x27;a&#x27;, &#x27;b&#x27;), TR(&#x27;c&#x27;, &#x27;d&#x27;))</div><div class="insert">+&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+It is easy to convert a Python array into an HTML table using Python&#x27;s ``*`` function arguments notation, which maps list elements to positional function arguments.</div><div class="insert">+</div><div class="insert">+Here, we will do it line by line:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; table = [[&#x27;a&#x27;, &#x27;b&#x27;], [&#x27;c&#x27;, &#x27;d&#x27;]]</div><div class="insert">+&gt;&gt;&gt; print TABLE(TR(*table[0]), TR(*table[1]))</div><div class="insert">+&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Here we do all lines at once:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; table = [[&#x27;a&#x27;, &#x27;b&#x27;], [&#x27;c&#x27;, &#x27;d&#x27;]]</div><div class="insert">+&gt;&gt;&gt; print TABLE(*[TR(*rows) for rows in table])</div><div class="insert">+&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TBODY``</div><div class="insert">+``TBODY``:inxx</div><div class="insert">+</div><div class="insert">+This is used to tag rows contained in the table body, as opposed to header or footer rows. It is optional.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TBODY(TR(&#x27;&lt;hello&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;tbody id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TEXTAREA``</div><div class="insert">+``TEXTAREA``:inxx</div><div class="insert">+</div><div class="insert">+This helper makes a ``&lt;textarea&gt;...&lt;/textarea&gt;`` tag.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TEXTAREA(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;)</div><div class="insert">+&lt;textarea class=&quot;test&quot; cols=&quot;40&quot; rows=&quot;10&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/textarea&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The only caveat is that its optional &quot;value&quot; overrides its content (inner HTML)</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TEXTAREA(value=&quot;&lt;hello world&gt;&quot;, _class=&quot;test&quot;)</div><div class="insert">+&lt;textarea class=&quot;test&quot; cols=&quot;40&quot; rows=&quot;10&quot;&gt;&amp;lt;hello world&amp;gt;&lt;/textarea&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TFOOT``</div><div class="insert">+``TFOOT``:inxx</div><div class="insert">+</div><div class="insert">+This is used to tag table footer rows.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TFOOT(TR(TD(&#x27;&lt;hello&gt;&#x27;)), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;tfoot id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TH``</div><div class="insert">+``TH``:inxx</div><div class="insert">+</div><div class="insert">+This is used instead of ``TD`` in table headers.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TH(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;th id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/th&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``THEAD``</div><div class="insert">+``THEAD``:inxx</div><div class="insert">+</div><div class="insert">+This is used to tag table header rows.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print THEAD(TR(TH(&#x27;&lt;hello&gt;&#x27;)), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;thead id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;th&gt;&amp;lt;hello&amp;gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TITLE``</div><div class="insert">+``TITLE``:inxx</div><div class="insert">+</div><div class="insert">+This is used to tag the title of a page in an HTML header.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TITLE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;))</div><div class="insert">+&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TR``</div><div class="insert">+``TR``:inxx</div><div class="insert">+</div><div class="insert">+Tags a table row. It should be rendered inside a table and contain ``&lt;td&gt;...&lt;/td&gt;`` tags. ``TR`` arguments that are not ``TD`` objects will be automatically converted.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TR(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;tr id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;world&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``TT``</div><div class="insert">+``TT``:inxx</div><div class="insert">+</div><div class="insert">+Tags text as typewriter (monospaced) text.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print TT(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;tt id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/tt&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``UL``</div><div class="insert">+</div><div class="insert">+Signifies an Unordered List and should contain LI items. If its content is not tagged as LI, UL does it automatically.</div><div class="insert">+</div><div class="insert">+``UL``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print UL(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="insert">+&lt;ul id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;li&gt;&amp;lt;hello&amp;gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+##### ``embed64``</div><div class="insert">+</div><div class="insert">+``embed64(filename=None, file=None, data=None, extension=&#x27;image/gif&#x27;)`` encodes the provided (binary) data into base64.</div><div class="insert">+</div><div class="insert">+filename: if provided, opens and reads this file in &#x27;rb&#x27; mode.</div><div class="insert">+file: if provided, reads this file.</div><div class="insert">+data: if provided, uses the provided data.</div><div class="insert">+</div><div class="insert">+``embed64``:inxx</div><div class="insert">+</div><div class="insert">+##### ``xmlescape``</div><div class="insert">+</div><div class="insert">+``xmlescape(data, quote=True)`` returns an escaped string of the provided data.</div><div class="insert">+</div><div class="insert">+``xmlescape``:inxx</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print xmlescape(&#x27;&lt;hello&gt;&#x27;)</div><div class="insert">+&amp;lt;hello&amp;gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### Custom helpers</div><div class="insert">+</div><div class="insert">+##### ``TAG``</div><div class="insert">+``TAG``:inxx</div><div class="insert">+</div><div class="insert">+Sometimes you need to generate custom XML tags. web2py provides ``TAG``, a universal tag generator.</div><div class="insert">+``</div><div class="insert">+{{=TAG.name(&#x27;a&#x27;, &#x27;b&#x27;, _c=&#x27;d&#x27;)}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+generates the following XML</div><div class="insert">+``</div><div class="insert">+&lt;name c=&quot;d&quot;&gt;ab&lt;/name&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Arguments &quot;a&quot;, &quot;b&quot;, and &quot;d&quot; are automatically escaped; use the ``XML`` helper to suppress this behavior. Using ``TAG`` you can generate HTML/XML tags not already provided by the API. TAGs can be nested, and are serialized with ``str().``</div><div class="insert">+An equivalent syntax is:</div><div class="insert">+``</div><div class="insert">+{{=TAG[&#x27;name&#x27;](&#x27;a&#x27;, &#x27;b&#x27;, c=&#x27;d&#x27;)}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+If the TAG object is created with an empty name, it can be used to concatenate multiple strings and HTML helpers together without inserting them into a surrounding tag, but this use is deprecated. Use the ``CAT`` helper instead.</div><div class="insert">+</div><div class="insert">+Notice that ``TAG`` is an object, and ``TAG.name`` or ``TAG[&#x27;name&#x27;]`` is a function that returns a temporary helper class.</div><div class="insert">+</div><div class="insert">+##### ``MENU``</div><div class="insert">+``MENU``:inxx</div><div class="insert">+</div><div class="insert">+The MENU helper takes a list of lists or of tuples of the form of ``response.menu`` (as described in Chapter 4) and generates a tree-like structure using unordered lists representing the menu. For example:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class="insert">+&lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="insert">+  &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="insert">+  &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class="insert">+&lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="insert">+  &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="insert">+     &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="insert">+     &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="insert">+        &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="insert">+     &lt;/ul&gt;</div><div class="insert">+  &lt;/li&gt;</div><div class="insert">+&lt;/ul&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class="insert">+</div><div class="insert">+The MENU helper takes the following optional arguments:</div><div class="insert">+- ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class="insert">+- ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class="insert">+- ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class="insert">+</div><div class="insert">+``mobile``:inxx</div><div class="insert">+</div><div class="insert">+``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alternative menu representation that increases usability on small mobile devices such as phones.</div><div class="insert">+</div><div class="insert">+Normally the menu is used in a layout with the following syntax:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class="insert">+</div><div class="insert">+### ``BEAUTIFY``</div><div class="insert">+``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class="insert">+``</div><div class="insert">+{{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class="insert">+``:code</div><div class="insert">+``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class="insert">+``</div><div class="insert">+{&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+will render as:</div><div class="insert">+``</div><div class="insert">+&lt;table&gt;</div><div class="insert">+&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;hello&lt;br /&gt;world&lt;/td&gt;&lt;/tr&gt;</div><div class="insert">+&lt;tr&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;1&lt;br /&gt;2&lt;/td&gt;&lt;/tr&gt;</div><div class="insert">+&lt;/table&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+### Server-side &#x27;&#x27;DOM&#x27;&#x27; and parsing</div><div class="insert">+``element``:inxx ``elements``:inxx</div><div class="insert">+</div><div class="insert">+#### ``elements``</div><div class="insert">+</div><div class="insert">+The DIV helper and all derived helpers provide the search methods ``element`` and ``elements``.</div><div class="insert">+</div><div class="insert">+``element`` returns the first child element matching a specified condition (or None if no match).</div><div class="insert">+</div><div class="insert">+``elements`` returns a list of all matching children.</div><div class="insert">+</div><div class="insert">+**element** and **elements** use the same syntax to specify the matching condition, which allows for three possibilities that can be mixed and matched: jQuery-like expressions, match by exact attribute value, match using regular expressions.</div><div class="insert">+</div><div class="insert">+Here is a simple example:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(DIV(DIV(&#x27;a&#x27;, _id=&#x27;target&#x27;,_class=&#x27;abc&#x27;)))</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;div#target&#x27;)</div><div class="insert">+&gt;&gt;&gt; d[0][0] = &#x27;changed&#x27;</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div&gt;&lt;div&gt;&lt;div id=&quot;target&quot; class=&quot;abc&quot;&gt;changed&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The un-named argument of ``elements`` is a string, which may contain: the name of a tag, the id of a tag preceded by a pound symbol, the class preceded by a dot, the explicit value of an attribute in square brackets.</div><div class="insert">+</div><div class="insert">+Here are 4 equivalent ways to search the previous tag by id:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;#target&#x27;)</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;div#target&#x27;)</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;div[id=target]&#x27;)</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;div&#x27;,_id=&#x27;target&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Here are 4 equivalent ways to search the previous tag by class:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;.abc&#x27;)</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;div.abc&#x27;)</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;div[class=abc]&#x27;)</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;div&#x27;,_class=&#x27;abc&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Any attribute can be used to locate an element (not just ``id`` and ``class``), including multiple attributes (the function element can take multiple named arguments), but only the first matching element will be returned.</div><div class="insert">+</div><div class="insert">+Using the jQuery syntax &quot;div#target&quot; it is possible to specify multiple search criteria separated by a space:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;t1&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;span#t1, div.c2&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+or equivalently</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;t1&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;span#t1&#x27;, &#x27;div.c2&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+If the value of an attribute is specified using a name argument, it can be a string or a regular expression:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;test123&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class="insert">+&gt;&gt;&gt; d = a.elements(&#x27;span&#x27;, _id=re.compile(&#x27;test\d{3}&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+A special named argument of the DIV (and derived) helpers is ``find``. It can be used to specify a search value or a search regular expression in the text content of the tag. For example:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class="insert">+&gt;&gt;&gt; d = a.elements(find=&#x27;bcd&#x27;)</div><div class="insert">+&gt;&gt;&gt; print d[0]</div><div class="insert">+&lt;span&gt;abcde&lt;/span&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+or</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class="insert">+&gt;&gt;&gt; d = a.elements(find=re.compile(&#x27;fg\w{3}&#x27;))</div><div class="insert">+&gt;&gt;&gt; print d[0]</div><div class="insert">+&lt;div&gt;fghij&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### ``components``</div><div class="insert">+Here&#x27;s an example of listing all elements in an html string:</div><div class="insert">+``</div><div class="insert">+html = TAG(&#x27;&lt;a&gt;xxx&lt;/a&gt;&lt;b&gt;yyy&lt;/b&gt;&#x27;)</div><div class="insert">+for item in html.components: print item</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### ``parent``</div><div class="insert">+``parent`` returns the parent of the current element.</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class="insert">+&gt;&gt;&gt; d = a.element(&#x27;a&#x27;).parent()</div><div class="insert">+&gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### ``flatten``</div><div class="insert">+</div><div class="insert">+The flatten method recursively serializes the content of the children of a given element into regular text (without tags):</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;this&#x27;, DIV(&#x27;is&#x27;, B(&#x27;a&#x27;))), SPAN(&#x27;test&#x27;))</div><div class="insert">+&gt;&gt;&gt; print a.flatten()</div><div class="insert">+thisisatest</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Flatten can be passed an optional argument, ``render``, i.e. a function that renders/flattens the content using a different protocol. Here is an example to serialize some tags into Markmin wiki syntax:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(H1(&#x27;title&#x27;), P(&#x27;example of a &#x27;, A(&#x27;link&#x27;, _href=&#x27;#test&#x27;)))</div><div class="insert">+&gt;&gt;&gt; from gluon.html import markmin_serializer</div><div class="insert">+&gt;&gt;&gt; print a.flatten(render=markmin_serializer)</div><div class="insert">+## titles</div><div class="insert">+</div><div class="insert">+example of [[a link #test]]</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+At the time of writing we provide ``markmin_serializer`` and ``markdown_serializer``.</div><div class="insert">+</div><div class="insert">+#### Parsing</div><div class="insert">+</div><div class="insert">+The TAG object is also an XML/HTML parser. It can read text and convert into a tree structure of helpers. This allows manipulation using the API above:</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; html = &#x27;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;test&lt;/span&gt;&lt;/p&gt;&#x27;</div><div class="insert">+&gt;&gt;&gt; parsed_html = TAG(html)</div><div class="insert">+&gt;&gt;&gt; parsed_html.element(&#x27;span&#x27;)[0]=&#x27;TEST&#x27;</div><div class="insert">+&gt;&gt;&gt; print parsed_html</div><div class="insert">+&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;TEST&lt;/span&gt;&lt;/p&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+### Page layout</div><div class="insert">+``page layout``:inxx ``layout.html``:inxx ``extent``:inxx ``include``:inxx</div><div class="insert">+</div><div class="insert">+Views can extend and include other views in a tree-like structure.</div><div class="insert">+</div><div class="insert">+For example, we can think of a view &quot;index.html&quot; that extends &quot;layout.html&quot; and includes &quot;body.html&quot;.</div><div class="insert">+At the same time,  &quot;layout.html&quot; may include &quot;header.html&quot; and &quot;footer.html&quot;.</div><div class="insert">+</div><div class="insert">+The root of the tree is what we call a layout view.  Just like any other HTML template file, you can edit it using the web2py administrative interface. The file name &quot;layout.html&quot; is just a convention.</div><div class="insert">+</div><div class="insert">+Here is a minimalist page that extends the &quot;layout.html&quot; view and includes the &quot;page.html&quot; view:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{extend &#x27;layout.html&#x27;}}</div><div class="insert">+&lt;h1&gt;Hello World&lt;/h1&gt;</div><div class="insert">+{{include &#x27;page.html&#x27;}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The extended layout file must contain an ``{{include}}`` directive, something like:</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;</div><div class="insert">+  &lt;head&gt;</div><div class="insert">+    &lt;title&gt;Page Title&lt;/title&gt;</div><div class="insert">+  &lt;/head&gt;</div><div class="insert">+  &lt;body&gt;</div><div class="insert">+    {{include}}</div><div class="insert">+  &lt;/body&gt;</div><div class="insert">+&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+When the view is called, the extended (layout) view is loaded, and the calling view replaces the ``{{include}}`` directive inside the layout. Processing continues recursively until all ``extend`` and ``include`` directives have been processed. The resulting template is then translated into Python code. Note, when an application is bytecode compiled, it is this Python code that is compiled, not the original view files themselves. So, the bytecode compiled version of a given view is a single .pyc file that includes the Python code not just for the original view file, but for its entire tree of extended and included views.</div><div class="insert">+</div><div class="insert">+-------</div><div class="insert">+``extend``, ``include``, ``block`` and ``super`` are special template directives,</div><div class="insert">+not Python commands.</div><div class="insert">+-------</div><div class="insert">+</div><div class="insert">+Any content or code that precedes the ``{{extend ...}}`` directive will be inserted (and therefore executed) before the beginning of the extended view&#x27;s content/code. Although this is not typically used to insert actual HTML content before the extended view&#x27;s content, it can be useful as a means to define variables or functions that you want to make available to the extended view. For example, consider a view &quot;index.html&quot;:</div><div class="insert">+``</div><div class="insert">+{{sidebar_enabled=True}}</div><div class="insert">+{{extend &#x27;layout.html&#x27;}}</div><div class="insert">+&lt;h1&gt;Home Page&lt;/h1&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+and an excerpt from &quot;layout.html&quot;:</div><div class="insert">+``</div><div class="insert">+{{if sidebar_enabled:}}</div><div class="insert">+    &lt;div id=&quot;sidebar&quot;&gt;</div><div class="insert">+        Sidebar Content</div><div class="insert">+    &lt;/div&gt;</div><div class="insert">+{{pass}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Because the ``sidebar_enabled`` assignment in &quot;index.html&quot; comes before the ``extend``, that line gets inserted before the beginning of &quot;layout.html&quot;, making ``sidebar_enabled`` available anywhere within the &quot;layout.html&quot; code (a somewhat more sophisticated version of this is used in the **welcome** app).</div><div class="insert">+</div><div class="insert">+It is also worth pointing out that the variables returned by the controller function are available not only in the function&#x27;s main view, but in all of its extended and included views as well.</div><div class="insert">+</div><div class="insert">+The argument of an ``extend`` or ``include`` (i.e., the extended or included view name) can be a python variable (though not a python expression). However, this imposes a limitation -- views that use variables in ``extend`` or ``include`` statements cannot be bytecode compiled. As noted above, bytecode-compiled views include the entire tree of extended and included views, so the specific extended and included views must be known at compile time, which is not possible if the view names are variables (whose values are not determined until run time). Because bytecode compiling views can provide a significant speed boost, using variables in ``extend`` and ``include`` should generally be avoided if possible.</div><div class="insert">+</div><div class="insert">+In some cases, an alternative to using a variable in an ``include`` is simply to place regular ``{{include ...}}`` directives inside an ``if...else`` block.</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{if some_condition:}}</div><div class="insert">+{{include &#x27;this_view.html&#x27;}}</div><div class="insert">+{{else:}}</div><div class="insert">+{{include &#x27;that_view.html&#x27;}}</div><div class="insert">+{{pass}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+The above code does not present any problem for bytecode compilation because no variables are involved. Note, however, that the bytecode compiled view will actually include the Python code for both &quot;this_view.html&quot; and &quot;that_view.html&quot;, though only the code for one of those views will be executed, depending on the value of ``some_condition``.</div><div class="insert">+</div><div class="insert">+Keep in mind, this only works for ``include`` -- you cannot place ``{{extend ...}}`` directives inside ``if...else`` blocks.</div><div class="insert">+</div><div class="insert">+``response.menu``:inxx ``menu``:inxx ``response.meta``:inxx ``meta``:inxx</div><div class="insert">+</div><div class="insert">+Layouts are used to encapsulate page commonality (headers, footers, menus), and though they are not mandatory, they will make your application easier to write and maintain.  In particular, we suggest writing layouts that take advantage of the following variables that can be set in the controller. Using these well known variables will help make your layouts interchangeable:</div><div class="insert">+``</div><div class="insert">+response.title</div><div class="insert">+response.subtitle</div><div class="insert">+response.meta.author</div><div class="insert">+response.meta.keywords</div><div class="insert">+response.meta.description</div><div class="insert">+response.flash</div><div class="insert">+response.menu</div><div class="insert">+response.files</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Except for ``menu`` and ``files``, these are all strings and their meaning should be obvious.</div><div class="insert">+</div><div class="insert">+``response.menu`` menu is a list of 3-tuples or 4-tuples. The three elements are: the link name, a boolean representing whether the link is active (is the current link), and the URL of the linked page. For example:</div><div class="insert">+``</div><div class="insert">+response.menu = [(&#x27;Google&#x27;, False, &#x27;http://www.google.com&#x27;,[]),</div><div class="insert">+                 (&#x27;Index&#x27;,  True,  URL(&#x27;index&#x27;), [])]</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+``sub-menu``:inxx</div><div class="insert">+The fourth tuple element is an optional sub-menu.</div><div class="insert">+</div><div class="insert">+``response.files`` is a list of CSS and JS files that are needed by your page.</div><div class="insert">+</div><div class="insert">+We also recommend that you use:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{include &#x27;web2py_ajax.html&#x27;}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+in the HTML head, since this will include the jQuery libraries and define some backward-compatible JavaScript functions for special effects and Ajax. &quot;web2py_ajax.html&quot; includes the ``response.meta`` tags in the view, jQuery base, the calendar datepicker, and all required CSS and JS ``response.files``.</div><div class="insert">+</div><div class="insert">+#### Default page layout</div><div class="insert">+``superfish``:inxx ``ez.css``:inxx</div><div class="insert">+</div><div class="insert">+Below is the &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts). Any new application will have a similar default layout:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;!DOCTYPE html&gt;</div><div class="insert">+&lt;head&gt;</div><div class="insert">+  &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="insert">+  &lt;title&gt;{{=response.title or request.application}}&lt;/title&gt;</div><div class="insert">+</div><div class="insert">+  &lt;!-- http://dev.w3.org/html5/markup/meta.name.html --&gt;</div><div class="insert">+  &lt;meta name=&quot;application-name&quot; content=&quot;{{=request.application}}&quot; /&gt;</div><div class="insert">+</div><div class="insert">+  &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/modernizr.custom.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="insert">+</div><div class="insert">+  &lt;!-- include stylesheets --&gt;</div><div class="insert">+  {{</div><div class="insert">+  response.files.append(URL(&#x27;static&#x27;,&#x27;css/skeleton.css&#x27;))</div><div class="insert">+  response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py.css&#x27;))</div><div class="insert">+  response.files.append(URL(&#x27;static&#x27;,&#x27;css/superfish.css&#x27;))</div><div class="insert">+  response.files.append(URL(&#x27;static&#x27;,&#x27;js/superfish.js&#x27;))</div><div class="insert">+  }}</div><div class="insert">+</div><div class="insert">+  {{include &#x27;web2py_ajax.html&#x27;}}</div><div class="insert">+</div><div class="insert">+  &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="insert">+    jQuery(function(){ jQuery(&#x27;ul.sf-menu&#x27;).supersubs({minWidth:12,maxWidth:30,extraWidth:3}).superfish(); });</div><div class="insert">+  &lt;/script&gt;</div><div class="insert">+</div><div class="insert">+  {{</div><div class="insert">+  # using sidebars need to know what sidebar you want to use</div><div class="insert">+  left_sidebar_enabled = globals().get(&#x27;left_sidebar_enabled&#x27;,False)</div><div class="insert">+  right_sidebar_enabled = globals().get(&#x27;right_sidebar_enabled&#x27;,False)</div><div class="insert">+  middle_columns = {0:&#x27;sixteen&#x27;,1:&#x27;twelve&#x27;,2:&#x27;eight&#x27;}[</div><div class="insert">+     (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]</div><div class="insert">+  }}</div><div class="insert">+</div><div class="insert">+&lt;/head&gt;</div><div class="insert">+&lt;body&gt;</div><div class="insert">+  &lt;div class=&quot;wrapper&quot;&gt;&lt;!-- for sticky footer --&gt;</div><div class="insert">+</div><div class="insert">+    &lt;div class=&quot;topbar&quot;&gt;</div><div class="insert">+      &lt;div class=&quot;container&quot;&gt;</div><div class="insert">+        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="insert">+          &lt;div id=&quot;navbar&quot;&gt;</div><div class="insert">+            {{=&#x27;auth&#x27; in globals() and auth.navbar(separators=(&#x27; &#x27;,&#x27; | &#x27;,&#x27;&#x27;))}}</div><div class="insert">+          &lt;/div&gt;</div><div class="insert">+          &lt;div id=&quot;menu&quot;&gt;</div><div class="insert">+            {{=MENU(response.menu,</div><div class="insert">+                    _class=&#x27;mobile-menu&#x27; if is_mobile else &#x27;sf-menu&#x27;,</div><div class="insert">+                    mobile=request.user_agent().is_mobile)}}</div><div class="insert">+          &lt;/div&gt;</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+      &lt;/div&gt;</div><div class="insert">+    &lt;/div&gt;&lt;!-- topbar --&gt;</div><div class="insert">+</div><div class="insert">+    &lt;div class=&quot;flash&quot;&gt;{{=response.flash or &#x27;&#x27;}}&lt;/div&gt;</div><div class="insert">+</div><div class="insert">+    &lt;div class=&quot;header&quot;&gt;</div><div class="insert">+      &lt;div class=&quot;container&quot;&gt;</div><div class="insert">+        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="insert">+          &lt;h1 class=&quot;remove-bottom&quot; style=&quot;margin-top: .5em;&quot;&gt;</div><div class="insert">+          {{=response.title or request.application}}</div><div class="insert">+          &lt;/h1&gt;</div><div class="insert">+          &lt;h5&gt;{{=response.subtitle or &#x27;&#x27;}}&lt;/h5&gt;</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+</div><div class="insert">+        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="insert">+          &lt;div class=&quot;statusbar&quot;&gt;</div><div class="insert">+            {{block statusbar}}</div><div class="insert">+            &lt;span class=&quot;breadcrumbs&quot;&gt;{{=request.function}}&lt;/span&gt;</div><div class="insert">+            {{end}}</div><div class="insert">+          &lt;/div&gt;</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+      &lt;/div&gt;</div><div class="insert">+    &lt;/div&gt;</div><div class="insert">+</div><div class="insert">+    &lt;div class=&quot;main&quot;&gt;</div><div class="insert">+      &lt;div class=&quot;container&quot;&gt;</div><div class="insert">+        {{if left_sidebar_enabled:}}</div><div class="insert">+        &lt;div class=&quot;four columns left-sidebar&quot;&gt;</div><div class="insert">+          {{block left_sidebar}}</div><div class="insert">+          &lt;h3&gt;Left Sidebar&lt;/h3&gt;</div><div class="insert">+          &lt;p&gt;&lt;/p&gt;</div><div class="insert">+          {{end}}</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+        {{pass}}</div><div class="insert">+</div><div class="insert">+        &lt;div class=&quot;{{=middle_columns}} columns center&quot;&gt;</div><div class="insert">+          {{block center}}</div><div class="insert">+          {{include}}</div><div class="insert">+          {{end}}</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+</div><div class="insert">+        {{if right_sidebar_enabled:}}</div><div class="insert">+        &lt;div class=&quot;four columns&quot;&gt;</div><div class="insert">+          {{block right_sidebar}}</div><div class="insert">+          &lt;h3&gt;Right Sidebar&lt;/h3&gt;</div><div class="insert">+          &lt;p&gt;&lt;/p&gt;</div><div class="insert">+          {{end}}</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+        {{pass}}</div><div class="insert">+</div><div class="insert">+      &lt;/div&gt;&lt;!-- container --&gt;</div><div class="insert">+    &lt;/div&gt;&lt;!-- main --&gt;</div><div class="insert">+</div><div class="insert">+    &lt;div class=&quot;push&quot;&gt;&lt;/div&gt;</div><div class="insert">+  &lt;/div&gt;&lt;!-- wrapper --&gt;</div><div class="insert">+</div><div class="insert">+  &lt;div class=&quot;footer&quot;&gt;</div><div class="insert">+    &lt;div class=&quot;container header&quot;&gt;</div><div class="insert">+      &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="insert">+        {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="insert">+        &lt;div class=&quot;footer-content&quot; &gt;</div><div class="insert">+          {{=T(&#x27;Copyright&#x27;)}} &amp;#169; 2011</div><div class="insert">+          &lt;div style=&quot;float: right;&quot;&gt;</div><div class="insert">+            &lt;a href=&quot;http://www.web2py.com/&quot;&gt;</div><div class="insert">+            &lt;img style=&quot;padding-bottom: 0;&quot;</div><div class="insert">+                 src=&quot;{{=URL(&#x27;static&#x27;,&#x27;images/poweredby.png&#x27;)}}&quot;/&gt;</div><div class="insert">+            &lt;/a&gt;</div><div class="insert">+          &lt;/div&gt;</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+        {{end}}</div><div class="insert">+      &lt;/div&gt;</div><div class="insert">+    &lt;/div&gt;&lt;!-- container --&gt;</div><div class="insert">+  &lt;/div&gt;&lt;!-- footer --&gt;</div><div class="insert">+</div><div class="insert">+&lt;/body&gt;</div><div class="insert">+&lt;/html&gt;</div><div class="insert">+</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+There are a few features of this default layout that make it very easy to use and customize:</div><div class="insert">+</div><div class="insert">+- It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class="insert">+- It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class="insert">+- It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class="insert">+- It uses a modified version of &quot;skeleton&quot; ``skeleton``:cite a library for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class="insert">+- It uses &quot;superfish.js&quot; ``superfish``:cite for dynamic cascading menus. There is an explicit script to activate the superfish cascading menu and it can be removed if not necessary.</div><div class="insert">+- The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class="insert">+- The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class="insert">+- ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class="insert">+- By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class="insert">+- It uses the following classes: header, main, footer</div><div class="insert">+- It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class="insert">+</div><div class="insert">+Views can turn on and fill sidebars as follows:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{left_sidebar_enable=True}}</div><div class="insert">+{{extend &#x27;layout.html&#x27;}}</div><div class="insert">+</div><div class="insert">+This text goes in center</div><div class="insert">+</div><div class="insert">+{{block left_sidebar}}</div><div class="insert">+This text goes in sidebar</div><div class="insert">+{{end}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+#### Customizing the default layout</div><div class="insert">+</div><div class="insert">+``CSS``:inxx</div><div class="insert">+</div><div class="insert">+Customizing the default layout without editing is very easy because the CSS files are documented:</div><div class="insert">+</div><div class="insert">+- &quot;bootstrap.min.css&quot; contains the Twitter Boostrap CSS style ``bootstrap``:cite ``Bootstrap``:inxx</div><div class="insert">+- &quot;web2py.css&quot; contains web2py specific styles</div><div class="insert">+</div><div class="insert">+To change colors and background images,</div><div class="insert">+try append the following code to layout.html header:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;style&gt;</div><div class="insert">+body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class="insert">+a { color: #349C01; }</div><div class="insert">+.header h1 { color: #349C01; }</div><div class="insert">+.header h2 { color: white; font-style: italic; font-size: 14px;}</div><div class="insert">+.statusbar { background: #333333; border-bottom: 5px #349C01 solid; }</div><div class="insert">+.statusbar a { color: white; }</div><div class="insert">+.footer { border-top: 5px #349C01 solid; }</div><div class="insert">+&lt;/style&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Of course you can also completely replace the &quot;layout.html&quot; and &quot;web2py.css&quot; files with your own.</div><div class="insert">+</div><div class="insert">+#### Mobile development</div><div class="insert">+</div><div class="insert">+The default layout.html is designed to be friendly to mobile devices but that is not enough. One may need to use different views when a page is visited by a mobile device.</div><div class="insert">+</div><div class="insert">+To make developing for desktop and mobile devices easier, web2py includes the ``@mobilize`` decorator. This decorator is applied to actions that should have a normal view and a mobile view. This is demonstrated here:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+from gluon.contrib.user_agent_parser import mobilize</div><div class="insert">+@mobilize</div><div class="insert">+def index():</div><div class="insert">+   return dict()</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+Notice that the decorator must be imported before using it in a controller.</div><div class="insert">+When the &quot;index&quot; function is called from a regular browser (desktop computer), web2py will render the returned dictionary using the view &quot;[controller]/index.html&quot;. However, when it is called by a mobile device, the dictionary will be rendered by &quot;[controller]/index.mobile.html&quot;. Notice that mobile views have the &quot;mobile.html&quot; extension.</div><div class="insert">+</div><div class="insert">+Alternatively you can apply the following logic to make all views mobile friendly:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+if request.user_agent().is_mobile:</div><div class="insert">+    response.view.replace(&#x27;.html&#x27;,&#x27;.mobile.html&#x27;)</div><div class="insert">+``</div><div class="insert">+</div><div class="insert">+The task of creating the &quot;*.mobile.html&quot; views is left to the developer but we strongly suggest using the &quot;jQuery Mobile&quot; plugin which makes the task very easy.</div><div class="insert">+</div><div class="insert">+### Functions in views</div><div class="insert">+</div><div class="insert">+Consider this &quot;layout.html&quot;:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;</div><div class="insert">+  &lt;body&gt;</div><div class="insert">+    {{include}}</div><div class="insert">+    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="insert">+      {{if &#x27;mysidebar&#x27; in globals():}}{{mysidebar()}}{{else:}}</div><div class="insert">+        my default sidebar</div><div class="insert">+      {{pass}}</div><div class="insert">+    &lt;/div&gt;</div><div class="insert">+  &lt;/body&gt;</div><div class="insert">+&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+and this extending view</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{def mysidebar():}}</div><div class="insert">+my new sidebar!!!</div><div class="insert">+{{return}}</div><div class="insert">+{{extend &#x27;layout.html&#x27;}}</div><div class="insert">+Hello World!!!</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Notice the function is defined before the ``{{extend...}}`` statement -- this results in the function being created before the &quot;layout.html&quot; code is executed, so the function can be called anywhere within &quot;layout.html&quot;, even before the ``{{include}}``. Also notice the function is included in the extended view without the ``=`` prefix.</div><div class="insert">+</div><div class="insert">+The code generates the following output:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;</div><div class="insert">+  &lt;body&gt;</div><div class="insert">+    Hello World!!!</div><div class="insert">+    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="insert">+        my new sidebar!!!</div><div class="insert">+    &lt;/div&gt;</div><div class="insert">+  &lt;/body&gt;</div><div class="insert">+&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+Notice that the function is defined in HTML (although it could also contain Python code) so that ``response.write`` is used to write its content (the function does not return the content). This is why the layout calls the view function using ``{{mysidebar()}}`` rather than ``{{=mysidebar()}}``. Functions defined in this way can take arguments.</div><div class="insert">+</div><div class="insert">+### Blocks in views</div><div class="insert">+``block``:inxx</div><div class="insert">+</div><div class="insert">+Another way to make a view more modular is by using ``{{block...}}s`` and this mechanism is an alternative to the mechanism discussed in the previous section.</div><div class="insert">+</div><div class="insert">+Consider this &quot;layout.html&quot;:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;</div><div class="insert">+  &lt;body&gt;</div><div class="insert">+    {{include}}</div><div class="insert">+    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="insert">+      {{block mysidebar}}</div><div class="insert">+        my default sidebar</div><div class="insert">+      {{end}}</div><div class="insert">+    &lt;/div&gt;</div><div class="insert">+  &lt;/body&gt;</div><div class="insert">+&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+and this extending view</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{extend &#x27;layout.html&#x27;}}</div><div class="insert">+Hello World!!!</div><div class="insert">+{{block mysidebar}}</div><div class="insert">+my new sidebar!!!</div><div class="insert">+{{end}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+It generates the following output:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;</div><div class="insert">+  &lt;body&gt;</div><div class="insert">+    Hello World!!!</div><div class="insert">+    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="insert">+        my new sidebar!!!</div><div class="insert">+    &lt;/div&gt;</div><div class="insert">+  &lt;/body&gt;</div><div class="insert">+&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+You can have many blocks, and if a block is present in the extended view but not in the extending view, the content of the extended view is used. Also, notice that unlike with functions, it is not necessary to define blocks before the ``{{extend ...}}`` -- even if defined after the ``extend``, they can be used to make substitutions anywhere in the extended view.</div><div class="insert">+</div><div class="insert">+``super``:inxx</div><div class="insert">+</div><div class="insert">+Inside a block, you can use the expression ``{{super}}`` to include the content of the parent. For example, if we replace the above extending view with:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+{{extend &#x27;layout.html&#x27;}}</div><div class="insert">+Hello World!!!</div><div class="insert">+{{block mysidebar}}</div><div class="insert">+{{super}}</div><div class="insert">+my new sidebar!!!</div><div class="insert">+{{end}}</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+we get:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&lt;html&gt;</div><div class="insert">+  &lt;body&gt;</div><div class="insert">+    Hello World!!!</div><div class="insert">+    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="insert">+        my default sidebar</div><div class="insert">+        my new sidebar!!!</div><div class="insert">+    &lt;/div&gt;</div><div class="insert">+  &lt;/body&gt;</div><div class="insert">+&lt;/html&gt;</div><div class="insert">+``:code</div><div class="insert">+</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">-## The views</div><div class="delete">-``views``:inxx ``template language``:inxx ``HTML``:inxx</div><div class="delete">-</div><div class="delete">-web2py uses Python for its models, controllers, and views, although it uses a slightly modified Python syntax in the views to allow more readable code without imposing any restrictions on proper Python usage.</div><div class="delete">-</div><div class="delete">-The purpose of a view is to embed code (Python) in an HTML document. In general, this poses some problems:</div><div class="delete">-- How should embedded code be escaped?</div><div class="delete">-- Should indenting be based on Python or HTML rules?</div><div class="delete">-</div><div class="delete">-web2py uses ``{{ ... }}`` to escape Python code embedded in HTML. The advantage of using curly brackets instead of angle brackets is that it&#x27;s transparent to all common HTML editors. This allows the developer to use those editors to create web2py views.</div><div class="delete">-</div><div class="delete">-Since the developer is embedding Python code into HTML, the document should be indented according to HTML rules, and not Python rules. Therefore, we allow unindented Python inside the ``{{ ... }}`` tags. Since Python normally uses indentation to delimit blocks of code, we need a different way to delimit them; this is why the web2py template language makes use of the Python keyword ``pass``.</div><div class="delete">-</div><div class="delete">-A code block starts with a line ending with a colon and ends with a line beginning with ``pass``. The keyword ``pass`` is not necessary when the end of the block is obvious from the context.</div><div class="delete">-</div><div class="delete">-Here is an example:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{</div><div class="delete">-if i == 0:</div><div class="delete">-response.write(&#x27;i is 0&#x27;)</div><div class="delete">-else:</div><div class="delete">-response.write(&#x27;i is not 0&#x27;)</div><div class="delete">-pass</div><div class="delete">-}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Note that ``pass`` is a Python keyword, not a web2py keyword. Some Python editors, such as Emacs, use the keyword ``pass`` to signify the division of blocks and use it to re-indent code automatically.</div><div class="delete">-</div><div class="delete">-The web2py template language does exactly the same. When it finds something like:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;&lt;body&gt;</div><div class="delete">-{{for x in range(10):}}{{=x}}hello&lt;br /&gt;{{pass}}</div><div class="delete">-&lt;/body&gt;&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-it translates it into a program:</div><div class="delete">-``</div><div class="delete">-response.write(&quot;&quot;&quot;&lt;html&gt;&lt;body&gt;&quot;&quot;&quot;, escape=False)</div><div class="delete">-for x in range(10):</div><div class="delete">-    response.write(x)</div><div class="delete">-    response.write(&quot;&quot;&quot;hello&lt;br /&gt;&quot;&quot;&quot;, escape=False)</div><div class="delete">-response.write(&quot;&quot;&quot;&lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;, escape=False)</div><div class="delete">-``:code</div><div class="delete">-``response.write`` writes to the ``response.body``.</div><div class="delete">-</div><div class="delete">-When there is an error in a web2py view, the error report shows the generated view code, not the actual view as written by the developer. This helps the developer debug the code by highlighting the actual code that is executed (which is something that can be debugged with an HTML editor or the DOM inspector of the browser).</div><div class="delete">-</div><div class="delete">-Also note that:</div><div class="delete">-``</div><div class="delete">-{{=x}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-generates</div><div class="delete">-``response.write``:inxx ``escape``:inxx</div><div class="delete">-``</div><div class="delete">-response.write(x)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Variables injected into the HTML in this way are escaped by default.</div><div class="delete">-The escaping is ignored if ``x`` is an ``XML`` object, even if escape is set to ``True``.</div><div class="delete">-</div><div class="delete">-Here is an example that introduces the ``H1`` helper:</div><div class="delete">-``</div><div class="delete">-{{=H1(i)}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-which is translated to:</div><div class="delete">-``</div><div class="delete">-response.write(H1(i))</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-upon evaluation, the ``H1`` object and its components are recursively serialized, escaped and written to the response body. The tags generated by ``H1`` and inner HTML are not escaped. This mechanism guarantees that all text --- and only text --- displayed on the web page is always escaped, thus preventing XSS vulnerabilities. At the same time, the code is simple and easy to debug.</div><div class="delete">-</div><div class="delete">-The method ``response.write(obj, escape=True)`` takes two arguments, the object to be written and whether it has to be escaped (set to ``True`` by default). If ``obj`` has an ``.xml()`` method, it is called and the result written to the response body (the ``escape`` argument is ignored). Otherwise it uses the object&#x27;s ``__str__`` method to serialize it and, if the escape argument is ``True``, escapes it. All built-in helper objects (``H1`` in the example) are objects that know how to serialize themselves via the ``.xml()`` method.</div><div class="delete">-</div><div class="delete">-This is all done transparently. You never need to (and never should) call the ``response.write`` method explicitly.</div><div class="delete">-</div><div class="delete">-### Basic syntax</div><div class="delete">-</div><div class="delete">-The web2py template language supports all Python control structures. Here we provide some examples of each of them. They can be nested according to usual programming practice.</div><div class="delete">-</div><div class="delete">-#### ``for...in``</div><div class="delete">-``for``:inxx</div><div class="delete">-</div><div class="delete">-In templates you can loop over any iterable object:</div><div class="delete">-``</div><div class="delete">-{{items = [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]}}</div><div class="delete">-&lt;ul&gt;</div><div class="delete">-{{for item in items:}}&lt;li&gt;{{=item}}&lt;/li&gt;{{pass}}</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-which produces:</div><div class="delete">-``</div><div class="delete">-&lt;ul&gt;</div><div class="delete">-&lt;li&gt;a&lt;/li&gt;</div><div class="delete">-&lt;li&gt;b&lt;/li&gt;</div><div class="delete">-&lt;li&gt;c&lt;/li&gt;</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Here ``item`` is any iterable object such as a Python list, Python tuple, or Rows object, or any object that is implemented as an iterator. The elements displayed are first serialized and escaped.</div><div class="delete">-</div><div class="delete">-#### ``while``</div><div class="delete">-``while``:inxx</div><div class="delete">-</div><div class="delete">-You can create a loop using the while keyword:</div><div class="delete">-``</div><div class="delete">-{{k = 3}}</div><div class="delete">-&lt;ul&gt;</div><div class="delete">-{{while k &gt; 0:}}&lt;li&gt;{{=k}}{{k = k - 1}}&lt;/li&gt;{{pass}}</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-which produces:</div><div class="delete">-``</div><div class="delete">-&lt;ul&gt;</div><div class="delete">-&lt;li&gt;3&lt;/li&gt;</div><div class="delete">-&lt;li&gt;2&lt;/li&gt;</div><div class="delete">-&lt;li&gt;1&lt;/li&gt;</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### ``if...elif...else``</div><div class="delete">-``if``:inxx ``elif``:inxx ``else``:inxx</div><div class="delete">-</div><div class="delete">-You can use conditional clauses:</div><div class="delete">-``</div><div class="delete">-{{</div><div class="delete">-import random</div><div class="delete">-k = random.randint(0, 100)</div><div class="delete">-}}</div><div class="delete">-&lt;h2&gt;</div><div class="delete">-{{=k}}</div><div class="delete">-{{if k % 2:}}is odd{{else:}}is even{{pass}}</div><div class="delete">-&lt;/h2&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-which produces:</div><div class="delete">-``</div><div class="delete">-&lt;h2&gt;</div><div class="delete">-45 is odd</div><div class="delete">-&lt;/h2&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Since it is obvious that ``else`` closes the first ``if`` block, there is no need for a ``pass`` statement, and using one would be incorrect. However, you must explicitly close the ``else`` block with a ``pass``.</div><div class="delete">-</div><div class="delete">-Recall that in Python &quot;else if&quot; is written ``elif`` as in the following example:</div><div class="delete">-``</div><div class="delete">-{{</div><div class="delete">-import random</div><div class="delete">-k = random.randint(0, 100)</div><div class="delete">-}}</div><div class="delete">-&lt;h2&gt;</div><div class="delete">-{{=k}}</div><div class="delete">-{{if k % 4 == 0:}}is divisible by 4</div><div class="delete">-{{elif k % 2 == 0:}}is even</div><div class="delete">-{{else:}}is odd</div><div class="delete">-{{pass}}</div><div class="delete">-&lt;/h2&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-It produces:</div><div class="delete">-``</div><div class="delete">-&lt;h2&gt;</div><div class="delete">-64 is divisible by 4</div><div class="delete">-&lt;/h2&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### ``try...except...else...finally``</div><div class="delete">-``try``:inxx ``except``:inxx ``else``:inxx ``finally``:inxx</div><div class="delete">-</div><div class="delete">-It is also possible to use ``try...except`` statements in views with one caveat. Consider the following example:</div><div class="delete">-``</div><div class="delete">-{{try:}}</div><div class="delete">-Hello {{= 1 / 0}}</div><div class="delete">-{{except:}}</div><div class="delete">-division by zero</div><div class="delete">-{{else:}}</div><div class="delete">-no division by zero</div><div class="delete">-{{finally}}</div><div class="delete">-&lt;br /&gt;</div><div class="delete">-{{pass}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-It will produce the following output:</div><div class="delete">-``</div><div class="delete">-Hello</div><div class="delete">-division by zero</div><div class="delete">-&lt;br /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-This example illustrates that all output generated before an exception occurs is rendered (including output that preceded the exception) inside the try block. &quot;Hello&quot; is written because it precedes the exception.</div><div class="delete">-</div><div class="delete">-#### ``def...return``</div><div class="delete">-``def``:inxx ``return``:inxx</div><div class="delete">-</div><div class="delete">-The web2py template language allows the developer to define and implement functions that can return any Python object or a text/html string. Here we consider two examples:</div><div class="delete">-``</div><div class="delete">-{{def itemize1(link): return LI(A(link, _href=&quot;http://&quot; + link))}}</div><div class="delete">-&lt;ul&gt;</div><div class="delete">-{{=itemize1(&#x27;www.google.com&#x27;)}}</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-produces the following output:</div><div class="delete">-``</div><div class="delete">-&lt;ul&gt;</div><div class="delete">-&lt;li&gt;&lt;a href=&quot;http:/www.google.com&quot;&gt;www.google.com&lt;/a&gt;&lt;/li&gt;</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The function ``itemize1`` returns a helper object that is inserted at the location where the function is called.</div><div class="delete">-</div><div class="delete">-Consider now the following code:</div><div class="delete">-``</div><div class="delete">-{{def itemize2(link):}}</div><div class="delete">-&lt;li&gt;&lt;a href=&quot;http://{{=link}}&quot;&gt;{{=link}}&lt;/a&gt;&lt;/li&gt;</div><div class="delete">-{{return}}</div><div class="delete">-&lt;ul&gt;</div><div class="delete">-{{itemize2(&#x27;www.google.com&#x27;)}}</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-It produces exactly the same output as above. In this case, the function ``itemize2`` represents a piece of HTML that is going to replace the web2py tag where the function is called. Notice that there is no &#x27;=&#x27; in front of the call to ``itemize2``, since the function does not return the text, but it writes it directly into the response.</div><div class="delete">-</div><div class="delete">-There is one caveat: functions defined inside a view must terminate with a return statement, or the automatic indentation will fail.</div><div class="delete">-</div><div class="delete">-### HTML helpers</div><div class="delete">-``helpers``:inxx</div><div class="delete">-</div><div class="delete">-Consider the following code in a view:</div><div class="delete">-``</div><div class="delete">-{{=DIV(&#x27;this&#x27;, &#x27;is&#x27;, &#x27;a&#x27;, &#x27;test&#x27;, _id=&#x27;123&#x27;, _class=&#x27;myclass&#x27;)}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-it is rendered as:</div><div class="delete">-``</div><div class="delete">-&lt;div id=&quot;123&quot; class=&quot;myclass&quot;&gt;thisisatest&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-``DIV`` is a helper class, i.e., something that can be used to build HTML programmatically. It corresponds to the HTML ``&lt;div&gt;`` tag.</div><div class="delete">-</div><div class="delete">-Positional arguments are interpreted as objects contained between the open and close tags. Named arguments that start with an underscore are interpreted as HTML tag attributes (without the underscore). Some helpers also have named arguments that do not start with underscore; these arguments are tag-specific.</div><div class="delete">-</div><div class="delete">-Instead of a set of unnamed arguments, a helper can also take a single list or tuple as its set of components using the ``*`` notation and it can take a single dictionary as its set of attributes using the ``**``, for example:</div><div class="delete">-``</div><div class="delete">-{{</div><div class="delete">-contents = [&#x27;this&#x27;,&#x27;is&#x27;,&#x27;a&#x27;,&#x27;test&#x27;]</div><div class="delete">-attributes = {&#x27;_id&#x27;:&#x27;123&#x27;, &#x27;_class&#x27;:&#x27;myclass&#x27;}</div><div class="delete">-=DIV(*contents,**attributes)</div><div class="delete">-}}</div><div class="delete">-``:code</div><div class="delete">-(produces the same output as before).</div><div class="delete">-</div><div class="delete">-The following set of helpers:</div><div class="delete">-</div><div class="delete">-``A``,  ``B``,  ``BEAUTIFY``,  ``BODY``,  ``BR``,  ``CAT``,  ``CENTER``,  ``CODE``,  ``COL``, ``COLGROUP``, ``DIV``,  ``EM``,  ``EMBED``,  ``FIELDSET``,  ``FORM``,  ``H1``,  ``H2``,  ``H3``,  ``H4``,  ``H5``,  ``H6``,  ``HEAD``,  ``HR``,  ``HTML``,  ``I``,  ``IFRAME``,  ``IMG``,  ``INPUT``,  ``LABEL``,  ``LEGEND``,  ``LI``,  ``LINK``,  ``MARKMIN``,  ``MENU``,  ``META``,  ``OBJECT``,  ``ON``,  ``OL``,  ``OPTGROUP``,  ``OPTION``,  ``P``,  ``PRE``,  ``SCRIPT``,  ``SELECT``,  ``SPAN``,  ``STYLE``,  ``TABLE``,  ``TAG``,  ``TBODY``,  ``TD``,  ``TEXTAREA``,  ``TFOOT``,  ``TH``,  ``THEAD``,  ``TITLE``,  ``TR``,  ``TT``, ``UL``,   ``URL``,  ``XHTML``,  ``XML``,  ``embed64``,  ``xmlescape``</div><div class="delete">-</div><div class="delete">-can be used to build complex expressions that can then be serialized to XML``xml:w``:cite ``xml:o``:cite. For example:</div><div class="delete">-``</div><div class="delete">-{{=DIV(B(I(&quot;hello &quot;, &quot;&lt;world&gt;&quot;))), _class=&quot;myclass&quot;)}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-is rendered:</div><div class="delete">-``</div><div class="delete">-&lt;div class=&quot;myclass&quot;&gt;&lt;b&gt;&lt;i&gt;hello &amp;lt;world&amp;gt;&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Helpers can also be serialized into strings, equivalently, with the ``__str__`` and the ``xml`` methods:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print str(DIV(&quot;hello world&quot;))</div><div class="delete">-&lt;div&gt;hello world&lt;/div&gt;</div><div class="delete">-&gt;&gt;&gt; print DIV(&quot;hello world&quot;).xml()</div><div class="delete">-&lt;div&gt;hello world&lt;/div&gt;</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-``Document Object Model (DOM)``:inxx</div><div class="delete">-The helpers mechanism in web2py is more than a system to generate HTML without concatenating strings. It provides a server-side representation of the Document Object Model (DOM).</div><div class="delete">-</div><div class="delete">-Components of helpers can be referenced via their position, and helpers act as lists with respect to their components:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, &#x27;b&#x27;), &#x27;c&#x27;)</div><div class="delete">-&gt;&gt;&gt; print a</div><div class="delete">-&lt;div&gt;&lt;span&gt;ab&lt;/span&gt;c&lt;/div&gt;</div><div class="delete">-&gt;&gt;&gt; del a[1]</div><div class="delete">-&gt;&gt;&gt; a.append(B(&#x27;x&#x27;))</div><div class="delete">-&gt;&gt;&gt; a[0][0] = &#x27;y&#x27;</div><div class="delete">-&gt;&gt;&gt; print a</div><div class="delete">-&lt;div&gt;&lt;span&gt;yb&lt;/span&gt;&lt;b&gt;x&lt;/b&gt;&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Attributes of helpers can be referenced by name, and helpers act as dictionaries with respect to their attributes:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, &#x27;b&#x27;), &#x27;c&#x27;)</div><div class="delete">-&gt;&gt;&gt; a[&#x27;_class&#x27;] = &#x27;s&#x27;</div><div class="delete">-&gt;&gt;&gt; a[0][&#x27;_class&#x27;] = &#x27;t&#x27;</div><div class="delete">-&gt;&gt;&gt; print a</div><div class="delete">-&lt;div class=&quot;s&quot;&gt;&lt;span class=&quot;t&quot;&gt;ab&lt;/span&gt;c&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Note, the complete set of components can be accessed via a list called ``a.components``, and the complete set of attributes can be accessed via a dictionary called ``a.attributes``. So, ``a[i]`` is equivalent to ``a.components[i]`` when ``i`` is an integer, and ``a[s]`` is equivalent to ``a.attributes[s]`` when ``s`` is a string.</div><div class="delete">-</div><div class="delete">-Notice that helper attributes are passed as keyword arguments to the helper. In some cases, however, attribute names include special characters that are not allowed in Python identifiers (e.g., hyphens) and therefore cannot be used as keyword argument names. For example:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-DIV(&#x27;text&#x27;, _data-role=&#x27;collapsible&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-will not work because &quot;_data-role&quot; includes a hyphen, which will produce a Python syntax error.</div><div class="delete">-</div><div class="delete">-In such cases, you can instead pass the attributes as a dictionary and make use of Python&#x27;s ``**`` function arguments notation, which map a dictionary of (key:value) pairs into a set of keyword arguments:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print DIV(&#x27;text&#x27;, **{&#x27;_data-role&#x27;: &#x27;collapsible&#x27;})</div><div class="delete">-&lt;div data-role=&quot;collapsible&quot;&gt;text&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-You can also dynamically create special TAGs:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TAG[&#x27;soap:Body&#x27;](&#x27;whatever&#x27;,**{&#x27;_xmlns:m&#x27;:&#x27;http://www.example.org&#x27;})</div><div class="delete">-&lt;soap:Body xmlns:m=&quot;http://www.example.org&quot;&gt;whatever&lt;/soap:Body&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### ``XML``</div><div class="delete">-``XML``:inxx</div><div class="delete">-``XML`` is an object used to encapsulate text that should not be escaped. The text may or may not contain valid XML. For example, it could contain JavaScript.</div><div class="delete">-</div><div class="delete">-The text in this example is escaped:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print DIV(&quot;&lt;b&gt;hello&lt;/b&gt;&quot;)</div><div class="delete">-&amp;lt;b&amp;gt;hello&amp;lt;/b&amp;gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-by using ``XML`` you can prevent escaping:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print DIV(XML(&quot;&lt;b&gt;hello&lt;/b&gt;&quot;))</div><div class="delete">-&lt;b&gt;hello&lt;/b&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Sometimes you want to render HTML stored in a variable, but the HTML may contain unsafe tags such as scripts:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print XML(&#x27;&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;&#x27;)</div><div class="delete">-&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Un-escaped executable input such as this (for example, entered in the body of a comment in a blog) is unsafe, because it can be used to generate Cross Site Scripting (XSS) attacks against other visitors to the page.</div><div class="delete">-</div><div class="delete">-``sanitize``:inxx</div><div class="delete">-The web2py ``XML`` helper can sanitize our text to prevent injections and escape all tags except those that you explicitly allow. Here is an example:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print XML(&#x27;&lt;script&gt;alert(&quot;unsafe!&quot;)&lt;/script&gt;&#x27;, sanitize=True)</div><div class="delete">-&amp;lt;script&amp;gt;alert(&amp;quot;unsafe!&amp;quot;)&amp;lt;/script&amp;gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The ``XML`` constructors, by default, consider the content of some tags and some of their attributes safe. You can override the defaults using the optional ``permitted_tags`` and ``allowed_attributes`` arguments. Here are the default values of the optional arguments of the ``XML`` helper.</div><div class="delete">-``</div><div class="delete">-XML(text, sanitize=False,</div><div class="delete">-    permitted_tags=[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;blockquote&#x27;, &#x27;br/&#x27;, &#x27;i&#x27;, &#x27;li&#x27;,</div><div class="delete">-       &#x27;ol&#x27;, &#x27;ul&#x27;, &#x27;p&#x27;, &#x27;cite&#x27;, &#x27;code&#x27;, &#x27;pre&#x27;, &#x27;img/&#x27;],</div><div class="delete">-    allowed_attributes={&#x27;a&#x27;:[&#x27;href&#x27;, &#x27;title&#x27;],</div><div class="delete">-       &#x27;img&#x27;:[&#x27;src&#x27;, &#x27;alt&#x27;], &#x27;blockquote&#x27;:[&#x27;type&#x27;]})</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### Built-in helpers</div><div class="delete">-</div><div class="delete">-##### ``A``</div><div class="delete">-</div><div class="delete">-This helper is used to build links.</div><div class="delete">-</div><div class="delete">-``A``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print A(&#x27;&lt;click&gt;&#x27;, XML(&#x27;&lt;b&gt;me&lt;/b&gt;&#x27;),</div><div class="delete">-            _href=&#x27;http://www.web2py.com&#x27;)</div><div class="delete">-&lt;a href=&#x27;http://www.web2py.com&#x27;&gt;&amp;lt;click&amp;gt;&lt;b&gt;me/b&gt;&lt;/a&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Instead of ``_href`` you can pass the URL using the ``callback`` argument. For example in a view:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;))}}</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-and the effect of pressing the link will be an ajax call to &quot;myaction&quot; instead of a redirection.</div><div class="delete">-In this case, optionally you can specify two more arguments: ``target`` and ``delete``:</div><div class="delete">-``</div><div class="delete">-{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;), target=&quot;t&quot;)}}</div><div class="delete">-&lt;div id=&quot;t&quot;&gt;&lt;div&gt;</div><div class="delete">-``</div><div class="delete">-and the response of the ajax callback will be stored in the DIV with id equal to &quot;t&quot;.</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;div id=&quot;b&quot;&gt;{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;), delete=&#x27;div#b&quot;)}}&lt;/div&gt;</div><div class="delete">-``</div><div class="delete">-and upon response, the closest tag matching &quot;div#b&quot; will be deleted. In this case, the button will be deleted.</div><div class="delete">-A typical application is:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{=A(&#x27;click me&#x27;, callback=URL(&#x27;myaction&#x27;), delete=&#x27;tr&quot;)}}</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-in a table. Pressing the button will perform the callback and delete the table row.</div><div class="delete">-</div><div class="delete">-``callback`` and ``delete`` can be combined.</div><div class="delete">-</div><div class="delete">-The A helper takes a special argument called ``cid``. It works as follows:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{=A(&#x27;linked page&#x27;, _href=&#x27;http://example.com&#x27;, cid=&#x27;myid&#x27;)}}</div><div class="delete">-&lt;div id=&quot;myid&quot;&gt;&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-and a click on the link causes the content to be loaded in the div. This is similar but more powerful than the above syntax since it is designed to refresh page components. We discuss applications of ``cid`` in more detail in Chapter 12, in the context of components.</div><div class="delete">-</div><div class="delete">-These ajax features require jQuery and &quot;static/js/web2py_ajax.js&quot;, which are automatically included by placing ``{{include &#x27;web2py_ajax.html&#x27;}}`` in the layout head. &quot;views/web2py_ajax.html&quot; defines some variables based on ``request`` and includes all necessary js and css files.</div><div class="delete">-</div><div class="delete">-</div><div class="delete">-##### ``B``</div><div class="delete">-``B``:inxx</div><div class="delete">-</div><div class="delete">-This helper makes its contents bold.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print B(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;i&gt;world&lt;/i&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;b id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;i&gt;world&lt;/i&gt;&lt;/b&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``BODY``</div><div class="delete">-``BODY``:inxx</div><div class="delete">-This helper makes the body of a page.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _bgcolor=&#x27;red&#x27;)</div><div class="delete">-&lt;body bgcolor=&quot;red&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``BR``</div><div class="delete">-``BR``:inxx</div><div class="delete">-</div><div class="delete">-This helper creates a line break.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print BR()</div><div class="delete">-&lt;br /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``CAT`` (1.98.1 and up)</div><div class="delete">-``CAT``:inxx</div><div class="delete">-</div><div class="delete">-This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class="delete">-Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``CENTER``</div><div class="delete">-``CENTER``:inxx</div><div class="delete">-</div><div class="delete">-This helper centers its content.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class="delete">-&gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``CODE``</div><div class="delete">-``CODE``:inxx</div><div class="delete">-</div><div class="delete">-This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class="delete">-</div><div class="delete">-Here is an example of highlighting sections of Python code.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print CODE(&#x27;print &quot;hello&quot;&#x27;, language=&#x27;python&#x27;).xml()</div><div class="delete">-&lt;table&gt;&lt;tr valign=&quot;top&quot;&gt;&lt;td style=&quot;width:40px; text-align: right;&quot;&gt;&lt;pre style=&quot;</div><div class="delete">-        font-size: 11px;</div><div class="delete">-        font-family: Bitstream Vera Sans Mono,monospace;</div><div class="delete">-        background-color: transparent;</div><div class="delete">-            margin: 0;</div><div class="delete">-            padding: 5px;</div><div class="delete">-            border: none;</div><div class="delete">-        background-color: #E0E0E0;</div><div class="delete">-        color: #A0A0A0;</div><div class="delete">-    &quot;&gt;1.&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre style=&quot;</div><div class="delete">-        font-size: 11px;</div><div class="delete">-        font-family: Bitstream Vera Sans Mono,monospace;</div><div class="delete">-        background-color: transparent;</div><div class="delete">-            margin: 0;</div><div class="delete">-            padding: 5px;</div><div class="delete">-            border: none;</div><div class="delete">-            overflow: auto;</div><div class="delete">-    &quot;&gt;&lt;span style=&quot;color:#185369; font-weight: bold&quot;&gt;print &lt;/span&gt;</div><div class="delete">-    &lt;span style=&quot;color: #FF9966&quot;&gt;&quot;hello&quot;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="delete">-&lt;/table&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Here is a similar example for HTML</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print CODE(</div><div class="delete">-&gt;&gt;&gt;   &#x27;&lt;html&gt;&lt;body&gt;{{=request.env.remote_add}}&lt;/body&gt;&lt;/html&gt;&#x27;,</div><div class="delete">-&gt;&gt;&gt;   language=&#x27;html&#x27;)</div><div class="delete">-``:code</div><div class="delete">-``</div><div class="delete">-&lt;table&gt;...&lt;code&gt;...</div><div class="delete">-&lt;html&gt;&lt;body&gt;{{=request.env.remote_add}}&lt;/body&gt;&lt;/html&gt;</div><div class="delete">-...&lt;/code&gt;...&lt;/table&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-These are the default arguments for the ``CODE`` helper:</div><div class="delete">-``</div><div class="delete">-CODE(&quot;print &#x27;hello world&#x27;&quot;, language=&#x27;python&#x27;, link=None, counter=1, styles={})</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Supported values for the ``language`` argument are &quot;python&quot;, &quot;html_plain&quot;, &quot;c&quot;, &quot;cpp&quot;, &quot;web2py&quot;, and &quot;html&quot;. The &quot;html&quot; language interprets {{ and }} tags as &quot;web2py&quot; code, while &quot;html_plain&quot; doesn&#x27;t.</div><div class="delete">-</div><div class="delete">-If a ``link`` value is specified, for example &quot;/examples/global/vars/&quot;, web2py API references in the code are linked to documentation at the link URL. For example &quot;request&quot; would be linked to &quot;/examples/global/vars/request&quot;. In the above example, the link URL is handled by the &quot;vars&quot; action in the &quot;global.py&quot; controller that is distributed as part of the web2py &quot;examples&quot; application.</div><div class="delete">-</div><div class="delete">-The ``counter`` argument is used for line numbering. It can be set to any of three different values. It can be ``None`` for no line numbers, a numerical value specifying the start number, or a string. If the counter is set to a string, it is interpreted as a prompt, and there are no line numbers.</div><div class="delete">-</div><div class="delete">-The ``styles`` argument is a bit tricky. If you look at the generated HTML above, it contains a table with two columns, and each column has its own style declared inline using CSS. The ``styles`` attributes allows you to override those two CSS styles. For example:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{=CODE(...,styles={&#x27;CODE&#x27;:&#x27;margin: 0;padding: 5px;border: none;&#x27;})}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The ``styles`` attribute must be a dictionary, and it allows two possible keys: ``CODE`` for the style of the actual code, and ``LINENUMBERS`` for the style of the left column, which contains the line numbers. Mind that these styles completely replace the default styles and are not simply added to them.</div><div class="delete">-</div><div class="delete">-##### ``COL``</div><div class="delete">-``COL``:inxx</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print COL(&#x27;a&#x27;,&#x27;b&#x27;)</div><div class="delete">-&lt;col&gt;ab&lt;/col&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``COLGROUP``</div><div class="delete">-``COLGROUP``:inxx</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print COLGROUP(&#x27;a&#x27;,&#x27;b&#x27;)</div><div class="delete">-&lt;colgroup&gt;ab&lt;/colgroup&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``DIV``</div><div class="delete">-All helpers apart from ``XML`` are derived from ``DIV`` and inherit its basic methods.</div><div class="delete">-</div><div class="delete">-``DIV``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print DIV(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;div id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``EM``</div><div class="delete">-</div><div class="delete">-Emphasizes its content.</div><div class="delete">-</div><div class="delete">-``EM``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print EM(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;em id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/em&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``FIELDSET``</div><div class="delete">-``FIELDSET``:inxx</div><div class="delete">-</div><div class="delete">-This is used to create an input field together with its label.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print FIELDSET(&#x27;Height:&#x27;, INPUT(_name=&#x27;height&#x27;), _class=&#x27;test&#x27;)</div><div class="delete">-&lt;fieldset class=&quot;test&quot;&gt;Height:&lt;input name=&quot;height&quot; /&gt;&lt;/fieldset&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``FORM``</div><div class="delete">-``FORM``:inxx</div><div class="delete">-</div><div class="delete">-This is one of the most important helpers. In its simple form, it just makes a ``&lt;form&gt;...&lt;/form&gt;`` tag, but because helpers are objects and have knowledge of what they contain, they can process submitted forms (for example, perform validation of the fields). This will be discussed in detail in Chapter 7.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print FORM(INPUT(_type=&#x27;submit&#x27;), _action=&#x27;&#x27;, _method=&#x27;post&#x27;)</div><div class="delete">-&lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</div><div class="delete">-&lt;input type=&quot;submit&quot; /&gt;&lt;/form&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The &quot;enctype&quot; is &quot;multipart/form-data&quot; by default.</div><div class="delete">-</div><div class="delete">-``hidden``:inxx</div><div class="delete">-The constructor of a ``FORM``, and of ``SQLFORM``, can also take a special argument called ``hidden``. When a dictionary is passed as ``hidden``, its items are translated into &quot;hidden&quot; INPUT fields. For example:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print FORM(hidden=dict(a=&#x27;b&#x27;))</div><div class="delete">-&lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</div><div class="delete">-&lt;input value=&quot;b&quot; type=&quot;hidden&quot; name=&quot;a&quot; /&gt;&lt;/form&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``H1``, ``H2``, ``H3``, ``H4``, ``H5``, ``H6``</div><div class="delete">-``H1``:inxx</div><div class="delete">-</div><div class="delete">-These helpers are for paragraph headings and subheadings:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print H1(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;h1 id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/h1&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``HEAD``</div><div class="delete">-</div><div class="delete">-For tagging the HEAD of an HTML page.</div><div class="delete">-</div><div class="delete">-``HEAD``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print HEAD(TITLE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class="delete">-&lt;head&gt;&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;&lt;/head&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``HTML``</div><div class="delete">-``HTML``:inxx ``XHTML``:inxx</div><div class="delete">-</div><div class="delete">-This helper is a little different. In addition to making the ``&lt;html&gt;`` tags,</div><div class="delete">-it prepends the tag with a doctype string``xhtml:w,xhtml:o,xhtml:school``:cite .</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print HTML(BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class="delete">-&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</div><div class="delete">-                      &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</div><div class="delete">-&lt;html&gt;&lt;body&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The HTML helper also takes some additional optional arguments that have the following default:</div><div class="delete">-``</div><div class="delete">-HTML(..., lang=&#x27;en&#x27;, doctype=&#x27;transitional&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-where doctype can be &#x27;strict&#x27;, &#x27;transitional&#x27;, &#x27;frameset&#x27;, &#x27;html5&#x27;, or a full doctype string.</div><div class="delete">-</div><div class="delete">-##### ``XHTML``</div><div class="delete">-``XHTML``:inxx</div><div class="delete">-</div><div class="delete">-XHTML is similar to HTML but it creates an XHTML doctype instead.</div><div class="delete">-``</div><div class="delete">-XHTML(..., lang=&#x27;en&#x27;, doctype=&#x27;transitional&#x27;, xmlns=&#x27;http://www.w3.org/1999/xhtml&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-where doctype can be &#x27;strict&#x27;, &#x27;transitional&#x27;, &#x27;frameset&#x27;, or a full doctype string.</div><div class="delete">-</div><div class="delete">-##### ``HR``</div><div class="delete">-``HR``:inxx</div><div class="delete">-</div><div class="delete">-This helper creates a horizontal line in an HTML page</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print HR()</div><div class="delete">-&lt;hr /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``I``</div><div class="delete">-``I``:inxx</div><div class="delete">-</div><div class="delete">-This helper makes its contents italic.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print I(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;i id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/i&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``INPUT``</div><div class="delete">-``INPUT``:inxx</div><div class="delete">-</div><div class="delete">-Creates an ``&lt;input.../&gt;`` tag. An input tag may not contain other tags, and is closed by ``/&gt;`` instead of ``&gt;``. The input tag has an optional attribute ``_type`` that can be set to &quot;text&quot; (the default), &quot;submit&quot;, &quot;checkbox&quot;, or &quot;radio&quot;.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print INPUT(_name=&#x27;test&#x27;, _value=&#x27;a&#x27;)</div><div class="delete">-&lt;input value=&quot;a&quot; name=&quot;test&quot; /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-It also takes an optional special argument called &quot;value&quot;, distinct from &quot;_value&quot;. The latter sets the default value for the input field; the former sets its current value. For an input of type &quot;text&quot;, the former overrides the latter:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print INPUT(_name=&#x27;test&#x27;, _value=&#x27;a&#x27;, value=&#x27;b&#x27;)</div><div class="delete">-&lt;input value=&quot;b&quot; name=&quot;test&quot; /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-For radio buttons, ``INPUT`` selectively sets the &quot;checked&quot; attribute:</div><div class="delete">-</div><div class="delete">-``radio``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; for v in [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]:</div><div class="delete">-&gt;&gt;&gt;     print INPUT(_type=&#x27;radio&#x27;, _name=&#x27;test&#x27;, _value=v, value=&#x27;b&#x27;), v</div><div class="delete">-&lt;input value=&quot;a&quot; type=&quot;radio&quot; name=&quot;test&quot; /&gt; a</div><div class="delete">-&lt;input value=&quot;b&quot; type=&quot;radio&quot; checked=&quot;checked&quot; name=&quot;test&quot; /&gt; b</div><div class="delete">-&lt;input value=&quot;c&quot; type=&quot;radio&quot; name=&quot;test&quot; /&gt; c</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-and similarly for checkboxes:</div><div class="delete">-</div><div class="delete">-``checkbox``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print INPUT(_type=&#x27;checkbox&#x27;, _name=&#x27;test&#x27;, _value=&#x27;a&#x27;, value=True)</div><div class="delete">-&lt;input value=&quot;a&quot; type=&quot;checkbox&quot; checked=&quot;checked&quot; name=&quot;test&quot; /&gt;</div><div class="delete">-&gt;&gt;&gt; print INPUT(_type=&#x27;checkbox&#x27;, _name=&#x27;test&#x27;, _value=&#x27;a&#x27;, value=False)</div><div class="delete">-&lt;input value=&quot;a&quot; type=&quot;checkbox&quot; name=&quot;test&quot; /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``IFRAME``</div><div class="delete">-</div><div class="delete">-This helper includes another web page in the current page. The url of the other page is specified via the &quot;_src&quot; attribute.</div><div class="delete">-</div><div class="delete">-``IFRAME``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print IFRAME(_src=&#x27;http://www.web2py.com&#x27;)</div><div class="delete">-&lt;iframe src=&quot;http://www.web2py.com&quot;&gt;&lt;/iframe&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``IMG``</div><div class="delete">-``IMG``:inxx</div><div class="delete">-</div><div class="delete">-It can be used to embed images into HTML:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; IMG(_src=&#x27;http://example.com/image.png&#x27;,_alt=&#x27;test&#x27;)</div><div class="delete">-&lt;img src=&quot;http://example.com/image.ong&quot; alt=&quot;rest&quot; /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Here is a combination of A, IMG, and URL helpers for including a static image with a link:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; A(IMG(_src=URL(&#x27;static&#x27;,&#x27;logo.png&#x27;), _alt=&quot;My Logo&quot;),</div><div class="delete">-      _href=URL(&#x27;default&#x27;,&#x27;index&#x27;))</div><div class="delete">-&lt;a href=&quot;/myapp/default/index&quot;&gt;</div><div class="delete">-  &lt;img src=&quot;/myapp/static/logo.png&quot; alt=&quot;My Logo&quot; /&gt;</div><div class="delete">-&lt;/a&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``LABEL``</div><div class="delete">-</div><div class="delete">-It is used to create a LABEL tag for an INPUT field.</div><div class="delete">-</div><div class="delete">-``LABEL``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print LABEL(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;label id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/label&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``LEGEND``</div><div class="delete">-</div><div class="delete">-It is used to create a legend tag for a field in a form.</div><div class="delete">-</div><div class="delete">-``LEGEND``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print LEGEND(&#x27;Name&#x27;, _for=&#x27;myfield&#x27;)</div><div class="delete">-&lt;legend for=&quot;myfield&quot;&gt;Name&lt;/legend&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``LI``</div><div class="delete">-</div><div class="delete">-It makes a list item and should be contained in a ``UL`` or ``OL`` tag.</div><div class="delete">-</div><div class="delete">-``LI``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print LI(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;li id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``META``</div><div class="delete">-</div><div class="delete">-To be used for building ``META`` tags in the ``HTML`` head. For example:</div><div class="delete">-</div><div class="delete">-``META``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print META(_name=&#x27;security&#x27;, _content=&#x27;high&#x27;)</div><div class="delete">-&lt;meta name=&quot;security&quot; content=&quot;high&quot; /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``MARKMIN``</div><div class="delete">-</div><div class="delete">-Implements the markmin wiki syntax. It converts the input text into output html according to the markmin rules described in the example below:</div><div class="delete">-</div><div class="delete">-``MARKMIN``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print MARKMIN(&quot;this is **bold** or &#x27;&#x27;italic&#x27;&#x27; and this [[a link http://web2py.com]]&quot;)</div><div class="delete">-&lt;p&gt;this is &lt;b&gt;bold&lt;/b&gt; or &lt;i&gt;italic&lt;/i&gt; and</div><div class="delete">-this &lt;a href=&quot;http://web2py.com&quot;&gt;a link&lt;/a&gt;&lt;/p&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The markmin syntax is described in this file that ships with web2py:</div><div class="delete">-``</div><div class="delete">-http://127.0.0.1:8000/examples/static/markmin.html</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-and some examples are shown in chapter 12 in the context of plugin_wiki, which uses MARKMIN extensively.</div><div class="delete">-</div><div class="delete">-You can use markmin to generate HTML, LaTeX and PDF documents:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-m = &quot;Hello **world** [[link http://web2py.com]]&quot;</div><div class="delete">-from gluon.contrib.markmin.markmin2html import markmin2html</div><div class="delete">-print markmin2html(m)</div><div class="delete">-from gluon.contrib.markmin.markmin2latex import markmin2latex</div><div class="delete">-print markmin2latex(m)</div><div class="delete">-from gluon.contrib.markmin.markmin2pdf import markmin2pdf</div><div class="delete">-print markmin2pdf(m) # requires pdflatex</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-(the ``MARKMIN`` helper is a shortcut for ``markmin2html``)</div><div class="delete">-</div><div class="delete">-Here is a basic syntax primer:</div><div class="delete">-</div><div class="delete">-**SOURCE**                 | **OUTPUT**</div><div class="delete">-``# title``                | **title**</div><div class="delete">-``## section``             | **section**</div><div class="delete">-``### subsection``         | **subsection**</div><div class="delete">-``**bold**``               | **bold**</div><div class="delete">-``&#x27;&#x27;italic&#x27;&#x27;``             | &#x27;&#x27;italic&#x27;&#x27;</div><div class="delete">-``!`!`verbatim`!`!``       | ``verbatim``</div><div class="delete">-``http://google.com``      | http://google.com</div><div class="delete">-``http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;http:...&lt;/a&gt;``</div><div class="delete">-``http://...png`` | ``&lt;img src=&quot;http://...png&quot; /&gt;``</div><div class="delete">-``http://...mp3`` | ``&lt;audio src=&quot;http://...mp3&quot;&gt;&lt;/audio&gt;``</div><div class="delete">-``http://...mp4`` | ``&lt;video src=&quot;http://...mp4&quot;&gt;&lt;/video&gt;``</div><div class="delete">-``qr:http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;&lt;img src=&quot;qr code&quot;/&gt;&lt;/a&gt;``</div><div class="delete">-``embed:http://...`` | ``&lt;iframe src=&quot;http://...&quot;&gt;&lt;/iframe&gt;``</div><div class="delete">-``[[click me #myanchor]]`` | [[click me #myanchor]]</div><div class="delete">-``$````$\int_a^b sin(x)dx$````$``  | $$\int_a^b sin(x)dx$$</div><div class="delete">-</div><div class="delete">-Simply including a link to an image, a videos or an audio files without markup result in the corresponding image, video or audio file being included automatically (for audio and video it uses html &lt;audio&gt; and &lt;video&gt; tags).</div><div class="delete">-</div><div class="delete">-Adding a link with the ``qr:`` prefix such as </div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-qr:http://web2py.com</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-results in the corresponding QR code being embedded and linking the said URL.</div><div class="delete">-</div><div class="delete">-Adding a link with the ``embed:`` prefix such as</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-embed:http://www.youtube.com/embed/x1w8hKTJ2Co</div><div class="delete">-`` </div><div class="delete">-</div><div class="delete">-results in the page being embedded, in this case a youtube video is embedded.</div><div class="delete">-</div><div class="delete">-Images can also be embedded with the following syntax:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-[[image-description http://.../image.png right 200px]]</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-Unordered lists with:</div><div class="delete">-``</div><div class="delete">-- one</div><div class="delete">-- two</div><div class="delete">-- three</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-Ordered lists with:</div><div class="delete">-``</div><div class="delete">-+ one</div><div class="delete">-+ two</div><div class="delete">-+ three</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-and tables with:</div><div class="delete">-``</div><div class="delete">- X | 0 | 0</div><div class="delete">- 0 | X | 0</div><div class="delete">- 0 | 0 | 1</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-The MARKMIN syntax also supports blockquotes, HTML5 audio and video tags, image alignment, custom css, and it can be extended:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-MARKMIN(&quot;!`!!`!abab!`!!`!:custom&quot;, extra=dict(custom=lambda text: text.replace(&#x27;a&#x27;,&#x27;c&#x27;))</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-generates</div><div class="delete">-</div><div class="delete">-``&#x27;cbcb&#x27;``:code</div><div class="delete">-</div><div class="delete">-Custom blocks are delimited by ``!`!!`!...!`!!`!:&lt;key&gt;`` and they are rendered by the function passed as value for the corresponding key in the extra dictionary argument of MARKMIN. Mind that the function may need to escape the output to prevent XSS.</div><div class="delete">-</div><div class="delete">-##### ``OBJECT``</div><div class="delete">-</div><div class="delete">-Used to embed objects (for example, a flash player) in the HTML.</div><div class="delete">-</div><div class="delete">-``OBJECT``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print OBJECT(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class="delete">-&gt;&gt;&gt;              _src=&#x27;http://www.web2py.com&#x27;)</div><div class="delete">-&lt;object src=&quot;http://www.web2py.com&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/object&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``OL``</div><div class="delete">-</div><div class="delete">-It stands for Ordered List. The list should contain LI tags. ``OL`` arguments that are not ``LI`` objects are automatically enclosed in ``&lt;li&gt;...&lt;/li&gt;`` tags.</div><div class="delete">-</div><div class="delete">-``OL``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print OL(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;ol id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;li&gt;&amp;lt;hello&amp;gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``ON``</div><div class="delete">-</div><div class="delete">-This is here for backward compatibility and it is simply an alias for ``True``. It is used exclusively for checkboxes and deprecated since ``True`` is more Pythonic.</div><div class="delete">-</div><div class="delete">-``ON``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print INPUT(_type=&#x27;checkbox&#x27;, _name=&#x27;test&#x27;, _checked=ON)</div><div class="delete">-&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;test&quot; /&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``OPTGROUP``</div><div class="delete">-</div><div class="delete">-Allows you to group multiple options in a SELECT and it is useful to customize the fields using CSS.</div><div class="delete">-</div><div class="delete">-``OPTGROUP``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print SELECT(&#x27;a&#x27;, OPTGROUP(&#x27;b&#x27;, &#x27;c&#x27;))</div><div class="delete">-&lt;select&gt;</div><div class="delete">-  &lt;option value=&quot;a&quot;&gt;a&lt;/option&gt;</div><div class="delete">-  &lt;optgroup&gt;</div><div class="delete">-    &lt;option value=&quot;b&quot;&gt;b&lt;/option&gt;</div><div class="delete">-    &lt;option value=&quot;c&quot;&gt;c&lt;/option&gt;</div><div class="delete">-  &lt;/optgroup&gt;</div><div class="delete">-&lt;/select&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``OPTION``</div><div class="delete">-</div><div class="delete">-This should only be used as part of a SELECT/OPTION combination.</div><div class="delete">-</div><div class="delete">-``OPTION``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print OPTION(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _value=&#x27;a&#x27;)</div><div class="delete">-&lt;option value=&quot;a&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/option&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-As in the case of ``INPUT``, web2py make a distinction between &quot;_value&quot; (the value of the OPTION), and &quot;value&quot; (the current value of the enclosing select). If they are equal, the option is &quot;selected&quot;.</div><div class="delete">-</div><div class="delete">-``selected``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print SELECT(&#x27;a&#x27;, &#x27;b&#x27;, value=&#x27;b&#x27;):</div><div class="delete">-&lt;select&gt;</div><div class="delete">-&lt;option value=&quot;a&quot;&gt;a&lt;/option&gt;</div><div class="delete">-&lt;option value=&quot;b&quot; selected=&quot;selected&quot;&gt;b&lt;/option&gt;</div><div class="delete">-&lt;/select&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``P``</div><div class="delete">-``P``:inxx</div><div class="delete">-</div><div class="delete">-This is for tagging a paragraph.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print P(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;p id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/p&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``PRE``</div><div class="delete">-``PRE``:inxx</div><div class="delete">-</div><div class="delete">-Generates a ``&lt;pre&gt;...&lt;/pre&gt;`` tag for displaying pre-formatted text. The ``CODE`` helper is generally preferable for code listings.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print PRE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;pre id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/pre&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``SCRIPT``</div><div class="delete">-``SCRIPT``:inxx</div><div class="delete">-</div><div class="delete">-This is include or link a script, such as JavaScript. The content between the tags is rendered as an HTML comment, for the benefit of really old browsers.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print SCRIPT(&#x27;alert(&quot;hello world&quot;);&#x27;, _type=&#x27;text/javascript&#x27;)</div><div class="delete">-&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--</div><div class="delete">-alert(&quot;hello world&quot;);</div><div class="delete">-//--&gt;&lt;/script&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``SELECT``</div><div class="delete">-``SELECT``:inxx</div><div class="delete">-</div><div class="delete">-Makes a ``&lt;select&gt;...&lt;/select&gt;`` tag. This is used with the ``OPTION`` helper. Those ``SELECT`` arguments that are not ``OPTION`` objects are automatically converted to options.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print SELECT(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;select id=&quot;0&quot; class=&quot;test&quot;&gt;</div><div class="delete">-   &lt;option value=&quot;&amp;lt;hello&amp;gt;&quot;&gt;&amp;lt;hello&amp;gt;&lt;/option&gt;</div><div class="delete">-   &lt;option value=&quot;&amp;lt;b&amp;gt;world&amp;lt;/b&amp;gt;&quot;&gt;&lt;b&gt;world&lt;/b&gt;&lt;/option&gt;</div><div class="delete">-&lt;/select&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``SPAN``</div><div class="delete">-``SPAN``:inxx</div><div class="delete">-</div><div class="delete">-Similar to ``DIV`` but used to tag inline (rather than block) content.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print SPAN(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;span id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/span&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``STYLE``</div><div class="delete">-``STYLE``:inxx</div><div class="delete">-</div><div class="delete">-Similar to script, but used to either include or link CSS code.</div><div class="delete">-Here the CSS is included:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print STYLE(XML(&#x27;body {color: white}&#x27;))</div><div class="delete">-&lt;style&gt;&lt;!--</div><div class="delete">-body { color: white }</div><div class="delete">-//--&gt;&lt;/style&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-and here it is linked:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print STYLE(_src=&#x27;style.css&#x27;)</div><div class="delete">-&lt;style src=&quot;style.css&quot;&gt;&lt;!--</div><div class="delete">-//--&gt;&lt;/style&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TABLE``, ``TR``, ``TD``</div><div class="delete">-``TABLE``:inxx ``TR``:inxx ``TD``:inxx</div><div class="delete">-</div><div class="delete">-These tags (along with the optional ``THEAD``, ``TBODY`` and ``TFOOTER`` helpers) are used to build HTML tables.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TABLE(TR(TD(&#x27;a&#x27;), TD(&#x27;b&#x27;)), TR(TD(&#x27;c&#x27;), TD(&#x27;d&#x27;)))</div><div class="delete">-&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="delete">-``:code</div><div class="delete">-``TR`` expects ``TD`` content; arguments that are not ``TD`` objects are converted automatically.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TABLE(TR(&#x27;a&#x27;, &#x27;b&#x27;), TR(&#x27;c&#x27;, &#x27;d&#x27;))</div><div class="delete">-&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-It is easy to convert a Python array into an HTML table using Python&#x27;s ``*`` function arguments notation, which maps list elements to positional function arguments.</div><div class="delete">-</div><div class="delete">-Here, we will do it line by line:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; table = [[&#x27;a&#x27;, &#x27;b&#x27;], [&#x27;c&#x27;, &#x27;d&#x27;]]</div><div class="delete">-&gt;&gt;&gt; print TABLE(TR(*table[0]), TR(*table[1]))</div><div class="delete">-&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Here we do all lines at once:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; table = [[&#x27;a&#x27;, &#x27;b&#x27;], [&#x27;c&#x27;, &#x27;d&#x27;]]</div><div class="delete">-&gt;&gt;&gt; print TABLE(*[TR(*rows) for rows in table])</div><div class="delete">-&lt;table&gt;&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TBODY``</div><div class="delete">-``TBODY``:inxx</div><div class="delete">-</div><div class="delete">-This is used to tag rows contained in the table body, as opposed to header or footer rows. It is optional.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TBODY(TR(&#x27;&lt;hello&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;tbody id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TEXTAREA``</div><div class="delete">-``TEXTAREA``:inxx</div><div class="delete">-</div><div class="delete">-This helper makes a ``&lt;textarea&gt;...&lt;/textarea&gt;`` tag.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TEXTAREA(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;)</div><div class="delete">-&lt;textarea class=&quot;test&quot; cols=&quot;40&quot; rows=&quot;10&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/textarea&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The only caveat is that its optional &quot;value&quot; overrides its content (inner HTML)</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TEXTAREA(value=&quot;&lt;hello world&gt;&quot;, _class=&quot;test&quot;)</div><div class="delete">-&lt;textarea class=&quot;test&quot; cols=&quot;40&quot; rows=&quot;10&quot;&gt;&amp;lt;hello world&amp;gt;&lt;/textarea&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TFOOT``</div><div class="delete">-``TFOOT``:inxx</div><div class="delete">-</div><div class="delete">-This is used to tag table footer rows.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TFOOT(TR(TD(&#x27;&lt;hello&gt;&#x27;)), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;tfoot id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TH``</div><div class="delete">-``TH``:inxx</div><div class="delete">-</div><div class="delete">-This is used instead of ``TD`` in table headers.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TH(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;th id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/th&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``THEAD``</div><div class="delete">-``THEAD``:inxx</div><div class="delete">-</div><div class="delete">-This is used to tag table header rows.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print THEAD(TR(TH(&#x27;&lt;hello&gt;&#x27;)), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;thead id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;tr&gt;&lt;th&gt;&amp;lt;hello&amp;gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TITLE``</div><div class="delete">-``TITLE``:inxx</div><div class="delete">-</div><div class="delete">-This is used to tag the title of a page in an HTML header.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TITLE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;))</div><div class="delete">-&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TR``</div><div class="delete">-``TR``:inxx</div><div class="delete">-</div><div class="delete">-Tags a table row. It should be rendered inside a table and contain ``&lt;td&gt;...&lt;/td&gt;`` tags. ``TR`` arguments that are not ``TD`` objects will be automatically converted.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TR(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;tr id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;td&gt;&amp;lt;hello&amp;gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;world&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``TT``</div><div class="delete">-``TT``:inxx</div><div class="delete">-</div><div class="delete">-Tags text as typewriter (monospaced) text.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print TT(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;tt id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/tt&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``UL``</div><div class="delete">-</div><div class="delete">-Signifies an Unordered List and should contain LI items. If its content is not tagged as LI, UL does it automatically.</div><div class="delete">-</div><div class="delete">-``UL``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print UL(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class="delete">-&lt;ul id=&quot;0&quot; class=&quot;test&quot;&gt;&lt;li&gt;&amp;lt;hello&amp;gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;world&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-##### ``embed64``</div><div class="delete">-</div><div class="delete">-``embed64(filename=None, file=None, data=None, extension=&#x27;image/gif&#x27;)`` encodes the provided (binary) data into base64.</div><div class="delete">-</div><div class="delete">-filename: if provided, opens and reads this file in &#x27;rb&#x27; mode.</div><div class="delete">-file: if provided, reads this file.</div><div class="delete">-data: if provided, uses the provided data.</div><div class="delete">-</div><div class="delete">-``embed64``:inxx</div><div class="delete">-</div><div class="delete">-##### ``xmlescape``</div><div class="delete">-</div><div class="delete">-``xmlescape(data, quote=True)`` returns an escaped string of the provided data.</div><div class="delete">-</div><div class="delete">-``xmlescape``:inxx</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print xmlescape(&#x27;&lt;hello&gt;&#x27;)</div><div class="delete">-&amp;lt;hello&amp;gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### Custom helpers</div><div class="delete">-</div><div class="delete">-##### ``TAG``</div><div class="delete">-``TAG``:inxx</div><div class="delete">-</div><div class="delete">-Sometimes you need to generate custom XML tags. web2py provides ``TAG``, a universal tag generator.</div><div class="delete">-``</div><div class="delete">-{{=TAG.name(&#x27;a&#x27;, &#x27;b&#x27;, _c=&#x27;d&#x27;)}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-generates the following XML</div><div class="delete">-``</div><div class="delete">-&lt;name c=&quot;d&quot;&gt;ab&lt;/name&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Arguments &quot;a&quot;, &quot;b&quot;, and &quot;d&quot; are automatically escaped; use the ``XML`` helper to suppress this behavior. Using ``TAG`` you can generate HTML/XML tags not already provided by the API. TAGs can be nested, and are serialized with ``str().``</div><div class="delete">-An equivalent syntax is:</div><div class="delete">-``</div><div class="delete">-{{=TAG[&#x27;name&#x27;](&#x27;a&#x27;, &#x27;b&#x27;, c=&#x27;d&#x27;)}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-If the TAG object is created with an empty name, it can be used to concatenate multiple strings and HTML helpers together without inserting them into a surrounding tag, but this use is deprecated. Use the ``CAT`` helper instead.</div><div class="delete">-</div><div class="delete">-Notice that ``TAG`` is an object, and ``TAG.name`` or ``TAG[&#x27;name&#x27;]`` is a function that returns a temporary helper class.</div><div class="delete">-</div><div class="delete">-##### ``MENU``</div><div class="delete">-``MENU``:inxx</div><div class="delete">-</div><div class="delete">-The MENU helper takes a list of lists or of tuples of the form of ``response.menu`` (as described in Chapter 4) and generates a tree-like structure using unordered lists representing the menu. For example:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class="delete">-&lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="delete">-  &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="delete">-  &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class="delete">-&lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="delete">-  &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="delete">-     &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="delete">-     &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="delete">-        &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="delete">-     &lt;/ul&gt;</div><div class="delete">-  &lt;/li&gt;</div><div class="delete">-&lt;/ul&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class="delete">-</div><div class="delete">-The MENU helper takes the following optional arguments:</div><div class="delete">-- ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class="delete">-- ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class="delete">-- ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class="delete">-</div><div class="delete">-``mobile``:inxx</div><div class="delete">-</div><div class="delete">-``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alternative menu representation that increases usability on small mobile devices such as phones.</div><div class="delete">-</div><div class="delete">-Normally the menu is used in a layout with the following syntax:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class="delete">-</div><div class="delete">-### ``BEAUTIFY``</div><div class="delete">-``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class="delete">-``</div><div class="delete">-{{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class="delete">-``:code</div><div class="delete">-``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class="delete">-``</div><div class="delete">-{&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-will render as:</div><div class="delete">-``</div><div class="delete">-&lt;table&gt;</div><div class="delete">-&lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;hello&lt;br /&gt;world&lt;/td&gt;&lt;/tr&gt;</div><div class="delete">-&lt;tr&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;1&lt;br /&gt;2&lt;/td&gt;&lt;/tr&gt;</div><div class="delete">-&lt;/table&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-### Server-side &#x27;&#x27;DOM&#x27;&#x27; and parsing</div><div class="delete">-``element``:inxx ``elements``:inxx</div><div class="delete">-</div><div class="delete">-#### ``elements``</div><div class="delete">-</div><div class="delete">-The DIV helper and all derived helpers provide the search methods ``element`` and ``elements``.</div><div class="delete">-</div><div class="delete">-``element`` returns the first child element matching a specified condition (or None if no match).</div><div class="delete">-</div><div class="delete">-``elements`` returns a list of all matching children.</div><div class="delete">-</div><div class="delete">-**element** and **elements** use the same syntax to specify the matching condition, which allows for three possibilities that can be mixed and matched: jQuery-like expressions, match by exact attribute value, match using regular expressions.</div><div class="delete">-</div><div class="delete">-Here is a simple example:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(DIV(DIV(&#x27;a&#x27;, _id=&#x27;target&#x27;,_class=&#x27;abc&#x27;)))</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;div#target&#x27;)</div><div class="delete">-&gt;&gt;&gt; d[0][0] = &#x27;changed&#x27;</div><div class="delete">-&gt;&gt;&gt; print a</div><div class="delete">-&lt;div&gt;&lt;div&gt;&lt;div id=&quot;target&quot; class=&quot;abc&quot;&gt;changed&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The un-named argument of ``elements`` is a string, which may contain: the name of a tag, the id of a tag preceded by a pound symbol, the class preceded by a dot, the explicit value of an attribute in square brackets.</div><div class="delete">-</div><div class="delete">-Here are 4 equivalent ways to search the previous tag by id:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;#target&#x27;)</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;div#target&#x27;)</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;div[id=target]&#x27;)</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;div&#x27;,_id=&#x27;target&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Here are 4 equivalent ways to search the previous tag by class:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;.abc&#x27;)</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;div.abc&#x27;)</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;div[class=abc]&#x27;)</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;div&#x27;,_class=&#x27;abc&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Any attribute can be used to locate an element (not just ``id`` and ``class``), including multiple attributes (the function element can take multiple named arguments), but only the first matching element will be returned.</div><div class="delete">-</div><div class="delete">-Using the jQuery syntax &quot;div#target&quot; it is possible to specify multiple search criteria separated by a space:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;t1&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;span#t1, div.c2&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-or equivalently</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;t1&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;span#t1&#x27;, &#x27;div.c2&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-If the value of an attribute is specified using a name argument, it can be a string or a regular expression:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;test123&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class="delete">-&gt;&gt;&gt; d = a.elements(&#x27;span&#x27;, _id=re.compile(&#x27;test\d{3}&#x27;)</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-A special named argument of the DIV (and derived) helpers is ``find``. It can be used to specify a search value or a search regular expression in the text content of the tag. For example:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class="delete">-&gt;&gt;&gt; d = a.elements(find=&#x27;bcd&#x27;)</div><div class="delete">-&gt;&gt;&gt; print d[0]</div><div class="delete">-&lt;span&gt;abcde&lt;/span&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-or</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class="delete">-&gt;&gt;&gt; d = a.elements(find=re.compile(&#x27;fg\w{3}&#x27;))</div><div class="delete">-&gt;&gt;&gt; print d[0]</div><div class="delete">-&lt;div&gt;fghij&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### ``components``</div><div class="delete">-Here&#x27;s an example of listing all elements in an html string:</div><div class="delete">-``</div><div class="delete">-html = TAG(&#x27;&lt;a&gt;xxx&lt;/a&gt;&lt;b&gt;yyy&lt;/b&gt;&#x27;)</div><div class="delete">-for item in html.components: print item</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### ``parent``</div><div class="delete">-``parent`` returns the parent of the current element.</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class="delete">-&gt;&gt;&gt; d = a.element(&#x27;a&#x27;).parent()</div><div class="delete">-&gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class="delete">-&gt;&gt;&gt; print a</div><div class="delete">-&lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### ``flatten``</div><div class="delete">-</div><div class="delete">-The flatten method recursively serializes the content of the children of a given element into regular text (without tags):</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(SPAN(&#x27;this&#x27;, DIV(&#x27;is&#x27;, B(&#x27;a&#x27;))), SPAN(&#x27;test&#x27;))</div><div class="delete">-&gt;&gt;&gt; print a.flatten()</div><div class="delete">-thisisatest</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Flatten can be passed an optional argument, ``render``, i.e. a function that renders/flattens the content using a different protocol. Here is an example to serialize some tags into Markmin wiki syntax:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; a = DIV(H1(&#x27;title&#x27;), P(&#x27;example of a &#x27;, A(&#x27;link&#x27;, _href=&#x27;#test&#x27;)))</div><div class="delete">-&gt;&gt;&gt; from gluon.html import markmin_serializer</div><div class="delete">-&gt;&gt;&gt; print a.flatten(render=markmin_serializer)</div><div class="delete">-## titles</div><div class="delete">-</div><div class="delete">-example of [[a link #test]]</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-At the time of writing we provide ``markmin_serializer`` and ``markdown_serializer``.</div><div class="delete">-</div><div class="delete">-#### Parsing</div><div class="delete">-</div><div class="delete">-The TAG object is also an XML/HTML parser. It can read text and convert into a tree structure of helpers. This allows manipulation using the API above:</div><div class="delete">-``</div><div class="delete">-&gt;&gt;&gt; html = &#x27;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;test&lt;/span&gt;&lt;/p&gt;&#x27;</div><div class="delete">-&gt;&gt;&gt; parsed_html = TAG(html)</div><div class="delete">-&gt;&gt;&gt; parsed_html.element(&#x27;span&#x27;)[0]=&#x27;TEST&#x27;</div><div class="delete">-&gt;&gt;&gt; print parsed_html</div><div class="delete">-&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;TEST&lt;/span&gt;&lt;/p&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-### Page layout</div><div class="delete">-``page layout``:inxx ``layout.html``:inxx ``extent``:inxx ``include``:inxx</div><div class="delete">-</div><div class="delete">-Views can extend and include other views in a tree-like structure.</div><div class="delete">-</div><div class="delete">-For example, we can think of a view &quot;index.html&quot; that extends &quot;layout.html&quot; and includes &quot;body.html&quot;.</div><div class="delete">-At the same time,  &quot;layout.html&quot; may include &quot;header.html&quot; and &quot;footer.html&quot;.</div><div class="delete">-</div><div class="delete">-The root of the tree is what we call a layout view.  Just like any other HTML template file, you can edit it using the web2py administrative interface. The file name &quot;layout.html&quot; is just a convention.</div><div class="delete">-</div><div class="delete">-Here is a minimalist page that extends the &quot;layout.html&quot; view and includes the &quot;page.html&quot; view:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{extend &#x27;layout.html&#x27;}}</div><div class="delete">-&lt;h1&gt;Hello World&lt;/h1&gt;</div><div class="delete">-{{include &#x27;page.html&#x27;}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The extended layout file must contain an ``{{include}}`` directive, something like:</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;</div><div class="delete">-  &lt;head&gt;</div><div class="delete">-    &lt;title&gt;Page Title&lt;/title&gt;</div><div class="delete">-  &lt;/head&gt;</div><div class="delete">-  &lt;body&gt;</div><div class="delete">-    {{include}}</div><div class="delete">-  &lt;/body&gt;</div><div class="delete">-&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-When the view is called, the extended (layout) view is loaded, and the calling view replaces the ``{{include}}`` directive inside the layout. Processing continues recursively until all ``extend`` and ``include`` directives have been processed. The resulting template is then translated into Python code. Note, when an application is bytecode compiled, it is this Python code that is compiled, not the original view files themselves. So, the bytecode compiled version of a given view is a single .pyc file that includes the Python code not just for the original view file, but for its entire tree of extended and included views.</div><div class="delete">-</div><div class="delete">-``extend``, ``include``, ``block`` and ``super`` are special template directives,</div><div class="delete">-not Python commands.</div><div class="delete">-</div><div class="delete">-Any content or code that precedes the ``{{extend ...}}`` directive will be inserted (and therefore executed) before the beginning of the extended view&#x27;s content/code. Although this is not typically used to insert actual HTML content before the extended view&#x27;s content, it can be useful as a means to define variables or functions that you want to make available to the extended view. For example, consider a view &quot;index.html&quot;:</div><div class="delete">-``</div><div class="delete">-{{sidebar_enabled=True}}</div><div class="delete">-{{extend &#x27;layout.html&#x27;}}</div><div class="delete">-&lt;h1&gt;Home Page&lt;/h1&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-and an excerpt from &quot;layout.html&quot;:</div><div class="delete">-``</div><div class="delete">-{{if sidebar_enabled:}}</div><div class="delete">-    &lt;div id=&quot;sidebar&quot;&gt;</div><div class="delete">-        Sidebar Content</div><div class="delete">-    &lt;/div&gt;</div><div class="delete">-{{pass}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Because the ``sidebar_enabled`` assignment in &quot;index.html&quot; comes before the ``extend``, that line gets inserted before the beginning of &quot;layout.html&quot;, making ``sidebar_enabled`` available anywhere within the &quot;layout.html&quot; code (a somewhat more sophisticated version of this is used in the **welcome** app).</div><div class="delete">-</div><div class="delete">-It is also worth pointing out that the variables returned by the controller function are available not only in the function&#x27;s main view, but in all of its extended and included views as well.</div><div class="delete">-</div><div class="delete">-The argument of an ``extend`` or ``include`` (i.e., the extended or included view name) can be a python variable (though not a python expression). However, this imposes a limitation -- views that use variables in ``extend`` or ``include`` statements cannot be bytecode compiled. As noted above, bytecode-compiled views include the entire tree of extended and included views, so the specific extended and included views must be known at compile time, which is not possible if the view names are variables (whose values are not determined until run time). Because bytecode compiling views can provide a significant speed boost, using variables in ``extend`` and ``include`` should generally be avoided if possible.</div><div class="delete">-</div><div class="delete">-In some cases, an alternative to using a variable in an ``include`` is simply to place regular ``{{include ...}}`` directives inside an ``if...else`` block.</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{if some_condition:}}</div><div class="delete">-{{include &#x27;this_view.html&#x27;}}</div><div class="delete">-{{else:}}</div><div class="delete">-{{include &#x27;that_view.html&#x27;}}</div><div class="delete">-{{pass}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-The above code does not present any problem for bytecode compilation because no variables are involved. Note, however, that the bytecode compiled view will actually include the Python code for both &quot;this_view.html&quot; and &quot;that_view.html&quot;, though only the code for one of those views will be executed, depending on the value of ``some_condition``.</div><div class="delete">-</div><div class="delete">-Keep in mind, this only works for ``include`` -- you cannot place ``{{extend ...}}`` directives inside ``if...else`` blocks.</div><div class="delete">-</div><div class="delete">-``response.menu``:inxx ``menu``:inxx ``response.meta``:inxx ``meta``:inxx</div><div class="delete">-</div><div class="delete">-Layouts are used to encapsulate page commonality (headers, footers, menus), and though they are not mandatory, they will make your application easier to write and maintain.  In particular, we suggest writing layouts that take advantage of the following variables that can be set in the controller. Using these well known variables will help make your layouts interchangeable:</div><div class="delete">-``</div><div class="delete">-response.title</div><div class="delete">-response.subtitle</div><div class="delete">-response.meta.author</div><div class="delete">-response.meta.keywords</div><div class="delete">-response.meta.description</div><div class="delete">-response.flash</div><div class="delete">-response.menu</div><div class="delete">-response.files</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Except for ``menu`` and ``files``, these are all strings and their meaning should be obvious.</div><div class="delete">-</div><div class="delete">-``response.menu`` menu is a list of 3-tuples or 4-tuples. The three elements are: the link name, a boolean representing whether the link is active (is the current link), and the URL of the linked page. For example:</div><div class="delete">-``</div><div class="delete">-response.menu = [(&#x27;Google&#x27;, False, &#x27;http://www.google.com&#x27;,[]),</div><div class="delete">-                 (&#x27;Index&#x27;,  True,  URL(&#x27;index&#x27;), [])]</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-``sub-menu``:inxx</div><div class="delete">-The fourth tuple element is an optional sub-menu.</div><div class="delete">-</div><div class="delete">-``response.files`` is a list of CSS and JS files that are needed by your page.</div><div class="delete">-</div><div class="delete">-We also recommend that you use:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{include &#x27;web2py_ajax.html&#x27;}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-in the HTML head, since this will include the jQuery libraries and define some backward-compatible JavaScript functions for special effects and Ajax. &quot;web2py_ajax.html&quot; includes the ``response.meta`` tags in the view, jQuery base, the calendar datepicker, and all required CSS and JS ``response.files``.</div><div class="delete">-</div><div class="delete">-#### Default page layout</div><div class="delete">-``superfish``:inxx ``ez.css``:inxx</div><div class="delete">-</div><div class="delete">-Below is the &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts). Any new application will have a similar default layout:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;!DOCTYPE html&gt;</div><div class="delete">-&lt;head&gt;</div><div class="delete">-  &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="delete">-  &lt;title&gt;{{=response.title or request.application}}&lt;/title&gt;</div><div class="delete">-</div><div class="delete">-  &lt;!-- http://dev.w3.org/html5/markup/meta.name.html --&gt;</div><div class="delete">-  &lt;meta name=&quot;application-name&quot; content=&quot;{{=request.application}}&quot; /&gt;</div><div class="delete">-</div><div class="delete">-  &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/modernizr.custom.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="delete">-</div><div class="delete">-  &lt;!-- include stylesheets --&gt;</div><div class="delete">-  {{</div><div class="delete">-  response.files.append(URL(&#x27;static&#x27;,&#x27;css/skeleton.css&#x27;))</div><div class="delete">-  response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py.css&#x27;))</div><div class="delete">-  response.files.append(URL(&#x27;static&#x27;,&#x27;css/superfish.css&#x27;))</div><div class="delete">-  response.files.append(URL(&#x27;static&#x27;,&#x27;js/superfish.js&#x27;))</div><div class="delete">-  }}</div><div class="delete">-</div><div class="delete">-  {{include &#x27;web2py_ajax.html&#x27;}}</div><div class="delete">-</div><div class="delete">-  &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="delete">-    jQuery(function(){ jQuery(&#x27;ul.sf-menu&#x27;).supersubs({minWidth:12,maxWidth:30,extraWidth:3}).superfish(); });</div><div class="delete">-  &lt;/script&gt;</div><div class="delete">-</div><div class="delete">-  {{</div><div class="delete">-  # using sidebars need to know what sidebar you want to use</div><div class="delete">-  left_sidebar_enabled = globals().get(&#x27;left_sidebar_enabled&#x27;,False)</div><div class="delete">-  right_sidebar_enabled = globals().get(&#x27;right_sidebar_enabled&#x27;,False)</div><div class="delete">-  middle_columns = {0:&#x27;sixteen&#x27;,1:&#x27;twelve&#x27;,2:&#x27;eight&#x27;}[</div><div class="delete">-     (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]</div><div class="delete">-  }}</div><div class="delete">-</div><div class="delete">-&lt;/head&gt;</div><div class="delete">-&lt;body&gt;</div><div class="delete">-  &lt;div class=&quot;wrapper&quot;&gt;&lt;!-- for sticky footer --&gt;</div><div class="delete">-</div><div class="delete">-    &lt;div class=&quot;topbar&quot;&gt;</div><div class="delete">-      &lt;div class=&quot;container&quot;&gt;</div><div class="delete">-        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-          &lt;div id=&quot;navbar&quot;&gt;</div><div class="delete">-            {{=&#x27;auth&#x27; in globals() and auth.navbar(separators=(&#x27; &#x27;,&#x27; | &#x27;,&#x27;&#x27;))}}</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-          &lt;div id=&quot;menu&quot;&gt;</div><div class="delete">-            {{=MENU(response.menu, </div><div class="delete">-                    _class=&#x27;mobile-menu&#x27; if is_mobile else &#x27;sf-menu&#x27;,</div><div class="delete">-                    mobile=request.user_agent().is_mobile)}}</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-      &lt;/div&gt;</div><div class="delete">-    &lt;/div&gt;&lt;!-- topbar --&gt;</div><div class="delete">-</div><div class="delete">-    &lt;div class=&quot;flash&quot;&gt;{{=response.flash or &#x27;&#x27;}}&lt;/div&gt;</div><div class="delete">-</div><div class="delete">-    &lt;div class=&quot;header&quot;&gt;</div><div class="delete">-      &lt;div class=&quot;container&quot;&gt;</div><div class="delete">-        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-          &lt;h1 class=&quot;remove-bottom&quot; style=&quot;margin-top: .5em;&quot;&gt;</div><div class="delete">-          {{=response.title or request.application}}</div><div class="delete">-          &lt;/h1&gt;</div><div class="delete">-          &lt;h5&gt;{{=response.subtitle or &#x27;&#x27;}}&lt;/h5&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-</div><div class="delete">-        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-          &lt;div class=&quot;statusbar&quot;&gt;</div><div class="delete">-            {{block statusbar}}</div><div class="delete">-            &lt;span class=&quot;breadcrumbs&quot;&gt;{{=request.function}}&lt;/span&gt;</div><div class="delete">-            {{end}}</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-      &lt;/div&gt;</div><div class="delete">-    &lt;/div&gt;</div><div class="delete">-</div><div class="delete">-    &lt;div class=&quot;main&quot;&gt;</div><div class="delete">-      &lt;div class=&quot;container&quot;&gt;</div><div class="delete">-        {{if left_sidebar_enabled:}}</div><div class="delete">-        &lt;div class=&quot;four columns left-sidebar&quot;&gt;</div><div class="delete">-          {{block left_sidebar}}</div><div class="delete">-          &lt;h3&gt;Left Sidebar&lt;/h3&gt;</div><div class="delete">-          &lt;p&gt;&lt;/p&gt;</div><div class="delete">-          {{end}}</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-        {{pass}}</div><div class="delete">-</div><div class="delete">-        &lt;div class=&quot;{{=middle_columns}} columns center&quot;&gt;</div><div class="delete">-          {{block center}}</div><div class="delete">-          {{include}}</div><div class="delete">-          {{end}}</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-</div><div class="delete">-        {{if right_sidebar_enabled:}}</div><div class="delete">-        &lt;div class=&quot;four columns&quot;&gt;</div><div class="delete">-          {{block right_sidebar}}</div><div class="delete">-          &lt;h3&gt;Right Sidebar&lt;/h3&gt;</div><div class="delete">-          &lt;p&gt;&lt;/p&gt;</div><div class="delete">-          {{end}}</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-        {{pass}}</div><div class="delete">-</div><div class="delete">-      &lt;/div&gt;&lt;!-- container --&gt;</div><div class="delete">-    &lt;/div&gt;&lt;!-- main --&gt;</div><div class="delete">-</div><div class="delete">-    &lt;div class=&quot;push&quot;&gt;&lt;/div&gt;</div><div class="delete">-  &lt;/div&gt;&lt;!-- wrapper --&gt;</div><div class="delete">-</div><div class="delete">-  &lt;div class=&quot;footer&quot;&gt;</div><div class="delete">-    &lt;div class=&quot;container header&quot;&gt;</div><div class="delete">-      &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-        {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="delete">-        &lt;div class=&quot;footer-content&quot; &gt;</div><div class="delete">-          {{=T(&#x27;Copyright&#x27;)}} &amp;#169; 2011</div><div class="delete">-          &lt;div style=&quot;float: right;&quot;&gt;</div><div class="delete">-            &lt;a href=&quot;http://www.web2py.com/&quot;&gt;</div><div class="delete">-            &lt;img style=&quot;padding-bottom: 0;&quot; </div><div class="delete">-                 src=&quot;{{=URL(&#x27;static&#x27;,&#x27;images/poweredby.png&#x27;)}}&quot;/&gt;</div><div class="delete">-            &lt;/a&gt;</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-        {{end}}</div><div class="delete">-      &lt;/div&gt;</div><div class="delete">-    &lt;/div&gt;&lt;!-- container --&gt;</div><div class="delete">-  &lt;/div&gt;&lt;!-- footer --&gt;</div><div class="delete">-</div><div class="delete">-&lt;/body&gt;</div><div class="delete">-&lt;/html&gt;</div><div class="delete">-</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-There are a few features of this default layout that make it very easy to use and customize:</div><div class="delete">-</div><div class="delete">-- It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class="delete">-- It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class="delete">-- It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class="delete">-- It uses a modified version of &quot;skeleton&quot; ``skeleton``:cite a library for flexible layouts which works on mobile devices and re-arranges columns to fit small screened.</div><div class="delete">-- It uses &quot;superfish.js&quot; for dynamic cascading menus. There is an explicit script to activate the superfish cascading menu and it can be removed if not necessary.</div><div class="delete">-- The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class="delete">-- The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class="delete">-- ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class="delete">-- By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class="delete">-- It uses the following classes: header, main, footer</div><div class="delete">-- It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class="delete">-</div><div class="delete">-Views can turn on and fill sidebars as follows:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{left_sidebar_enable=True}}</div><div class="delete">-{{extend &#x27;layout.html&#x27;}}</div><div class="delete">-</div><div class="delete">-This text goes in center</div><div class="delete">-</div><div class="delete">-{{block left_sidebar}}</div><div class="delete">-This text goes in sidebar</div><div class="delete">-{{end}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-#### Customizing the default layout</div><div class="delete">-</div><div class="delete">-``CSS``:inxx</div><div class="delete">-</div><div class="delete">-Customizing the default layout without editing is very easy because the CSS files are documented:</div><div class="delete">-</div><div class="delete">-- &quot;bootstrap.min.css&quot; contains the Twitter Boostrap CSS style ``Bootstrap``:inxx</div><div class="delete">-- &quot;web2py.css&quot; contains web2py specific styles</div><div class="delete">-</div><div class="delete">-To change colors and background images, </div><div class="delete">-try append the following code to layout.html header:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;style&gt;</div><div class="delete">-body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class="delete">-a { color: #349C01; }</div><div class="delete">-.header h1 { color: #349C01; }</div><div class="delete">-.header h2 { color: white; font-style: italic; font-size: 14px;}</div><div class="delete">-.statusbar { background: #333333; border-bottom: 5px #349C01 solid; }</div><div class="delete">-.statusbar a { color: white; }</div><div class="delete">-.footer { border-top: 5px #349C01 solid; }</div><div class="delete">-&lt;/style&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Of course you can also completely replace the &quot;layout.html&quot; and &quot;web2py.css&quot; files with your own.</div><div class="delete">-</div><div class="delete">-#### Mobile development</div><div class="delete">-</div><div class="delete">-The default layout.html is designed to be friendly to mobile devices but that is not enough. One may need to use different views when a page is visited by a mobile device.</div><div class="delete">-</div><div class="delete">-To make developing for desktop and mobile devices easier, web2py includes the ``@mobilize`` decorator. This decorator is applied to actions that should have a normal view and a mobile view. This is demonstrated here:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-from gluon.contrib.user_agent_parser import mobilize </div><div class="delete">-@mobilize</div><div class="delete">-def index():</div><div class="delete">-   return dict()</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-Notice that the decorator must be imported before using it in a controller.</div><div class="delete">-When the &quot;index&quot; function is called from a regular browser (desktop computer), web2py will render the returned dictionary using the view &quot;[controller]/index.html&quot;. However, when it is called by a mobile device, the dictionary will be rendered by &quot;[controller]/index.mobile.html&quot;. Notice that mobile views have the &quot;mobile.html&quot; extension.</div><div class="delete">-</div><div class="delete">-Alternatively you can apply the following logic to make all views mobile friendly:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-if request.user_agent().is_mobile:</div><div class="delete">-    response.view.replace(&#x27;.html&#x27;,&#x27;.mobile.html&#x27;)</div><div class="delete">-``</div><div class="delete">-</div><div class="delete">-The task of creating the &quot;*.mobile.html&quot; views is left to the developer but we strongly suggest using the &quot;jQuery Mobile&quot; plugin which makes the task very easy.</div><div class="delete">-</div><div class="delete">-### Functions in views</div><div class="delete">-</div><div class="delete">-Consider this &quot;layout.html&quot;:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;</div><div class="delete">-  &lt;body&gt;</div><div class="delete">-    {{include}}</div><div class="delete">-    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="delete">-      {{if &#x27;mysidebar&#x27; in globals():}}{{mysidebar()}}{{else:}}</div><div class="delete">-        my default sidebar</div><div class="delete">-      {{pass}}</div><div class="delete">-    &lt;/div&gt;</div><div class="delete">-  &lt;/body&gt;</div><div class="delete">-&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-and this extending view</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{def mysidebar():}}</div><div class="delete">-my new sidebar!!!</div><div class="delete">-{{return}}</div><div class="delete">-{{extend &#x27;layout.html&#x27;}}</div><div class="delete">-Hello World!!!</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Notice the function is defined before the ``{{extend...}}`` statement -- this results in the function being created before the &quot;layout.html&quot; code is executed, so the function can be called anywhere within &quot;layout.html&quot;, even before the ``{{include}}``. Also notice the function is included in the extended view without the ``=`` prefix.</div><div class="delete">-</div><div class="delete">-The code generates the following output:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;</div><div class="delete">-  &lt;body&gt;</div><div class="delete">-    Hello World!!!</div><div class="delete">-    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="delete">-        my new sidebar!!!</div><div class="delete">-    &lt;/div&gt;</div><div class="delete">-  &lt;/body&gt;</div><div class="delete">-&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-Notice that the function is defined in HTML (although it could also contain Python code) so that ``response.write`` is used to write its content (the function does not return the content). This is why the layout calls the view function using ``{{mysidebar()}}`` rather than ``{{=mysidebar()}}``. Functions defined in this way can take arguments.</div><div class="delete">-</div><div class="delete">-### Blocks in views</div><div class="delete">-``block``:inxx</div><div class="delete">-</div><div class="delete">-Another way to make a view more modular is by using ``{{block...}}s`` and this mechanism is an alternative to the mechanism discussed in the previous section.</div><div class="delete">-</div><div class="delete">-Consider this &quot;layout.html&quot;:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;</div><div class="delete">-  &lt;body&gt;</div><div class="delete">-    {{include}}</div><div class="delete">-    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="delete">-      {{block mysidebar}}</div><div class="delete">-        my default sidebar</div><div class="delete">-      {{end}}</div><div class="delete">-    &lt;/div&gt;</div><div class="delete">-  &lt;/body&gt;</div><div class="delete">-&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-and this extending view</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{extend &#x27;layout.html&#x27;}}</div><div class="delete">-Hello World!!!</div><div class="delete">-{{block mysidebar}}</div><div class="delete">-my new sidebar!!!</div><div class="delete">-{{end}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-It generates the following output:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;</div><div class="delete">-  &lt;body&gt;</div><div class="delete">-    Hello World!!!</div><div class="delete">-    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="delete">-        my new sidebar!!!</div><div class="delete">-    &lt;/div&gt;</div><div class="delete">-  &lt;/body&gt;</div><div class="delete">-&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-You can have many blocks, and if a block is present in the extended view but not in the extending view, the content of the extended view is used. Also, notice that unlike with functions, it is not necessary to define blocks before the ``{{extend ...}}`` -- even if defined after the ``extend``, they can be used to make substitutions anywhere in the extended view.</div><div class="delete">-</div><div class="delete">-``super``:inxx</div><div class="delete">-</div><div class="delete">-Inside a block, you can use the expression ``{{super}}`` to include the content of the parent. For example, if we replace the above extending view with:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-{{extend &#x27;layout.html&#x27;}}</div><div class="delete">-Hello World!!!</div><div class="delete">-{{block mysidebar}}</div><div class="delete">-{{super}}</div><div class="delete">-my new sidebar!!!</div><div class="delete">-{{end}}</div><div class="delete">-``:code</div><div class="delete">-</div><div class="delete">-we get:</div><div class="delete">-</div><div class="delete">-``</div><div class="delete">-&lt;html&gt;</div><div class="delete">-  &lt;body&gt;</div><div class="delete">-    Hello World!!!</div><div class="delete">-    &lt;div class=&quot;sidebar&quot;&gt;</div><div class="delete">-        my default sidebar</div><div class="delete">-        my new sidebar!!!</div><div class="delete">-    &lt;/div&gt;</div><div class="delete">-  &lt;/body&gt;</div><div class="delete">-&lt;/html&gt;</div><div class="delete">-``:code</div><div class="delete">-</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/82dc64e7baa231edd3896ca7a0d41393e426f123">82dc64e</a><ul><li>Date : 2012-12-19</li><li>lots of small additions</li></ul></li></ul>
<div class="row-fluid" id="com_82dc64e7baa231edd3896ca7a0d41393e426f123">
    <div class="span6"><div class="diff"><div class="insert">+web2py uses ``{{ ... }}`` to escape Python code embedded in HTML. The advantage of using curly brackets instead of angle brackets is that it&#x27;s transparent to all common HTML editors. This allows the developer to use those editors to create web2py views. These delimiters can be changed for example with</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+response.delimiters = (&#x27;&lt;?&#x27;,&#x27;?&gt;&#x27;)</div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+If this line is in a model it will be applied everywhere, if in a controller only to views for the controller actions, if inside an action only to the view for that action.</div><div class=""> </div><div class=""> Since the developer is embedding Python code into HTML, the document should be indented according to HTML rules, and not Python rules. Therefore, we allow unindented Python inside the ``{{ ... }}`` tags. Since Python normally uses indentation to delimit blocks of code, we need a different way to delimit them; this is why the web2py template language makes use of the Python keyword ``pass``.</div><div class=""> </div><div class=""> -------</div><div class=""> A code block starts with a line ending with a colon and ends with a line beginning with ``pass``. The keyword ``pass`` is not necessary when the end of the block is obvious from the context.</div><div class=""> -------</div><div class=""> </div><div class=""> Here is an example:</div><div class=""> </div><div class=""> ``</div><div class=""> {{</div><div class=""> if i == 0:</div><div class=""> response.write(&#x27;i is 0&#x27;)</div><div class=""> else:</div><div class=""> response.write(&#x27;i is not 0&#x27;)</div><div class=""> pass</div><div class=""> }}</div><div class=""> ``:code</div><div class=""> </div><div class=""> Note that ``pass`` is a Python keyword, not a web2py keyword. Some Python editors, such as Emacs, use the keyword ``pass`` to signify the division of blocks and use it to re-indent code automatically.</div><div class=""> </div><div class=""> The web2py template language does exactly the same. When it finds something like:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;html&gt;&lt;body&gt;</div><div class=""> {{for x in range(10):}}{{=x}}hello&lt;br /&gt;{{pass}}</div><div class=""> &lt;/body&gt;&lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> it translates it into a program:</div><div class=""> Sometimes you need to generate custom XML tags. web2py provides ``TAG``, a unive</div><div class=""> {{=TAG.name(&#x27;a&#x27;, &#x27;b&#x27;, _c=&#x27;d&#x27;)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> generates the following XML</div><div class=""> ``</div><div class=""> &lt;name c=&quot;d&quot;&gt;ab&lt;/name&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Arguments &quot;a&quot;, &quot;b&quot;, and &quot;d&quot; are automatically escaped; use the ``XML`` helper to suppress this behavior. Using ``TAG`` you can generate HTML/XML tags not already provided by the API. TAGs can be nested, and are serialized with ``str().``</div><div class=""> An equivalent syntax is:</div><div class=""> ``</div><div class=""> {{=TAG[&#x27;name&#x27;](&#x27;a&#x27;, &#x27;b&#x27;, c=&#x27;d&#x27;)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> If the TAG object is created with an empty name, it can be used to concatenate multiple strings and HTML helpers together without inserting them into a surrounding tag, but this use is deprecated. Use the ``CAT`` helper instead.</div><div class=""> </div><div class=""> Notice that ``TAG`` is an object, and ``TAG.name`` or ``TAG[&#x27;name&#x27;]`` is a function that returns a temporary helper class.</div><div class=""> </div><div class=""> ##### ``MENU``</div><div class=""> ``MENU``:inxx</div><div class=""> </div><div class=""> The MENU helper takes a list of lists or of tuples of the form of ``response.menu`` (as described in Chapter 4) and generates a tree-like structure using unordered lists representing the menu. For example:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class="insert">+------</div><div class="insert">+The third item in each list/tuple can be an HTML helper (which could include nested helpers), and the ``MENU`` helper will simply render that helper rather than creating its own ``&lt;a&gt;`` tag.</div><div class="insert">+------</div><div class="insert">+</div><div class=""> Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="">      &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="">      &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="">         &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="">      &lt;/ul&gt;</div><div class="">   &lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class=""> </div><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class=""> ``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alternative menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> Using the jQuery syntax &quot;div#target&quot; it is possible to specify multiple search c</div><div class=""> ``:code</div><div class=""> </div><div class=""> or equivalently</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;t1&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(&#x27;span#t1&#x27;, &#x27;div.c2&#x27;)</div><div class=""> ``:code</div><div class=""> </div><div class=""> If the value of an attribute is specified using a name argument, it can be a string or a regular expression:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;test123&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(&#x27;span&#x27;, _id=re.compile(&#x27;test\d{3}&#x27;)</div><div class=""> ``:code</div><div class=""> </div><div class=""> A special named argument of the DIV (and derived) helpers is ``find``. It can be used to specify a search value or a search regular expression in the text content of the tag. For example:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(find=&#x27;bcd&#x27;)</div><div class=""> &gt;&gt;&gt; print d[0]</div><div class=""> &lt;span&gt;abcde&lt;/span&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> or</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(find=re.compile(&#x27;fg\w{3}&#x27;))</div><div class=""> &gt;&gt;&gt; print d[0]</div><div class=""> &lt;div&gt;fghij&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class="insert">#### ``components``<span class="highlight"> ``components``:inxx</span></div><div class=""> Here&#x27;s an example of listing all elements in an html string:</div><div class=""> ``</div><div class=""> html = TAG(&#x27;&lt;a&gt;xxx&lt;/a&gt;&lt;b&gt;yyy&lt;/b&gt;&#x27;)</div><div class=""> for item in html.components: print item</div><div class=""> ``:code</div><div class=""> </div><div class="insert">+``parent``:inxx ``sibling``Linxx</div><div class="insert">+</div><div class="insert">+#### ``parent`` and ``siblings``</div><div class=""> ``parent`` returns the parent of the current element.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class="insert">+&gt;&gt;&gt; s = a.element(&#x27;span&#x27;)</div><div class="insert">+&gt;&gt;&gt; d = s.parent</div><div class=""> &gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class="insert">+&gt;&gt;&gt; for e in s.siblings(): print e</div><div class="insert">+&lt;div&gt;b&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class="insert">#### ``flatten``<span class="highlight"> ``flatten``:inxx</span></div></div></div>
    <div class="span6"><div class="diff"><div class="delete">-web2py uses ``{{ ... }}`` to escape Python code embedded in HTML. The advantage of using curly brackets instead of angle brackets is that it&#x27;s transparent to all common HTML editors. This allows the developer to use those editors to create web2py views.</div><div class=""> </div><div class=""> Since the developer is embedding Python code into HTML, the document should be indented according to HTML rules, and not Python rules. Therefore, we allow unindented Python inside the ``{{ ... }}`` tags. Since Python normally uses indentation to delimit blocks of code, we need a different way to delimit them; this is why the web2py template language makes use of the Python keyword ``pass``.</div><div class=""> </div><div class=""> -------</div><div class=""> A code block starts with a line ending with a colon and ends with a line beginning with ``pass``. The keyword ``pass`` is not necessary when the end of the block is obvious from the context.</div><div class=""> -------</div><div class=""> </div><div class=""> Here is an example:</div><div class=""> </div><div class=""> ``</div><div class=""> {{</div><div class=""> if i == 0:</div><div class=""> response.write(&#x27;i is 0&#x27;)</div><div class=""> else:</div><div class=""> response.write(&#x27;i is not 0&#x27;)</div><div class=""> pass</div><div class=""> }}</div><div class=""> ``:code</div><div class=""> </div><div class=""> Note that ``pass`` is a Python keyword, not a web2py keyword. Some Python editors, such as Emacs, use the keyword ``pass`` to signify the division of blocks and use it to re-indent code automatically.</div><div class=""> </div><div class=""> The web2py template language does exactly the same. When it finds something like:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;html&gt;&lt;body&gt;</div><div class=""> {{for x in range(10):}}{{=x}}hello&lt;br /&gt;{{pass}}</div><div class=""> &lt;/body&gt;&lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> it translates it into a program:</div><div class=""> Sometimes you need to generate custom XML tags. web2py provides ``TAG``, a unive</div><div class=""> {{=TAG.name(&#x27;a&#x27;, &#x27;b&#x27;, _c=&#x27;d&#x27;)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> generates the following XML</div><div class=""> ``</div><div class=""> &lt;name c=&quot;d&quot;&gt;ab&lt;/name&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Arguments &quot;a&quot;, &quot;b&quot;, and &quot;d&quot; are automatically escaped; use the ``XML`` helper to suppress this behavior. Using ``TAG`` you can generate HTML/XML tags not already provided by the API. TAGs can be nested, and are serialized with ``str().``</div><div class=""> An equivalent syntax is:</div><div class=""> ``</div><div class=""> {{=TAG[&#x27;name&#x27;](&#x27;a&#x27;, &#x27;b&#x27;, c=&#x27;d&#x27;)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> If the TAG object is created with an empty name, it can be used to concatenate multiple strings and HTML helpers together without inserting them into a surrounding tag, but this use is deprecated. Use the ``CAT`` helper instead.</div><div class=""> </div><div class=""> Notice that ``TAG`` is an object, and ``TAG.name`` or ``TAG[&#x27;name&#x27;]`` is a function that returns a temporary helper class.</div><div class=""> </div><div class=""> ##### ``MENU``</div><div class=""> ``MENU``:inxx</div><div class=""> </div><div class=""> The MENU helper takes a list of lists or of tuples of the form of ``response.menu`` (as described in Chapter 4) and generates a tree-like structure using unordered lists representing the menu. For example:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="">      &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="">      &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="">         &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="">      &lt;/ul&gt;</div><div class="">   &lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class=""> </div><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class=""> ``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alternative menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> Using the jQuery syntax &quot;div#target&quot; it is possible to specify multiple search c</div><div class=""> ``:code</div><div class=""> </div><div class=""> or equivalently</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;t1&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(&#x27;span#t1&#x27;, &#x27;div.c2&#x27;)</div><div class=""> ``:code</div><div class=""> </div><div class=""> If the value of an attribute is specified using a name argument, it can be a string or a regular expression:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, _id=&#x27;test123&#x27;), DIV(&#x27;b&#x27;, _class=&#x27;c2&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(&#x27;span&#x27;, _id=re.compile(&#x27;test\d{3}&#x27;)</div><div class=""> ``:code</div><div class=""> </div><div class=""> A special named argument of the DIV (and derived) helpers is ``find``. It can be used to specify a search value or a search regular expression in the text content of the tag. For example:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(find=&#x27;bcd&#x27;)</div><div class=""> &gt;&gt;&gt; print d[0]</div><div class=""> &lt;span&gt;abcde&lt;/span&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> or</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(find=re.compile(&#x27;fg\w{3}&#x27;))</div><div class=""> &gt;&gt;&gt; print d[0]</div><div class=""> &lt;div&gt;fghij&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class="delete">#### ``components``<span class="highlight"></span></div><div class=""> Here&#x27;s an example of listing all elements in an html string:</div><div class=""> ``</div><div class=""> html = TAG(&#x27;&lt;a&gt;xxx&lt;/a&gt;&lt;b&gt;yyy&lt;/b&gt;&#x27;)</div><div class=""> for item in html.components: print item</div><div class=""> ``:code</div><div class=""> </div><div class="delete">-#### ``parent``</div><div class=""> ``parent`` returns the parent of the current element.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class="delete">-&gt;&gt;&gt; d = a.element(&#x27;a&#x27;).parent()</div><div class=""> &gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class="delete">#### ``flatten``<span class="highlight"></span></div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/e234f6edf67361b3ba718ea10184ba8e7c2f773d">e234f6e</a><ul><li>Date : 2012-12-20</li><li>lots of improvements</li></ul></li></ul>
<div class="row-fluid" id="com_e234f6edf67361b3ba718ea10184ba8e7c2f773d">
    <div class="span6"><div class="diff"><div class="insert">+Notice that halpers can be repeated using the multiplication operator:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; print BR()*5</div><div class="insert">+&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</div><div class="insert">+``:code</div><div class="insert">+</div><div class=""> ##### ``CAT`` (1.98.1 and up)</div><div class=""> ``CAT``:inxx</div><div class=""> </div><div class=""> This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class=""> Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CENTER``</div><div class=""> ``CENTER``:inxx</div><div class=""> </div><div class=""> This helper centers its content.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class=""> &gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CODE``</div><div class=""> ``CODE``:inxx</div><div class=""> </div><div class=""> This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class=""> </div><div class=""> Here is an example of highlighting sections of Python code.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CODE(&#x27;print &quot;hello&quot;&#x27;, language=&#x27;python&#x27;).xml()</div><div class=""> &lt;table&gt;&lt;tr valign=&quot;top&quot;&gt;&lt;td style=&quot;width:40px; text-align: right;&quot;&gt;&lt;pre style=&quot;</div><div class="">         font-size: 11px;</div><div class="">         font-family: Bitstream Vera Sans Mono,monospace;</div><div class=""> The MENU helper takes a list of lists or of tuples of the form of ``response.men</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ------</div><div class=""> The third item in each list/tuple can be an HTML helper (which could include nested helpers), and the ``MENU`` helper will simply render that helper rather than creating its own ``&lt;a&gt;`` tag.</div><div class=""> ------</div><div class=""> </div><div class=""> Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="">      &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="">      &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="">         &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="">      &lt;/ul&gt;</div><div class="">   &lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class=""> </div><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class="insert">+- ``li_first``: allows to add a class to the first list element.</div><div class="insert">+- ``li_last``: allows to add a class to the last list element.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class=""> ``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alternative menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class=""> </div><div class=""> ### ``BEAUTIFY``</div><div class=""> ``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class=""> ``</div><div class=""> {{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class=""> ``:code</div><div class=""> ``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class=""> ``</div><div class=""> {&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class=""> ``:code</div><div class=""> </div><div class=""> will render as:</div><div class=""> ``</div><div class=""> &lt;table&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;hello&lt;br /&gt;world&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;1&lt;br /&gt;2&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;/table&gt;</div><div class=""> ``:code</div><div class=""> A special named argument of the DIV (and derived) helpers is ``find``. It can be</div><div class=""> or</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(find=re.compile(&#x27;fg\w{3}&#x27;))</div><div class=""> &gt;&gt;&gt; print d[0]</div><div class=""> &lt;div&gt;fghij&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### ``components`` ``components``:inxx</div><div class=""> Here&#x27;s an example of listing all elements in an html string:</div><div class=""> ``</div><div class=""> html = TAG(&#x27;&lt;a&gt;xxx&lt;/a&gt;&lt;b&gt;yyy&lt;/b&gt;&#x27;)</div><div class=""> for item in html.components: print item</div><div class=""> ``:code</div><div class=""> </div><div class=""> ``parent``:inxx ``sibling``Linxx</div><div class=""> </div><div class=""> #### ``parent`` and ``siblings``</div><div class=""> ``parent`` returns the parent of the current element.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class=""> &gt;&gt;&gt; s = a.element(&#x27;span&#x27;)</div><div class=""> &gt;&gt;&gt; d = s.parent</div><div class=""> &gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; for e in s.siblings(): print e</div><div class=""> &lt;div&gt;b&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class="insert">+#### Replacing elements</div><div class="insert">+</div><div class="insert">+Elements that are matched can also be replaced or removed by specifying           </div><div class="insert">+the ``replace`` argument. Notice that a </div><div class="insert">+list of the original matching elements is still returned as usual. </div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class="insert">+&gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=P(&#x27;z&#x27;)</div><div class="insert">+&gt;&gt;&gt; print a                                                                       </div><div class="insert">+&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;/div&gt;  </div><div class="insert">+``:code</div><div class="insert">+</div><div class="insert">+``replace`` can be a callable. In this case it will be passed </div><div class="insert">+the original element and it is expected to return the replacement element:</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class="insert">+&gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=lambda t: P(t[0])</div><div class="insert">+&gt;&gt;&gt; print a                                                                       </div><div class="insert">+&lt;div&gt;&lt;p&gt;x&lt;/p&gt;&lt;div&gt;&lt;p&gt;y&lt;/p&gt;&lt;/div&gt;  </div><div class="insert">+``:code</div><div class="insert">+                                                                                      </div><div class="insert">+If ``replace=None``, matching elements will be removed completely.</div><div class="insert">+</div><div class="insert">+``</div><div class="insert">+&gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class="insert">+&gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=None)</div><div class="insert">+&gt;&gt;&gt; print a                                                                       </div><div class="insert">+&lt;div&gt;&lt;/div&gt;  </div><div class="insert">+``:code</div><div class="insert">+</div><div class=""> #### ``flatten`` ``flatten``:inxx</div></div></div>
    <div class="span6"><div class="diff"><div class=""> ##### ``CAT`` (1.98.1 and up)</div><div class=""> ``CAT``:inxx</div><div class=""> </div><div class=""> This helper concatenates other helpers, same as TAG[&#x27;&#x27;].</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CAT(&#x27;Here is a &#x27;, A(&#x27;link&#x27;,_href=URL()), &#x27;, and here is some &#x27;, B(&#x27;bold text&#x27;), &#x27;.&#x27;)</div><div class=""> Here is a &lt;a href=&quot;/app/default/index&quot;&gt;link&lt;/a&gt;, and here is some &lt;b&gt;bold text&lt;/b&gt;.</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CENTER``</div><div class=""> ``CENTER``:inxx</div><div class=""> </div><div class=""> This helper centers its content.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CENTER(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;),</div><div class=""> &gt;&gt;&gt;              _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;center id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/center&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``CODE``</div><div class=""> ``CODE``:inxx</div><div class=""> </div><div class=""> This helper performs syntax highlighting for Python, C, C++, HTML and web2py code, and is preferable to ``PRE`` for code listings. ``CODE`` also has the ability to create links to the web2py API documentation.</div><div class=""> </div><div class=""> Here is an example of highlighting sections of Python code.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print CODE(&#x27;print &quot;hello&quot;&#x27;, language=&#x27;python&#x27;).xml()</div><div class=""> &lt;table&gt;&lt;tr valign=&quot;top&quot;&gt;&lt;td style=&quot;width:40px; text-align: right;&quot;&gt;&lt;pre style=&quot;</div><div class="">         font-size: 11px;</div><div class="">         font-family: Bitstream Vera Sans Mono,monospace;</div><div class=""> The MENU helper takes a list of lists or of tuples of the form of ``response.men</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ------</div><div class=""> The third item in each list/tuple can be an HTML helper (which could include nested helpers), and the ``MENU`` helper will simply render that helper rather than creating its own ``&lt;a&gt;`` tag.</div><div class=""> ------</div><div class=""> </div><div class=""> Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="">      &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="">      &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="">         &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="">      &lt;/ul&gt;</div><div class="">   &lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class=""> </div><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class=""> ``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alternative menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class=""> </div><div class=""> ### ``BEAUTIFY``</div><div class=""> ``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class=""> ``</div><div class=""> {{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class=""> ``:code</div><div class=""> ``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class=""> ``</div><div class=""> {&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class=""> ``:code</div><div class=""> </div><div class=""> will render as:</div><div class=""> ``</div><div class=""> &lt;table&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;hello&lt;br /&gt;world&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;1&lt;br /&gt;2&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;/table&gt;</div><div class=""> ``:code</div><div class=""> A special named argument of the DIV (and derived) helpers is ``find``. It can be</div><div class=""> or</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;abcde&#x27;), DIV(&#x27;fghij&#x27;))</div><div class=""> &gt;&gt;&gt; d = a.elements(find=re.compile(&#x27;fg\w{3}&#x27;))</div><div class=""> &gt;&gt;&gt; print d[0]</div><div class=""> &lt;div&gt;fghij&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### ``components`` ``components``:inxx</div><div class=""> Here&#x27;s an example of listing all elements in an html string:</div><div class=""> ``</div><div class=""> html = TAG(&#x27;&lt;a&gt;xxx&lt;/a&gt;&lt;b&gt;yyy&lt;/b&gt;&#x27;)</div><div class=""> for item in html.components: print item</div><div class=""> ``:code</div><div class=""> </div><div class=""> ``parent``:inxx ``sibling``Linxx</div><div class=""> </div><div class=""> #### ``parent`` and ``siblings``</div><div class=""> ``parent`` returns the parent of the current element.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class=""> &gt;&gt;&gt; s = a.element(&#x27;span&#x27;)</div><div class=""> &gt;&gt;&gt; d = s.parent</div><div class=""> &gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; for e in s.siblings(): print e</div><div class=""> &lt;div&gt;b&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### ``flatten`` ``flatten``:inxx</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/097d699dc16179206ccb7e4aee863d6523cd471c">097d699</a><ul><li>Date : 2012-12-27</li><li>fixed typo, thanks Andrew</li></ul></li></ul>
<div class="row-fluid" id="com_097d699dc16179206ccb7e4aee863d6523cd471c">
    <div class="span6"><div class="diff"><div class="insert">``parent``:inxx ``sibling``<span class="highlight">:</span>inxx</div><div class=""> </div><div class=""> #### ``parent`` and ``siblings``</div><div class=""> ``parent`` returns the parent of the current element.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class=""> &gt;&gt;&gt; s = a.element(&#x27;span&#x27;)</div><div class=""> &gt;&gt;&gt; d = s.parent</div><div class=""> &gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; for e in s.siblings(): print e</div><div class=""> &lt;div&gt;b&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Replacing elements</div><div class=""> </div><div class="insert">+Elements that are matched can also be replaced or removed by specifying</div><div class="insert">+the ``replace`` argument. Notice that a</div><div class="insert">+list of the original matching elements is still returned as usual.</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class=""> &gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=P(&#x27;z&#x27;)</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class="insert">``replace`` can be a callable. In this case it will be passed<span class="highlight"></span></div><div class=""> the original element and it is expected to return the replacement element:</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class=""> &gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=lambda t: P(t[0])</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div&gt;&lt;p&gt;x&lt;/p&gt;&lt;div&gt;&lt;p&gt;y&lt;/p&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class="insert"><span class="highlight"></span></div><div class=""> If ``replace=None``, matching elements will be removed completely.</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class=""> &gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=None)</div><div class="insert">+&gt;&gt;&gt; print a</div><div class="insert">+&lt;div&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### ``flatten`` ``flatten``:inxx</div><div class=""> </div><div class=""> The flatten method recursively serializes the content of the children of a given element into regular text (without tags):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;this&#x27;, DIV(&#x27;is&#x27;, B(&#x27;a&#x27;))), SPAN(&#x27;test&#x27;))</div><div class=""> &gt;&gt;&gt; print a.flatten()</div><div class=""> thisisatest</div><div class=""> ``:code</div><div class=""> </div><div class=""> Flatten can be passed an optional argument, ``render``, i.e. a function that renders/flattens the content using a different protocol. Here is an example to serialize some tags into Markmin wiki syntax:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(H1(&#x27;title&#x27;), P(&#x27;example of a &#x27;, A(&#x27;link&#x27;, _href=&#x27;#test&#x27;)))</div><div class=""> &gt;&gt;&gt; from gluon.html import markmin_serializer</div><div class=""> &gt;&gt;&gt; print a.flatten(render=markmin_serializer)</div><div class=""> ## titles</div><div class=""> </div><div class=""> example of [[a link #test]]</div><div class=""> ``:code</div><div class=""> </div><div class=""> At the time of writing we provide ``markmin_serializer`` and ``markdown_serializer``.</div><div class=""> </div><div class=""> #### Parsing</div><div class=""> </div><div class=""> The TAG object is also an XML/HTML parser. It can read text and convert into a tree structure of helpers. This allows manipulation using the API above:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; html = &#x27;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;test&lt;/span&gt;&lt;/p&gt;&#x27;</div><div class=""> &gt;&gt;&gt; parsed_html = TAG(html)</div><div class=""> &gt;&gt;&gt; parsed_html.element(&#x27;span&#x27;)[0]=&#x27;TEST&#x27;</div><div class=""> response.menu = [(&#x27;Google&#x27;, False, &#x27;http://www.google.com&#x27;,[]),</div><div class="">                  (&#x27;Index&#x27;,  True,  URL(&#x27;index&#x27;), [])]</div><div class=""> ``:code</div><div class=""> </div><div class=""> ``sub-menu``:inxx</div><div class=""> The fourth tuple element is an optional sub-menu.</div><div class=""> </div><div class=""> ``response.files`` is a list of CSS and JS files that are needed by your page.</div><div class=""> </div><div class=""> We also recommend that you use:</div><div class=""> </div><div class=""> ``</div><div class=""> {{include &#x27;web2py_ajax.html&#x27;}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> in the HTML head, since this will include the jQuery libraries and define some backward-compatible JavaScript functions for special effects and Ajax. &quot;web2py_ajax.html&quot; includes the ``response.meta`` tags in the view, jQuery base, the calendar datepicker, and all required CSS and JS ``response.files``.</div><div class=""> </div><div class=""> #### Default page layout</div><div class=""> </div><div class=""> ``Twitter Bootstrap``:inxx</div><div class=""> </div><div class=""> The &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts) is quite complex but it has the following structure:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;!DOCTYPE html&gt;</div><div class=""> &lt;head&gt;</div><div class="">   &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="">   &lt;title&gt;{{=response.title or request.application}}&lt;/title&gt;</div><div class="">   ...</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/modernizr.custom.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class=""> </div><div class="insert">  {{<span class="highlight"></span></div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py.css&#x27;))</div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/bootstrap.min.css&#x27;))</div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/bootstrap-responsive.min.css&#x27;))</div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py_bootstrap.css&#x27;))</div><div class="">   }}</div><div class=""> </div><div class="">   {{include &#x27;web2py_ajax.html&#x27;}}</div><div class=""> </div><div class="">   {{</div><div class="">   # using sidebars need to know what sidebar you want to use</div><div class="">   left_sidebar_enabled = globals().get(&#x27;left_sidebar_enabled&#x27;,False)</div><div class="">   right_sidebar_enabled = globals().get(&#x27;right_sidebar_enabled&#x27;,False)</div><div class="">   middle_columns = {0:&#x27;span12&#x27;,1:&#x27;span9&#x27;,2:&#x27;span6&#x27;}[</div><div class="">     (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]</div><div class="">   }}</div><div class=""> </div><div class="">   {{block head}}{{end}}</div><div class=""> &lt;/head&gt;</div><div class=""> </div><div class=""> &lt;body&gt;</div><div class="">   &lt;!-- Navbar ================================================== --&gt;</div><div class="">   &lt;div class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;</div><div class="">     &lt;div class=&quot;flash&quot;&gt;{{=response.flash or &#x27;&#x27;}}&lt;/div&gt;</div><div class="">     &lt;div class=&quot;navbar-inner&quot;&gt;</div><div class="">       &lt;div class=&quot;container&quot;&gt;</div><div class="insert"><span class="highlight">        </span>{{=response.logo or &#x27;&#x27;}}</div><div class="">         &lt;ul id=&quot;navbar&quot; class=&quot;nav pull-right&quot;&gt;</div><div class="">           {{=&#x27;auth&#x27; in globals() and auth.navbar(mode=&quot;dropdown&quot;) or &#x27;&#x27;}}</div><div class="">         &lt;/ul&gt;</div><div class="">         &lt;div class=&quot;nav-collapse&quot;&gt;</div><div class="">           {{if response.menu:}}</div><div class="">           {{=MENU(response.menu)}}</div><div class="">           {{pass}}</div><div class="">         &lt;/div&gt;&lt;!--/.nav-collapse --&gt;</div><div class="">       &lt;/div&gt;</div><div class="">     &lt;/div&gt;</div><div class="">   &lt;/div&gt;&lt;!--/top navbar --&gt;</div><div class=""> </div><div class="">   &lt;div class=&quot;container&quot;&gt;</div><div class="">     &lt;!-- Masthead ================================================== --&gt;</div><div class="">     &lt;header class=&quot;mastheader row&quot; id=&quot;header&quot;&gt;</div><div class="">         &lt;div class=&quot;span12&quot;&gt;</div><div class="">             &lt;div class=&quot;page-header&quot;&gt;</div><div class="">                 &lt;h1&gt;</div><div class="">                     {{=response.title or request.application}}</div><div class="">                     &lt;small&gt;{{=response.subtitle or &#x27;&#x27;}}&lt;/small&gt;</div><div class="">                 &lt;/h1&gt;</div><div class="">             &lt;/div&gt;</div><div class="">         &lt;/div&gt;</div><div class="">     &lt;/header&gt;</div><div class=""> </div><div class="">     &lt;section id=&quot;main&quot; class=&quot;main row&quot;&gt;</div><div class="">         {{if left_sidebar_enabled:}}</div><div class="">         &lt;div class=&quot;span3 left-sidebar&quot;&gt;</div><div class="">             {{block left_sidebar}}</div><div class="">             &lt;h3&gt;Left Sidebar&lt;/h3&gt;</div><div class="">             &lt;p&gt;&lt;/p&gt;</div><div class="">             {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class=""> </div><div class="">         &lt;div class=&quot;{{=middle_columns}}&quot;&gt;</div><div class="">             {{block center}}</div><div class="">             {{include}}</div><div class="">             {{end}}</div><div class="">         &lt;/div&gt;</div><div class=""> </div><div class="">         {{if right_sidebar_enabled:}}</div><div class="">         &lt;div class=&quot;span3&quot;&gt;</div><div class="">             {{block right_sidebar}}</div><div class="">             &lt;h3&gt;Right Sidebar&lt;/h3&gt;</div><div class="">             &lt;p&gt;&lt;/p&gt;</div><div class="">             {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class="">     &lt;/section&gt;&lt;!--/main--&gt;</div><div class=""> </div><div class="">     &lt;!-- Footer ================================================== --&gt;</div><div class="">     &lt;div class=&quot;row&quot;&gt;</div><div class="">         &lt;footer class=&quot;footer span12&quot; id=&quot;footer&quot;&gt;</div><div class="">             &lt;div class=&quot;footer-content&quot;&gt;</div><div class="">                 {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="insert"><span class="highlight">                </span>...</div><div class="">                 {{end}}</div><div class="">             &lt;/div&gt;</div><div class="">         &lt;/footer&gt;</div><div class="">     &lt;/div&gt;</div><div class=""> </div><div class="">   &lt;/div&gt; &lt;!-- /container --&gt;</div><div class=""> </div><div class="">   &lt;!-- The javascript =============================================</div><div class="">        (Placed at the end of the document so the pages load faster) --&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/bootstrap.min.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/web2py_bootstrap.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   {{if response.google_analytics_id:}}</div><div class="">     &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/analytics.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">     &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="">     analytics.initialize({</div><div class="insert">      &#x27;Google Analytics&#x27;:{trackingId:&#x27;{{=response.google_analytics_id}}&#x27;}<span class="highlight"></span></div><div class="">     });&lt;/script&gt;</div><div class="">   {{pass}}</div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of Twitter Boostrap for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class=""> - It uses &quot;analytics.js&quot; to connect to Google Analytics.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> In views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> It generates the following output:</div><div class=""> ``:code</div><div class=""> </div><div class=""> You can have many blocks, and if a block is present in the extended view but not in the extending view, the content of the extended view is used. Also, notice that unlike with functions, it is not necessary to define blocks before the ``{{extend ...}}`` -- even if defined after the ``extend``, they can be used to make substitutions anywhere in the extended view.</div><div class=""> </div><div class=""> ``super``:inxx</div><div class=""> </div><div class=""> Inside a block, you can use the expression ``{{super}}`` to include the content of the parent. For example, if we replace the above extending view with:</div><div class=""> </div><div class=""> ``</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> Hello World!!!</div><div class=""> {{block mysidebar}}</div><div class=""> {{super}}</div><div class=""> my new sidebar!!!</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> we get:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;html&gt;</div><div class="">   &lt;body&gt;</div><div class="">     Hello World!!!</div><div class="">     &lt;div class=&quot;sidebar&quot;&gt;</div><div class="">         my default sidebar</div><div class="">         my new sidebar!!!</div><div class="">     &lt;/div&gt;</div><div class="">   &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">``parent``:inxx ``sibling``<span class="highlight">L</span>inxx</div><div class=""> </div><div class=""> #### ``parent`` and ``siblings``</div><div class=""> ``parent`` returns the parent of the current element.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;),DIV(&#x27;b&#x27;))</div><div class=""> &gt;&gt;&gt; s = a.element(&#x27;span&#x27;)</div><div class=""> &gt;&gt;&gt; d = s.parent</div><div class=""> &gt;&gt;&gt; d[&#x27;_class&#x27;]=&#x27;abc&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div class=&quot;abc&quot;&gt;&lt;span&gt;a&lt;/span&gt;&lt;div&gt;b&lt;/div&gt;&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; for e in s.siblings(): print e</div><div class=""> &lt;div&gt;b&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Replacing elements</div><div class=""> </div><div class="delete">-Elements that are matched can also be replaced or removed by specifying           </div><div class="delete">-the ``replace`` argument. Notice that a </div><div class="delete">-list of the original matching elements is still returned as usual. </div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class=""> &gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=P(&#x27;z&#x27;)</div><div class="delete">-&gt;&gt;&gt; print a                                                                       </div><div class="delete">-&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;div&gt;&lt;p&gt;z&lt;/p&gt;&lt;/div&gt;  </div><div class=""> ``:code</div><div class=""> </div><div class="delete">``replace`` can be a callable. In this case it will be passed<span class="highlight"> </span></div><div class=""> the original element and it is expected to return the replacement element:</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class=""> &gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=lambda t: P(t[0])</div><div class="delete">-&gt;&gt;&gt; print a                                                                       </div><div class="delete">-&lt;div&gt;&lt;p&gt;x&lt;/p&gt;&lt;div&gt;&lt;p&gt;y&lt;/p&gt;&lt;/div&gt;  </div><div class=""> ``:code</div><div class="delete"><span class="highlight">                                                                                      </span></div><div class=""> If ``replace=None``, matching elements will be removed completely.</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;x&#x27;), DIV(SPAN(&#x27;y&#x27;))</div><div class=""> &gt;&gt;&gt; b = a.elements(&#x27;span&#x27;, replace=None)</div><div class="delete">-&gt;&gt;&gt; print a                                                                       </div><div class="delete">-&lt;div&gt;&lt;/div&gt;  </div><div class=""> ``:code</div><div class=""> </div><div class=""> #### ``flatten`` ``flatten``:inxx</div><div class=""> </div><div class=""> The flatten method recursively serializes the content of the children of a given element into regular text (without tags):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;this&#x27;, DIV(&#x27;is&#x27;, B(&#x27;a&#x27;))), SPAN(&#x27;test&#x27;))</div><div class=""> &gt;&gt;&gt; print a.flatten()</div><div class=""> thisisatest</div><div class=""> ``:code</div><div class=""> </div><div class=""> Flatten can be passed an optional argument, ``render``, i.e. a function that renders/flattens the content using a different protocol. Here is an example to serialize some tags into Markmin wiki syntax:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(H1(&#x27;title&#x27;), P(&#x27;example of a &#x27;, A(&#x27;link&#x27;, _href=&#x27;#test&#x27;)))</div><div class=""> &gt;&gt;&gt; from gluon.html import markmin_serializer</div><div class=""> &gt;&gt;&gt; print a.flatten(render=markmin_serializer)</div><div class=""> ## titles</div><div class=""> </div><div class=""> example of [[a link #test]]</div><div class=""> ``:code</div><div class=""> </div><div class=""> At the time of writing we provide ``markmin_serializer`` and ``markdown_serializer``.</div><div class=""> </div><div class=""> #### Parsing</div><div class=""> </div><div class=""> The TAG object is also an XML/HTML parser. It can read text and convert into a tree structure of helpers. This allows manipulation using the API above:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; html = &#x27;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;this is a &lt;span&gt;test&lt;/span&gt;&lt;/p&gt;&#x27;</div><div class=""> &gt;&gt;&gt; parsed_html = TAG(html)</div><div class=""> &gt;&gt;&gt; parsed_html.element(&#x27;span&#x27;)[0]=&#x27;TEST&#x27;</div><div class=""> response.menu = [(&#x27;Google&#x27;, False, &#x27;http://www.google.com&#x27;,[]),</div><div class="">                  (&#x27;Index&#x27;,  True,  URL(&#x27;index&#x27;), [])]</div><div class=""> ``:code</div><div class=""> </div><div class=""> ``sub-menu``:inxx</div><div class=""> The fourth tuple element is an optional sub-menu.</div><div class=""> </div><div class=""> ``response.files`` is a list of CSS and JS files that are needed by your page.</div><div class=""> </div><div class=""> We also recommend that you use:</div><div class=""> </div><div class=""> ``</div><div class=""> {{include &#x27;web2py_ajax.html&#x27;}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> in the HTML head, since this will include the jQuery libraries and define some backward-compatible JavaScript functions for special effects and Ajax. &quot;web2py_ajax.html&quot; includes the ``response.meta`` tags in the view, jQuery base, the calendar datepicker, and all required CSS and JS ``response.files``.</div><div class=""> </div><div class=""> #### Default page layout</div><div class=""> </div><div class=""> ``Twitter Bootstrap``:inxx</div><div class=""> </div><div class=""> The &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts) is quite complex but it has the following structure:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;!DOCTYPE html&gt;</div><div class=""> &lt;head&gt;</div><div class="">   &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="">   &lt;title&gt;{{=response.title or request.application}}&lt;/title&gt;</div><div class="">   ...</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/modernizr.custom.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class=""> </div><div class="delete">  {{<span class="highlight">  </span></div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py.css&#x27;))</div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/bootstrap.min.css&#x27;))</div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/bootstrap-responsive.min.css&#x27;))</div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py_bootstrap.css&#x27;))</div><div class="">   }}</div><div class=""> </div><div class="">   {{include &#x27;web2py_ajax.html&#x27;}}</div><div class=""> </div><div class="">   {{</div><div class="">   # using sidebars need to know what sidebar you want to use</div><div class="">   left_sidebar_enabled = globals().get(&#x27;left_sidebar_enabled&#x27;,False)</div><div class="">   right_sidebar_enabled = globals().get(&#x27;right_sidebar_enabled&#x27;,False)</div><div class="">   middle_columns = {0:&#x27;span12&#x27;,1:&#x27;span9&#x27;,2:&#x27;span6&#x27;}[</div><div class="">     (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]</div><div class="">   }}</div><div class=""> </div><div class="">   {{block head}}{{end}}</div><div class=""> &lt;/head&gt;</div><div class=""> </div><div class=""> &lt;body&gt;</div><div class="">   &lt;!-- Navbar ================================================== --&gt;</div><div class="">   &lt;div class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;</div><div class="">     &lt;div class=&quot;flash&quot;&gt;{{=response.flash or &#x27;&#x27;}}&lt;/div&gt;</div><div class="">     &lt;div class=&quot;navbar-inner&quot;&gt;</div><div class="">       &lt;div class=&quot;container&quot;&gt;</div><div class="delete"><span class="highlight">	</span>{{=response.logo or &#x27;&#x27;}}</div><div class="">         &lt;ul id=&quot;navbar&quot; class=&quot;nav pull-right&quot;&gt;</div><div class="">           {{=&#x27;auth&#x27; in globals() and auth.navbar(mode=&quot;dropdown&quot;) or &#x27;&#x27;}}</div><div class="">         &lt;/ul&gt;</div><div class="">         &lt;div class=&quot;nav-collapse&quot;&gt;</div><div class="">           {{if response.menu:}}</div><div class="">           {{=MENU(response.menu)}}</div><div class="">           {{pass}}</div><div class="">         &lt;/div&gt;&lt;!--/.nav-collapse --&gt;</div><div class="">       &lt;/div&gt;</div><div class="">     &lt;/div&gt;</div><div class="">   &lt;/div&gt;&lt;!--/top navbar --&gt;</div><div class=""> </div><div class="">   &lt;div class=&quot;container&quot;&gt;</div><div class="">     &lt;!-- Masthead ================================================== --&gt;</div><div class="">     &lt;header class=&quot;mastheader row&quot; id=&quot;header&quot;&gt;</div><div class="">         &lt;div class=&quot;span12&quot;&gt;</div><div class="">             &lt;div class=&quot;page-header&quot;&gt;</div><div class="">                 &lt;h1&gt;</div><div class="">                     {{=response.title or request.application}}</div><div class="">                     &lt;small&gt;{{=response.subtitle or &#x27;&#x27;}}&lt;/small&gt;</div><div class="">                 &lt;/h1&gt;</div><div class="">             &lt;/div&gt;</div><div class="">         &lt;/div&gt;</div><div class="">     &lt;/header&gt;</div><div class=""> </div><div class="">     &lt;section id=&quot;main&quot; class=&quot;main row&quot;&gt;</div><div class="">         {{if left_sidebar_enabled:}}</div><div class="">         &lt;div class=&quot;span3 left-sidebar&quot;&gt;</div><div class="">             {{block left_sidebar}}</div><div class="">             &lt;h3&gt;Left Sidebar&lt;/h3&gt;</div><div class="">             &lt;p&gt;&lt;/p&gt;</div><div class="">             {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class=""> </div><div class="">         &lt;div class=&quot;{{=middle_columns}}&quot;&gt;</div><div class="">             {{block center}}</div><div class="">             {{include}}</div><div class="">             {{end}}</div><div class="">         &lt;/div&gt;</div><div class=""> </div><div class="">         {{if right_sidebar_enabled:}}</div><div class="">         &lt;div class=&quot;span3&quot;&gt;</div><div class="">             {{block right_sidebar}}</div><div class="">             &lt;h3&gt;Right Sidebar&lt;/h3&gt;</div><div class="">             &lt;p&gt;&lt;/p&gt;</div><div class="">             {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class="">     &lt;/section&gt;&lt;!--/main--&gt;</div><div class=""> </div><div class="">     &lt;!-- Footer ================================================== --&gt;</div><div class="">     &lt;div class=&quot;row&quot;&gt;</div><div class="">         &lt;footer class=&quot;footer span12&quot; id=&quot;footer&quot;&gt;</div><div class="">             &lt;div class=&quot;footer-content&quot;&gt;</div><div class="">                 {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="delete"><span class="highlight">		</span>...</div><div class="">                 {{end}}</div><div class="">             &lt;/div&gt;</div><div class="">         &lt;/footer&gt;</div><div class="">     &lt;/div&gt;</div><div class=""> </div><div class="">   &lt;/div&gt; &lt;!-- /container --&gt;</div><div class=""> </div><div class="">   &lt;!-- The javascript =============================================</div><div class="">        (Placed at the end of the document so the pages load faster) --&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/bootstrap.min.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/web2py_bootstrap.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">   {{if response.google_analytics_id:}}</div><div class="">     &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/analytics.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="">     &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="">     analytics.initialize({</div><div class="delete">      &#x27;Google Analytics&#x27;:{trackingId:&#x27;{{=response.google_analytics_id}}&#x27;}<span class="highlight"> </span></div><div class="">     });&lt;/script&gt;</div><div class="">   {{pass}}</div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of Twitter Boostrap for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class=""> - It uses &quot;analytics.js&quot; to connect to Google Analytics.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> In views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> It generates the following output:</div><div class=""> ``:code</div><div class=""> </div><div class=""> You can have many blocks, and if a block is present in the extended view but not in the extending view, the content of the extended view is used. Also, notice that unlike with functions, it is not necessary to define blocks before the ``{{extend ...}}`` -- even if defined after the ``extend``, they can be used to make substitutions anywhere in the extended view.</div><div class=""> </div><div class=""> ``super``:inxx</div><div class=""> </div><div class=""> Inside a block, you can use the expression ``{{super}}`` to include the content of the parent. For example, if we replace the above extending view with:</div><div class=""> </div><div class=""> ``</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> Hello World!!!</div><div class=""> {{block mysidebar}}</div><div class=""> {{super}}</div><div class=""> my new sidebar!!!</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> we get:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;html&gt;</div><div class="">   &lt;body&gt;</div><div class="">     Hello World!!!</div><div class="">     &lt;div class=&quot;sidebar&quot;&gt;</div><div class="">         my default sidebar</div><div class="">         my new sidebar!!!</div><div class="">     &lt;/div&gt;</div><div class="">   &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class="delete">-</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/d70086e374f3d93371823e3a509dd0167961b34c">d70086e</a><ul><li>Date : 2012-10-13</li><li>sessions in red and compress static files</li></ul></li></ul>
<div class="row-fluid" id="com_d70086e374f3d93371823e3a509dd0167961b34c">
    <div class="span6"><div class="diff"><div class="insert">Notice that the decorator must be import<span class="highlight"></span>e<span class="highlight">d</span> before using it in a controller.</div><div class=""> When the &quot;index&quot; function is called from a regular browser (desktop computer), web2py will render the returned dictionary using the view &quot;[controller]/index.html&quot;. However, when it is called by a mobile device, the dictionary will be rendered by &quot;[controller]/index.mobile.html&quot;. Notice that mobile views have the &quot;mobile.html&quot; extension.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">Notice that the decorator must be import<span class="highlight">ant onc</span>e<span class="highlight"></span> before using it in a controller.</div><div class=""> When the &quot;index&quot; function is called from a regular browser (desktop computer), web2py will render the returned dictionary using the view &quot;[controller]/index.html&quot;. However, when it is called by a mobile device, the dictionary will be rendered by &quot;[controller]/index.mobile.html&quot;. Notice that mobile views have the &quot;mobile.html&quot; extension.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/76c0363755694c36971ffc9db176312fe5c14276">76c0363</a><ul><li>Date : 2012-12-22</li><li>more and more additions and corrections</li></ul></li></ul>
<div class="row-fluid" id="com_76c0363755694c36971ffc9db176312fe5c14276">
    <div class="span6"><div class="diff"><div class=""> #### Default page layout</div><div class=""> </div><div class="insert">+``Twitter Bootstrap``:inxx</div><div class="insert">+</div><div class="insert">+The &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts) is quote complex but is has the following structure:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;!DOCTYPE html&gt;</div><div class=""> &lt;head&gt;</div><div class="">   &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="">   &lt;title&gt;{{=response.title or request.application}}&lt;/title&gt;</div><div class="insert"><span class="highlight">  ...</span></div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/modernizr.custom.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class=""> </div><div class="insert">  <span class="highlight">{{  </span></div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py.css&#x27;))</div><div class="insert">+  response.files.append(URL(&#x27;static&#x27;,&#x27;css/bootstrap.min.css&#x27;))</div><div class="insert">+  response.files.append(URL(&#x27;static&#x27;,&#x27;css/bootstrap-responsive.min.css&#x27;))</div><div class="insert">+  response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py_bootstrap.css&#x27;))</div><div class="">   }}</div><div class=""> </div><div class="">   {{include &#x27;web2py_ajax.html&#x27;}}</div><div class=""> </div><div class="">   {{</div><div class="">   # using sidebars need to know what sidebar you want to use</div><div class="">   left_sidebar_enabled = globals().get(&#x27;left_sidebar_enabled&#x27;,False)</div><div class="">   right_sidebar_enabled = globals().get(&#x27;right_sidebar_enabled&#x27;,False)</div><div class="insert">+  middle_columns = {0:&#x27;span12&#x27;,1:&#x27;span9&#x27;,2:&#x27;span6&#x27;}[</div><div class="insert">+    (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]</div><div class="">   }}</div><div class=""> </div><div class="insert">+  {{block head}}{{end}}</div><div class=""> &lt;/head&gt;</div><div class=""> </div><div class="insert">+&lt;body&gt;</div><div class="insert">+  &lt;!-- Navbar ================================================== --&gt;</div><div class="insert">+  &lt;div class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;</div><div class="">     &lt;div class=&quot;flash&quot;&gt;{{=response.flash or &#x27;&#x27;}}&lt;/div&gt;</div><div class="insert">    &lt;div class=&quot;<span class="highlight">n</span>a<span class="highlight">vbar-inn</span>er&quot;&gt;</div><div class="">       &lt;div class=&quot;container&quot;&gt;</div><div class="insert">+	{{=response.logo or &#x27;&#x27;}}</div><div class="insert">+        &lt;ul id=&quot;navbar&quot; class=&quot;nav pull-right&quot;&gt;</div><div class="insert">+          {{=&#x27;auth&#x27; in globals() and auth.navbar(mode=&quot;dropdown&quot;) or &#x27;&#x27;}}</div><div class="insert">+        &lt;/ul&gt;</div><div class="insert">+        &lt;div class=&quot;nav-collapse&quot;&gt;</div><div class="insert">+          {{if response.menu:}}</div><div class="insert">+          {{=MENU(response.menu)}}</div><div class="insert">+          {{pass}}</div><div class="insert">+        &lt;/div&gt;&lt;!--/.nav-collapse --&gt;</div><div class="">       &lt;/div&gt;</div><div class="">     &lt;/div&gt;</div><div class="insert">+  &lt;/div&gt;&lt;!--/top navbar --&gt;</div><div class="insert">+</div><div class="insert">+  &lt;div class=&quot;container&quot;&gt;</div><div class="insert">+    &lt;!-- Masthead ================================================== --&gt;</div><div class="insert">+    &lt;header class=&quot;mastheader row&quot; id=&quot;header&quot;&gt;</div><div class="insert">+        &lt;div class=&quot;span12&quot;&gt;</div><div class="insert">+            &lt;div class=&quot;page-header&quot;&gt;</div><div class="insert">+                &lt;h1&gt;</div><div class="insert">+                    {{=response.title or request.application}}</div><div class="insert">+                    &lt;small&gt;{{=response.subtitle or &#x27;&#x27;}}&lt;/small&gt;</div><div class="insert">+                &lt;/h1&gt;</div><div class="insert">+            &lt;/div&gt;</div><div class="insert">+        &lt;/div&gt;</div><div class="insert">+    &lt;/header&gt;</div><div class=""> </div><div class="insert"><span class="highlight"></span>    &lt;<span class="highlight">section i</span>d<span class="highlight">=&quot;ma</span>i<span class="highlight">n&quot;</span> class=&quot;<span class="highlight">m</span>ain<span class="highlight"> </span>r<span class="highlight">ow</span>&quot;&gt;</div><div class="">         {{if left_sidebar_enabled:}}</div><div class="insert">+        &lt;div class=&quot;span3 left-sidebar&quot;&gt;</div><div class="insert">+            {{block left_sidebar}}</div><div class="insert">+            &lt;h3&gt;Left Sidebar&lt;/h3&gt;</div><div class="insert">+            &lt;p&gt;&lt;/p&gt;</div><div class="insert">+            {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class=""> </div><div class="insert">+        &lt;div class=&quot;{{=middle_columns}}&quot;&gt;</div><div class="insert">+            {{block center}}</div><div class="insert">+            {{include}}</div><div class="insert">+            {{end}}</div><div class="">         &lt;/div&gt;</div><div class=""> </div><div class="">         {{if right_sidebar_enabled:}}</div><div class="insert">+        &lt;div class=&quot;span3&quot;&gt;</div><div class="insert">+            {{block right_sidebar}}</div><div class="insert">+            &lt;h3&gt;Right Sidebar&lt;/h3&gt;</div><div class="insert">+            &lt;p&gt;&lt;/p&gt;</div><div class="insert">+            {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class="insert">+    &lt;/section&gt;&lt;!--/main--&gt;</div><div class="insert">+</div><div class="insert">+    &lt;!-- Footer ================================================== --&gt;</div><div class="insert">+    &lt;div class=&quot;row&quot;&gt;</div><div class="insert">+        &lt;footer class=&quot;footer span12&quot; id=&quot;footer&quot;&gt;</div><div class="insert">+            &lt;div class=&quot;footer-content&quot;&gt;</div><div class="insert">+                {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="insert">+		...</div><div class="insert">+                {{end}}</div><div class="insert">+            &lt;/div&gt;</div><div class="insert">+        &lt;/footer&gt;</div><div class="insert">+    &lt;/div&gt;</div><div class=""> </div><div class="insert">+  &lt;/div&gt; &lt;!-- /container --&gt;</div><div class="insert">+</div><div class="insert">+  &lt;!-- The javascript =============================================</div><div class="insert">+       (Placed at the end of the document so the pages load faster) --&gt;</div><div class="insert">+  &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/bootstrap.min.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="insert">+  &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/web2py_bootstrap.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="insert">+  {{if response.google_analytics_id:}}</div><div class="insert">+    &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/analytics.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class="insert">+    &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="insert">+    analytics.initialize({</div><div class="insert">+      &#x27;Google Analytics&#x27;:{trackingId:&#x27;{{=response.google_analytics_id}}&#x27;} </div><div class="insert">+    });&lt;/script&gt;</div><div class="insert">+  {{pass}}</div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class="insert">+- It uses a modified version of Twitter Boostrap for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class="insert">+- It uses &quot;analytics.js&quot; to connect to Google Analytics.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class="insert"><span class="highlight">In v</span>iews can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class="insert">Customizing the default layout without editing is <span class="highlight">easy because the welcome application is based on Twitter Bootstrap which is well documented and supports themes. In web2py four static files which are rele</span>v<span class="highlight">ant to style</span>:</div><div class=""> </div><div class="insert">+- &quot;css/web2py.css&quot; contains web2py specific styles</div><div class="insert">+- &quot;css/bootstrap.min.css&quot; contains the Twitter Boostrap CSS style ``bootstrap``:cite ``Bootstrap``:inxx</div><div class="insert">+- &quot;css/web2py_bootstrap.css&quot; contains with overrides some Bootstrap styles to conform to web2py needs.</div><div class="insert">+- &quot;js/bootstrap.min.js&quot; which includes the libraries for menu effects, modals, panels.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> #### Default page layout</div><div class="delete">-``superfish``:inxx ``ez.css``:inxx</div><div class=""> </div><div class="delete">-Below is the &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts). Any new application will have a similar default layout:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;!DOCTYPE html&gt;</div><div class=""> &lt;head&gt;</div><div class="">   &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="">   &lt;title&gt;{{=response.title or request.application}}&lt;/title&gt;</div><div class="delete">-</div><div class="delete">-  &lt;!-- http://dev.w3.org/html5/markup/meta.name.html --&gt;</div><div class="delete">-  &lt;meta name=&quot;application-name&quot; content=&quot;{{=request.application}}&quot; /&gt;</div><div class="delete"><span class="highlight"></span></div><div class="">   &lt;script src=&quot;{{=URL(&#x27;static&#x27;,&#x27;js/modernizr.custom.js&#x27;)}}&quot;&gt;&lt;/script&gt;</div><div class=""> </div><div class="delete">-  &lt;!-- include stylesheets --&gt;</div><div class="delete">-  {{</div><div class="delete">  <span class="highlight">response.files.append(URL(&#x27;static&#x27;,&#x27;css/skeleton.css&#x27;))</span></div><div class="">   response.files.append(URL(&#x27;static&#x27;,&#x27;css/web2py.css&#x27;))</div><div class="delete">-  response.files.append(URL(&#x27;static&#x27;,&#x27;css/superfish.css&#x27;))</div><div class="delete">-  response.files.append(URL(&#x27;static&#x27;,&#x27;js/superfish.js&#x27;))</div><div class="">   }}</div><div class=""> </div><div class="">   {{include &#x27;web2py_ajax.html&#x27;}}</div><div class=""> </div><div class="delete">-  &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="delete">-    jQuery(function(){ jQuery(&#x27;ul.sf-menu&#x27;).supersubs({minWidth:12,maxWidth:30,extraWidth:3}).superfish(); });</div><div class="delete">-  &lt;/script&gt;</div><div class="delete">-</div><div class="">   {{</div><div class="">   # using sidebars need to know what sidebar you want to use</div><div class="">   left_sidebar_enabled = globals().get(&#x27;left_sidebar_enabled&#x27;,False)</div><div class="">   right_sidebar_enabled = globals().get(&#x27;right_sidebar_enabled&#x27;,False)</div><div class="delete">-  middle_columns = {0:&#x27;sixteen&#x27;,1:&#x27;twelve&#x27;,2:&#x27;eight&#x27;}[</div><div class="delete">-     (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]</div><div class="">   }}</div><div class=""> </div><div class=""> &lt;/head&gt;</div><div class="delete">-&lt;body&gt;</div><div class="delete">-  &lt;div class=&quot;wrapper&quot;&gt;&lt;!-- for sticky footer --&gt;</div><div class="delete">-</div><div class="delete">-    &lt;div class=&quot;topbar&quot;&gt;</div><div class="delete">-      &lt;div class=&quot;container&quot;&gt;</div><div class="delete">-        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-          &lt;div id=&quot;navbar&quot;&gt;</div><div class="delete">-            {{=&#x27;auth&#x27; in globals() and auth.navbar(separators=(&#x27; &#x27;,&#x27; | &#x27;,&#x27;&#x27;))}}</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-          &lt;div id=&quot;menu&quot;&gt;</div><div class="delete">-            {{=MENU(response.menu,</div><div class="delete">-                    _class=&#x27;mobile-menu&#x27; if is_mobile else &#x27;sf-menu&#x27;,</div><div class="delete">-                    mobile=request.user_agent().is_mobile)}}</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-      &lt;/div&gt;</div><div class="delete">-    &lt;/div&gt;&lt;!-- topbar --&gt;</div><div class=""> </div><div class="">     &lt;div class=&quot;flash&quot;&gt;{{=response.flash or &#x27;&#x27;}}&lt;/div&gt;</div><div class="delete">-</div><div class="delete">    &lt;div class=&quot;<span class="highlight">he</span>a<span class="highlight">d</span>er&quot;&gt;</div><div class="">       &lt;div class=&quot;container&quot;&gt;</div><div class="delete">-        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-          &lt;h1 class=&quot;remove-bottom&quot; style=&quot;margin-top: .5em;&quot;&gt;</div><div class="delete">-          {{=response.title or request.application}}</div><div class="delete">-          &lt;/h1&gt;</div><div class="delete">-          &lt;h5&gt;{{=response.subtitle or &#x27;&#x27;}}&lt;/h5&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-</div><div class="delete">-        &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-          &lt;div class=&quot;statusbar&quot;&gt;</div><div class="delete">-            {{block statusbar}}</div><div class="delete">-            &lt;span class=&quot;breadcrumbs&quot;&gt;{{=request.function}}&lt;/span&gt;</div><div class="delete">-            {{end}}</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="">       &lt;/div&gt;</div><div class="">     &lt;/div&gt;</div><div class=""> </div><div class="delete">-    &lt;div class=&quot;main&quot;&gt;</div><div class="delete"><span class="highlight">  </span>    &lt;<span class="highlight"></span>d<span class="highlight"></span>i<span class="highlight">v</span> class=&quot;<span class="highlight">cont</span>ain<span class="highlight">e</span>r<span class="highlight"></span>&quot;&gt;</div><div class="">         {{if left_sidebar_enabled:}}</div><div class="delete">-        &lt;div class=&quot;four columns left-sidebar&quot;&gt;</div><div class="delete">-          {{block left_sidebar}}</div><div class="delete">-          &lt;h3&gt;Left Sidebar&lt;/h3&gt;</div><div class="delete">-          &lt;p&gt;&lt;/p&gt;</div><div class="delete">-          {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class=""> </div><div class="delete">-        &lt;div class=&quot;{{=middle_columns}} columns center&quot;&gt;</div><div class="delete">-          {{block center}}</div><div class="delete">-          {{include}}</div><div class="delete">-          {{end}}</div><div class="">         &lt;/div&gt;</div><div class=""> </div><div class="">         {{if right_sidebar_enabled:}}</div><div class="delete">-        &lt;div class=&quot;four columns&quot;&gt;</div><div class="delete">-          {{block right_sidebar}}</div><div class="delete">-          &lt;h3&gt;Right Sidebar&lt;/h3&gt;</div><div class="delete">-          &lt;p&gt;&lt;/p&gt;</div><div class="delete">-          {{end}}</div><div class="">         &lt;/div&gt;</div><div class="">         {{pass}}</div><div class=""> </div><div class="delete">-      &lt;/div&gt;&lt;!-- container --&gt;</div><div class="delete">-    &lt;/div&gt;&lt;!-- main --&gt;</div><div class="delete">-</div><div class="delete">-    &lt;div class=&quot;push&quot;&gt;&lt;/div&gt;</div><div class="delete">-  &lt;/div&gt;&lt;!-- wrapper --&gt;</div><div class="delete">-</div><div class="delete">-  &lt;div class=&quot;footer&quot;&gt;</div><div class="delete">-    &lt;div class=&quot;container header&quot;&gt;</div><div class="delete">-      &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="delete">-        {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="delete">-        &lt;div class=&quot;footer-content&quot; &gt;</div><div class="delete">-          {{=T(&#x27;Copyright&#x27;)}} &amp;#169; 2011</div><div class="delete">-          &lt;div style=&quot;float: right;&quot;&gt;</div><div class="delete">-            &lt;a href=&quot;http://www.web2py.com/&quot;&gt;</div><div class="delete">-            &lt;img style=&quot;padding-bottom: 0;&quot;</div><div class="delete">-                 src=&quot;{{=URL(&#x27;static&#x27;,&#x27;images/poweredby.png&#x27;)}}&quot;/&gt;</div><div class="delete">-            &lt;/a&gt;</div><div class="delete">-          &lt;/div&gt;</div><div class="delete">-        &lt;/div&gt;</div><div class="delete">-        {{end}}</div><div class="delete">-      &lt;/div&gt;</div><div class="delete">-    &lt;/div&gt;&lt;!-- container --&gt;</div><div class="delete">-  &lt;/div&gt;&lt;!-- footer --&gt;</div><div class="delete">-</div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class="delete">-</div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class="delete">-- It uses a modified version of &quot;skeleton&quot; ``skeleton``:cite a library for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class="delete">-- It uses &quot;superfish.js&quot; ``superfish``:cite for dynamic cascading menus. There is an explicit script to activate the superfish cascading menu and it can be removed if not necessary.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class="delete"><span class="highlight">V</span>iews can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class="delete">Customizing the default layout without editing is <span class="highlight"></span>v<span class="highlight">ery easy because the CSS files are documented</span>:</div><div class=""> </div><div class="delete">-- &quot;bootstrap.min.css&quot; contains the Twitter Boostrap CSS style ``bootstrap``:cite ``Bootstrap``:inxx</div><div class="delete">-- &quot;web2py.css&quot; contains web2py specific styles</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/e9cfe4c59d781f0c6856c48992ec384892311fde">e9cfe4c</a><ul><li>Date : 2012-12-26</li><li>Minor typos</li></ul></li></ul>
<div class="row-fluid" id="com_e9cfe4c59d781f0c6856c48992ec384892311fde">
    <div class="span6"><div class="diff"><div class="insert">The &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts) is qu<span class="highlight">i</span>te complex but i<span class="highlight">t</span> has the following structure:</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">The &quot;views/layout.html&quot; that ships with the web2py scaffolding application **welcome** (stripped down of some optional parts) is qu<span class="highlight">o</span>te complex but i<span class="highlight">s</span> has the following structure:</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/28816a98948c4a6577f73bdeb2b7424dc55d2582">28816a9</a><ul><li>Date : 2012-12-23</li><li>code building book</li></ul></li></ul>
<div class="row-fluid" id="com_28816a98948c4a6577f73bdeb2b7424dc55d2582">
    <div class="span6"><div class="diff"><div class="insert">can be used to build complex expressions that can then be serialized to XML``xml<span class="highlight">-</span>w``:cite ``xml<span class="highlight">-</span>o``:cite. For example:</div><div class=""> ``</div><div class=""> {{=DIV(B(I(&quot;hello &quot;, &quot;&lt;world&gt;&quot;))), _class=&quot;myclass&quot;)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> is rendered:</div><div class=""> ``</div><div class=""> &lt;div class=&quot;myclass&quot;&gt;&lt;b&gt;&lt;i&gt;hello &amp;lt;world&amp;gt;&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Helpers can also be serialized into strings, equivalently, with the ``__str__`` and the ``xml`` methods:</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print str(DIV(&quot;hello world&quot;))</div><div class=""> &lt;div&gt;hello world&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; print DIV(&quot;hello world&quot;).xml()</div><div class=""> &lt;div&gt;hello world&lt;/div&gt;</div><div class=""> ``</div><div class=""> </div><div class=""> ``Document Object Model (DOM)``:inxx</div><div class=""> The helpers mechanism in web2py is more than a system to generate HTML without concatenating strings. It provides a server-side representation of the Document Object Model (DOM).</div><div class=""> </div><div class=""> Components of helpers can be referenced via their position, and helpers act as lists with respect to their components:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, &#x27;b&#x27;), &#x27;c&#x27;)</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div&gt;&lt;span&gt;ab&lt;/span&gt;c&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; del a[1]</div><div class=""> &gt;&gt;&gt; a.append(B(&#x27;x&#x27;))</div><div class=""> &gt;&gt;&gt; a[0][0] = &#x27;y&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> The &quot;enctype&quot; is &quot;multipart/form-data&quot; by default.</div><div class=""> The constructor of a ``FORM``, and of ``SQLFORM``, can also take a special argument called ``hidden``. When a dictionary is passed as ``hidden``, its items are translated into &quot;hidden&quot; INPUT fields. For example:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print FORM(hidden=dict(a=&#x27;b&#x27;))</div><div class=""> &lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</div><div class=""> &lt;input value=&quot;b&quot; type=&quot;hidden&quot; name=&quot;a&quot; /&gt;&lt;/form&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``H1``, ``H2``, ``H3``, ``H4``, ``H5``, ``H6``</div><div class=""> ``H1``:inxx</div><div class=""> </div><div class=""> These helpers are for paragraph headings and subheadings:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print H1(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;h1 id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/h1&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``HEAD``</div><div class=""> </div><div class=""> For tagging the HEAD of an HTML page.</div><div class=""> </div><div class=""> ``HEAD``:inxx</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print HEAD(TITLE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class=""> &lt;head&gt;&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;&lt;/head&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``HTML``</div><div class=""> ``HTML``:inxx ``XHTML``:inxx</div><div class=""> </div><div class=""> This helper is a little different. In addition to making the ``&lt;html&gt;`` tags,</div><div class="insert">it prepends the tag with a doctype string``xhtml<span class="highlight">-</span>w,xhtml<span class="highlight">-</span>o,xhtml<span class="highlight">-</span>school``:cite .</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print HTML(BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class=""> &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</div><div class="">                       &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</div><div class=""> &lt;html&gt;&lt;body&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;&lt;/html&gt;</div><div class=""> ``:code</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">can be used to build complex expressions that can then be serialized to XML``xml<span class="highlight">:</span>w``:cite ``xml<span class="highlight">:</span>o``:cite. For example:</div><div class=""> ``</div><div class=""> {{=DIV(B(I(&quot;hello &quot;, &quot;&lt;world&gt;&quot;))), _class=&quot;myclass&quot;)}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> is rendered:</div><div class=""> ``</div><div class=""> &lt;div class=&quot;myclass&quot;&gt;&lt;b&gt;&lt;i&gt;hello &amp;lt;world&amp;gt;&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Helpers can also be serialized into strings, equivalently, with the ``__str__`` and the ``xml`` methods:</div><div class=""> </div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print str(DIV(&quot;hello world&quot;))</div><div class=""> &lt;div&gt;hello world&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; print DIV(&quot;hello world&quot;).xml()</div><div class=""> &lt;div&gt;hello world&lt;/div&gt;</div><div class=""> ``</div><div class=""> </div><div class=""> ``Document Object Model (DOM)``:inxx</div><div class=""> The helpers mechanism in web2py is more than a system to generate HTML without concatenating strings. It provides a server-side representation of the Document Object Model (DOM).</div><div class=""> </div><div class=""> Components of helpers can be referenced via their position, and helpers act as lists with respect to their components:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; a = DIV(SPAN(&#x27;a&#x27;, &#x27;b&#x27;), &#x27;c&#x27;)</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> &lt;div&gt;&lt;span&gt;ab&lt;/span&gt;c&lt;/div&gt;</div><div class=""> &gt;&gt;&gt; del a[1]</div><div class=""> &gt;&gt;&gt; a.append(B(&#x27;x&#x27;))</div><div class=""> &gt;&gt;&gt; a[0][0] = &#x27;y&#x27;</div><div class=""> &gt;&gt;&gt; print a</div><div class=""> The &quot;enctype&quot; is &quot;multipart/form-data&quot; by default.</div><div class=""> The constructor of a ``FORM``, and of ``SQLFORM``, can also take a special argument called ``hidden``. When a dictionary is passed as ``hidden``, its items are translated into &quot;hidden&quot; INPUT fields. For example:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print FORM(hidden=dict(a=&#x27;b&#x27;))</div><div class=""> &lt;form enctype=&quot;multipart/form-data&quot; action=&quot;&quot; method=&quot;post&quot;&gt;</div><div class=""> &lt;input value=&quot;b&quot; type=&quot;hidden&quot; name=&quot;a&quot; /&gt;&lt;/form&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``H1``, ``H2``, ``H3``, ``H4``, ``H5``, ``H6``</div><div class=""> ``H1``:inxx</div><div class=""> </div><div class=""> These helpers are for paragraph headings and subheadings:</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print H1(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;h1 id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/h1&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``HEAD``</div><div class=""> </div><div class=""> For tagging the HEAD of an HTML page.</div><div class=""> </div><div class=""> ``HEAD``:inxx</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print HEAD(TITLE(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class=""> &lt;head&gt;&lt;title&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/title&gt;&lt;/head&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``HTML``</div><div class=""> ``HTML``:inxx ``XHTML``:inxx</div><div class=""> </div><div class=""> This helper is a little different. In addition to making the ``&lt;html&gt;`` tags,</div><div class="delete">it prepends the tag with a doctype string``xhtml<span class="highlight">:</span>w,xhtml<span class="highlight">:</span>o,xhtml<span class="highlight">:</span>school``:cite .</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print HTML(BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;)))</div><div class=""> &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</div><div class="">                       &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</div><div class=""> &lt;html&gt;&lt;body&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;&lt;/html&gt;</div><div class=""> ``:code</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/ac4003f4349f9ee22c67309ceeb48de5539b0308">ac4003f</a><ul><li>Date : 2012-09-01</li><li>added lots of new features to book</li></ul></li></ul>
<div class="row-fluid" id="com_ac4003f4349f9ee22c67309ceeb48de5539b0308">
    <div class="span6"><div class="diff"><div class="insert">+A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class="insert">+</div><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class=""> ``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alterantive menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class=""> </div><div class=""> ### ``BEAUTIFY``</div><div class=""> ``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class=""> ``</div><div class=""> {{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class=""> ``:code</div><div class=""> ``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class=""> ``</div><div class=""> {&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class=""> ``:code</div><div class=""> </div><div class=""> will render as:</div><div class=""> ``</div><div class=""> &lt;table&gt;</div><div class=""> There are a few features of this default layout that make it very easy to use an</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of &quot;skeleton&quot; ``skeleton``:cite a library for flexible layouts which works on mobile devices and re-arranges columns to fit small screened.</div><div class=""> - It uses &quot;superfish.js&quot; for dynamic cascading menus. There is an explicit script to activate the superfish cascading menu and it can be removed if not necessary.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a heler factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> Views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is very easy because the CSS files are documented:</div><div class=""> </div><div class="insert">- &quot;<span class="highlight">boot</span>s<span class="highlight"></span>t<span class="highlight">rap.mi</span>n.css&quot; contains <span class="highlight">the Twitte</span>r<span class="highlight"> Boo</span>s<span class="highlight"></span>t<span class="highlight">rap</span> <span class="highlight">CSS</span> style<span class="highlight"> ``Boot</span>s<span class="highlight">trap``:inxx</span></div><div class=""> - &quot;web2py.css&quot; contains web2py specific styles</div><div class=""> </div><div class="insert">+To change colors and background images, </div><div class="insert">+try append the following code to layout.html header:</div><div class=""> </div><div class=""> ``</div><div class="insert">+&lt;style&gt;</div><div class=""> body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class=""> a { color: #349C01; }</div><div class=""> .header h1 { color: #349C01; }</div><div class=""> .header h2 { color: white; font-style: italic; font-size: 14px;}</div><div class=""> .statusbar { background: #333333; border-bottom: 5px #349C01 solid; }</div><div class=""> .statusbar a { color: white; }</div><div class=""> .footer { border-top: 5px #349C01 solid; }</div><div class="insert">+&lt;/style&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Of course you can also completely replace the &quot;layout.html&quot; and &quot;web2py.css&quot; files with your own.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class=""> ``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alterantive menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class=""> </div><div class=""> ### ``BEAUTIFY``</div><div class=""> ``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class=""> ``</div><div class=""> {{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class=""> ``:code</div><div class=""> ``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class=""> ``</div><div class=""> {&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class=""> ``:code</div><div class=""> </div><div class=""> will render as:</div><div class=""> ``</div><div class=""> &lt;table&gt;</div><div class=""> There are a few features of this default layout that make it very easy to use an</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of &quot;skeleton&quot; ``skeleton``:cite a library for flexible layouts which works on mobile devices and re-arranges columns to fit small screened.</div><div class=""> - It uses &quot;superfish.js&quot; for dynamic cascading menus. There is an explicit script to activate the superfish cascading menu and it can be removed if not necessary.</div><div class=""> - The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a heler factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> Views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is very easy because the CSS files are documented:</div><div class=""> </div><div class="delete">- &quot;<span class="highlight"></span>s<span class="highlight">kele</span>t<span class="highlight">o</span>n.css&quot; contains <span class="highlight"></span>r<span class="highlight">e</span>s<span class="highlight">e</span>t<span class="highlight">,</span> <span class="highlight">grid layout and form</span> style<span class="highlight"></span>s<span class="highlight"></span></div><div class=""> - &quot;web2py.css&quot; contains web2py specific styles</div><div class="delete">-- &quot;superfish.css&quot; contains menu styles</div><div class=""> </div><div class="delete">-To change colors and background images, simply append the following code to &quot;web2py.css&quot;:</div><div class=""> </div><div class=""> ``</div><div class=""> body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class=""> a { color: #349C01; }</div><div class=""> .header h1 { color: #349C01; }</div><div class=""> .header h2 { color: white; font-style: italic; font-size: 14px;}</div><div class=""> .statusbar { background: #333333; border-bottom: 5px #349C01 solid; }</div><div class=""> .statusbar a { color: white; }</div><div class=""> .footer { border-top: 5px #349C01 solid; }</div><div class=""> ``:code</div><div class=""> </div><div class="delete">-The menu is built in a color-neutral way but you can change that too.</div><div class="delete">-</div><div class=""> Of course you can also completely replace the &quot;layout.html&quot; and &quot;web2py.css&quot; files with your own.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/9f8f7358720ecddc06a79b90a68cc94ae5b28603">9f8f735</a><ul><li>Date : 2013-02-25</li><li>some edits</li></ul></li></ul>
<div class="row-fluid" id="com_9f8f7358720ecddc06a79b90a68cc94ae5b28603">
    <div class="span6"><div class="diff"><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of Twitter Bootstrap for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class=""> - It uses &quot;analytics.js&quot; to connect to Google Analytics.</div><div class="insert">+- The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to the auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class="insert">+- The ``{{=MENU(response.menu)}}`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class="insert">In views<span class="highlight">m, you</span> can turn on and <span class="highlight">custom</span>i<span class="highlight">ze</span> sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is easy because the welcome application is based on Twitter Bootstrap which is well documented and supports themes. In web2py four static files which are relevant to style:</div><div class=""> </div><div class=""> - &quot;css/web2py.css&quot; contains web2py specific styles</div><div class=""> - &quot;css/bootstrap.min.css&quot; contains the Twitter Bootstrap CSS style ``bootstrap``:cite ``Bootstrap``:inxx</div><div class=""> - &quot;css/web2py_bootstrap.css&quot; contains with overrides some Bootstrap styles to conform to web2py needs.</div><div class=""> - &quot;js/bootstrap.min.js&quot; which includes the libraries for menu effects, modals, panels.</div><div class=""> </div><div class=""> To change colors and background images,</div><div class=""> try append the following code to layout.html header:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;style&gt;</div><div class=""> body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class=""> a { color: #349C01; }</div><div class=""> Consider this &quot;layout.html&quot;:</div><div class=""> and this extending view</div><div class=""> </div><div class=""> ``</div><div class=""> {{def mysidebar():}}</div><div class=""> my new sidebar!!!</div><div class=""> {{return}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> Hello World!!!</div><div class=""> ``:code</div><div class=""> </div><div class=""> Notice the function is defined before the ``{{extend...}}`` statement -- this results in the function being created before the &quot;layout.html&quot; code is executed, so the function can be called anywhere within &quot;layout.html&quot;, even before the ``{{include}}``. Also notice the function is included in the extended view without the ``=`` prefix.</div><div class=""> </div><div class=""> The code generates the following output:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;html&gt;</div><div class="">   &lt;body&gt;</div><div class="">     Hello World!!!</div><div class="">     &lt;div class=&quot;sidebar&quot;&gt;</div><div class="">         my new sidebar!!!</div><div class="">     &lt;/div&gt;</div><div class="">   &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Notice that the function is defined in HTML (although it could also contain Python code) so that ``response.write`` is used to write its content (the function does not return the content). This is why the layout calls the view function using ``{{mysidebar()}}`` rather than ``{{=mysidebar()}}``. Functions defined in this way can take arguments.</div><div class=""> </div><div class=""> ### Blocks in views</div><div class=""> ``block``:inxx</div><div class=""> </div><div class="insert"><span class="highlight">T</span>he<span class="highlight"> main</span> way to make a view more modular is by using ``{{block...}}s`` and this mechanism is an alternative to the mechanism discussed in the previous section.</div></div></div>
    <div class="span6"><div class="diff"><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of Twitter Bootstrap for flexible layouts which works on mobile devices and re-arranges columns to fit small screens.</div><div class=""> - It uses &quot;analytics.js&quot; to connect to Google Analytics.</div><div class="delete">-- The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a helper factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class="delete">-- The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class="delete">In views<span class="highlight"></span> can turn on and <span class="highlight">f</span>i<span class="highlight">ll</span> sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is easy because the welcome application is based on Twitter Bootstrap which is well documented and supports themes. In web2py four static files which are relevant to style:</div><div class=""> </div><div class=""> - &quot;css/web2py.css&quot; contains web2py specific styles</div><div class=""> - &quot;css/bootstrap.min.css&quot; contains the Twitter Bootstrap CSS style ``bootstrap``:cite ``Bootstrap``:inxx</div><div class=""> - &quot;css/web2py_bootstrap.css&quot; contains with overrides some Bootstrap styles to conform to web2py needs.</div><div class=""> - &quot;js/bootstrap.min.js&quot; which includes the libraries for menu effects, modals, panels.</div><div class=""> </div><div class=""> To change colors and background images,</div><div class=""> try append the following code to layout.html header:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;style&gt;</div><div class=""> body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class=""> a { color: #349C01; }</div><div class=""> Consider this &quot;layout.html&quot;:</div><div class=""> and this extending view</div><div class=""> </div><div class=""> ``</div><div class=""> {{def mysidebar():}}</div><div class=""> my new sidebar!!!</div><div class=""> {{return}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> Hello World!!!</div><div class=""> ``:code</div><div class=""> </div><div class=""> Notice the function is defined before the ``{{extend...}}`` statement -- this results in the function being created before the &quot;layout.html&quot; code is executed, so the function can be called anywhere within &quot;layout.html&quot;, even before the ``{{include}}``. Also notice the function is included in the extended view without the ``=`` prefix.</div><div class=""> </div><div class=""> The code generates the following output:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;html&gt;</div><div class="">   &lt;body&gt;</div><div class="">     Hello World!!!</div><div class="">     &lt;div class=&quot;sidebar&quot;&gt;</div><div class="">         my new sidebar!!!</div><div class="">     &lt;/div&gt;</div><div class="">   &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Notice that the function is defined in HTML (although it could also contain Python code) so that ``response.write`` is used to write its content (the function does not return the content). This is why the layout calls the view function using ``{{mysidebar()}}`` rather than ``{{=mysidebar()}}``. Functions defined in this way can take arguments.</div><div class=""> </div><div class=""> ### Blocks in views</div><div class=""> ``block``:inxx</div><div class=""> </div><div class="delete"><span class="highlight">Anot</span>he<span class="highlight">r</span> way to make a view more modular is by using ``{{block...}}s`` and this mechanism is an alternative to the mechanism discussed in the previous section.</div></div></div>
</div>
<hr />

<ul><li><a href="https://github.com/mdipierro/web2py-book/commit/31b67861f63a89ddbca5db525b9ea745b956670e">31b6786</a><ul><li>Date : 2012-09-06</li><li>Fix typos</li></ul></li></ul>
<div class="row-fluid" id="com_31b67861f63a89ddbca5db525b9ea745b956670e">
    <div class="span6"><div class="diff"><div class="insert">Th<span class="highlight">e</span> A helper takes a special argument called ``cid``. It works as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=A(&#x27;linked page&#x27;, _href=&#x27;http://example.com&#x27;, cid=&#x27;myid&#x27;)}}</div><div class=""> &lt;div id=&quot;myid&quot;&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> and a click on the link causes the content to be loaded in the div. This is similar but more powerful than the above syntax since it is designed to refresh page components. We discuss applications of ``cid`` in more detail in Chapter 12, in the context of components.</div><div class=""> </div><div class=""> These ajax features require jQuery and &quot;static/js/web2py_ajax.js&quot;, which are automatically included by placing ``{{include &#x27;web2py_ajax.html&#x27;}}`` in the layout head. &quot;views/web2py_ajax.html&quot; defines some variables based on ``request`` and includes all necessary js and css files.</div><div class=""> </div><div class=""> </div><div class=""> ##### ``B``</div><div class=""> ``B``:inxx</div><div class=""> </div><div class=""> This helper makes its contents bold.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print B(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;i&gt;world&lt;/i&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;b id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;i&gt;world&lt;/i&gt;&lt;/b&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``BODY``</div><div class=""> ``BODY``:inxx</div><div class=""> This helper makes the body of a page.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _bgcolor=&#x27;red&#x27;)</div><div class=""> &lt;body bgcolor=&quot;red&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``BR``</div><div class=""> ``BR``:inxx</div><div class=""> from gluon.contrib.markmin.markmin2html import markmin2html</div><div class=""> print markmin2html(m)</div><div class=""> from gluon.contrib.markmin.markmin2latex import markmin2latex</div><div class=""> print markmin2latex(m)</div><div class=""> from gluon.contrib.markmin.markmin2pdf import markmin2pdf</div><div class=""> print markmin2pdf(m) # requires pdflatex</div><div class=""> ``</div><div class=""> </div><div class=""> (the ``MARKMIN`` helper is a shortcut for ``markmin2html``)</div><div class=""> </div><div class=""> Here is a basic syntax primer:</div><div class=""> </div><div class=""> --------------------------------------------------</div><div class=""> **SOURCE**                 | **OUTPUT**</div><div class=""> ``# title``                | **title**</div><div class=""> ``## section``             | **section**</div><div class=""> ``### subsection``         | **subsection**</div><div class=""> ``**bold**``               | **bold**</div><div class=""> ``&#x27;&#x27;italic&#x27;&#x27;``             | &#x27;&#x27;italic&#x27;&#x27;</div><div class=""> ``!`!`verbatim`!`!``       | ``verbatim``</div><div class=""> ``http://google.com``      | http://google.com</div><div class=""> ``http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;http:...&lt;/a&gt;``</div><div class=""> ``http://...png`` | ``&lt;img src=&quot;http://...png&quot; /&gt;``</div><div class=""> ``http://...mp3`` | ``&lt;audio src=&quot;http://...mp3&quot;&gt;&lt;/audio&gt;``</div><div class=""> ``http://...mp4`` | ``&lt;video src=&quot;http://...mp4&quot;&gt;&lt;/video&gt;``</div><div class=""> ``qr:http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;&lt;img src=&quot;qr code&quot;/&gt;&lt;/a&gt;``</div><div class=""> ``embed:http://...`` | ``&lt;iframe src=&quot;http://...&quot;&gt;&lt;/iframe&gt;``</div><div class=""> ``[[click me #myanchor]]`` | [[click me #myanchor]]</div><div class=""> ``$````$\int_a^b sin(x)dx$````$``  | $$\int_a^b sin(x)dx$$</div><div class=""> ---------------------------------------------------</div><div class=""> </div><div class="insert">Simply including a link to an image, a videos or an audio files without markup result in the corresponding image, video or audio file be<span class="highlight"></span>ing included automatically (for audio and video it uses html &lt;audio&gt; and &lt;video&gt; tags).</div><div class=""> </div><div class=""> Adding a link with the ``qr:`` prefix such as </div><div class=""> </div><div class=""> ``</div><div class=""> qr:http://web2py.com</div><div class=""> ``</div><div class=""> </div><div class=""> results in the corresponding QR code being embedded and linking the said URL.</div><div class=""> </div><div class="insert">Adding a link <span class="highlight">w</span>ith the ``embed:`` prefix such as</div><div class=""> </div><div class=""> ``</div><div class=""> embed:http://www.youtube.com/embed/x1w8hKTJ2Co</div><div class=""> `` </div><div class=""> </div><div class=""> results in the page being embedded, in this case a youtube video is embedded.</div><div class=""> </div><div class=""> Images can also be embedded with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> [[image-description http://.../image.png right 200px]]</div><div class=""> ``</div><div class=""> </div><div class=""> Unordered lists with:</div><div class=""> ``</div><div class=""> - one</div><div class=""> - two</div><div class=""> - three</div><div class=""> ``</div><div class=""> </div><div class=""> Ordered lists with:</div><div class=""> ``</div><div class=""> + one</div><div class=""> + two</div><div class=""> + three</div><div class=""> ``</div><div class=""> </div><div class=""> and tables with:</div><div class=""> ``</div><div class=""> ----------</div><div class=""> The MENU helper takes a list of lists or of tuples of the form of ``response.men</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="">      &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="">      &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="">         &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="">      &lt;/ul&gt;</div><div class="">   &lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class=""> </div><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class="insert">``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alter<span class="highlight">na</span>tive menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class=""> </div><div class=""> ### ``BEAUTIFY``</div><div class=""> ``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class=""> ``</div><div class=""> {{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class=""> ``:code</div><div class=""> ``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class=""> ``</div><div class=""> {&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class=""> ``:code</div><div class=""> </div><div class=""> will render as:</div><div class=""> ``</div><div class=""> &lt;table&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;hello&lt;br /&gt;world&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;1&lt;br /&gt;2&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;/table&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ### Server-side &#x27;&#x27;DOM&#x27;&#x27; and parsing</div><div class=""> ``element``:inxx ``elements``:inxx</div><div class=""> </div><div class=""> The extended layout file must contain an ``{{include}}`` directive, something li</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> When the view is called, the extended (layout) view is loaded, and the calling view replaces the ``{{include}}`` directive inside the layout. Processing continues recursively until all ``extend`` and ``include`` directives have been processed. The resulting template is then translated into Python code. Note, when an application is bytecode compiled, it is this Python code that is compiled, not the original view files themselves. So, the bytecode compiled version of a given view is a single .pyc file that includes the Python code not just for the original view file, but for its entire tree of extended and included views.</div><div class=""> </div><div class=""> -------</div><div class=""> ``extend``, ``include``, ``block`` and ``super`` are special template directives,</div><div class=""> not Python commands.</div><div class=""> -------</div><div class=""> </div><div class=""> Any content or code that precedes the ``{{extend ...}}`` directive will be inserted (and therefore executed) before the beginning of the extended view&#x27;s content/code. Although this is not typically used to insert actual HTML content before the extended view&#x27;s content, it can be useful as a means to define variables or functions that you want to make available to the extended view. For example, consider a view &quot;index.html&quot;:</div><div class=""> ``</div><div class=""> {{sidebar_enabled=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> &lt;h1&gt;Home Page&lt;/h1&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> and an excerpt from &quot;layout.html&quot;:</div><div class=""> ``</div><div class=""> {{if sidebar_enabled:}}</div><div class="">     &lt;div id=&quot;sidebar&quot;&gt;</div><div class="">         Sidebar Content</div><div class="">     &lt;/div&gt;</div><div class=""> {{pass}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> Because the ``sidebar_enabled`` assignment in &quot;index.html&quot; comes before the ``extend``, that line gets inserted before the beginning of &quot;layout.html&quot;, making ``sidebar_enabled`` available anywhere within the &quot;layout.html&quot; code (a somewhat more sophisticated version of this is used in the **welcome** app).</div><div class=""> </div><div class=""> It is also worth pointing out that the variables returned by the controller function are available not only in the function&#x27;s main view, but in all of its extended and included views as well.</div><div class=""> </div><div class="insert">The argument of an ``extend`` or ``include`` (i.e., the extended or included view name) can be a python variable (though not a python expression). However, this imposes a limitation -- views that use variables in ``extend`` or ``include`` statements cannot be bytecode compiled. As noted above, bytecode<span class="highlight">-</span>compiled views include the entire tree of extended and included views, so the specific extended and included views must be known at compile time, which is not possible if the view names are variables (whose values are not determined until run time). Because bytecode compiling views can provide a significant speed boost, using variables in ``extend`` and ``include`` should generally be avoided if possible.</div><div class=""> </div><div class=""> In some cases, an alternative to using a variable in an ``include`` is simply to place regular ``{{include ...}}`` directives inside an ``if...else`` block.</div><div class=""> </div><div class=""> ``</div><div class=""> {{if some_condition:}}</div><div class=""> {{include &#x27;this_view.html&#x27;}}</div><div class=""> {{else:}}</div><div class=""> {{include &#x27;that_view.html&#x27;}}</div><div class=""> {{pass}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> The above code does not present any problem for bytecode compilation because no variables are involved. Note, however, that the bytecode compiled view will actually include the Python code for both &quot;this_view.html&quot; and &quot;that_view.html&quot;, though only the code for one of those views will be executed, depending on the value of ``some_condition``.</div><div class=""> </div><div class=""> Keep in mind, this only works for ``include`` -- you cannot place ``{{extend ...}}`` directives inside ``if...else`` blocks.</div><div class=""> </div><div class=""> ``response.menu``:inxx ``menu``:inxx ``response.meta``:inxx ``meta``:inxx</div><div class=""> </div><div class=""> Layouts are used to encapsulate page commonality (headers, footers, menus), and though they are not mandatory, they will make your application easier to write and maintain.  In particular, we suggest writing layouts that take advantage of the following variables that can be set in the controller. Using these well known variables will help make your layouts interchangeable:</div><div class=""> ``</div><div class=""> response.title</div><div class=""> response.subtitle</div><div class=""> response.meta.author</div><div class=""> response.meta.keywords</div><div class=""> response.meta.description</div><div class=""> response.flash</div><div class=""> response.menu</div><div class=""> response.files</div><div class=""> ``:code</div><div class=""> </div><div class=""> Except for ``menu`` and ``files``, these are all strings and their meaning should be obvious.</div><div class=""> Below is the &quot;views/layout.html&quot; that ships with the web2py scaffolding applicat</div><div class="">   &lt;div class=&quot;footer&quot;&gt;</div><div class="">     &lt;div class=&quot;container header&quot;&gt;</div><div class="">       &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="">         {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="">         &lt;div class=&quot;footer-content&quot; &gt;</div><div class="">           {{=T(&#x27;Copyright&#x27;)}} &amp;#169; 2011</div><div class="">           &lt;div style=&quot;float: right;&quot;&gt;</div><div class="">             &lt;a href=&quot;http://www.web2py.com/&quot;&gt;</div><div class="">             &lt;img style=&quot;padding-bottom: 0;&quot; </div><div class="">                  src=&quot;{{=URL(&#x27;static&#x27;,&#x27;images/poweredby.png&#x27;)}}&quot;/&gt;</div><div class="">             &lt;/a&gt;</div><div class="">           &lt;/div&gt;</div><div class="">         &lt;/div&gt;</div><div class="">         {{end}}</div><div class="">       &lt;/div&gt;</div><div class="">     &lt;/div&gt;&lt;!-- container --&gt;</div><div class="">   &lt;/div&gt;&lt;!-- footer --&gt;</div><div class=""> </div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> </div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of &quot;skeleton&quot; ``skeleton``:cite a library for flexible layouts which works on mobile devices and re-arranges columns to fit small screened.</div><div class=""> - It uses &quot;superfish.js&quot; for dynamic cascading menus. There is an explicit script to activate the superfish cascading menu and it can be removed if not necessary.</div><div class="insert">- The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a hel<span class="highlight">p</span>er factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> Views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is very easy because the CSS files are documented:</div><div class=""> </div><div class=""> - &quot;bootstrap.min.css&quot; contains the Twitter Boostrap CSS style ``Bootstrap``:inxx</div><div class=""> - &quot;web2py.css&quot; contains web2py specific styles</div><div class=""> </div><div class=""> To change colors and background images, </div><div class=""> try append the following code to layout.html header:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;style&gt;</div><div class=""> body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class=""> a { color: #349C01; }</div><div class=""> .header h1 { color: #349C01; }</div><div class=""> .header h2 { color: white; font-style: italic; font-size: 14px;}</div><div class=""> .statusbar { background: #333333; border-bottom: 5px #349C01 solid; }</div><div class=""> .statusbar a { color: white; }</div><div class=""> .footer { border-top: 5px #349C01 solid; }</div><div class=""> &lt;/style&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Of course you can also completely replace the &quot;layout.html&quot; and &quot;web2py.css&quot; files with your own.</div><div class=""> </div><div class=""> #### Mobile development</div><div class=""> </div><div class="insert">The default layout.html is designed to be friendly to mobile devices but that is not enough<span class="highlight"></span>. One may need to use different views when a page is visited by a mobile device.</div></div></div>
    <div class="span6"><div class="diff"><div class="delete">Th<span class="highlight">a</span> A helper takes a special argument called ``cid``. It works as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=A(&#x27;linked page&#x27;, _href=&#x27;http://example.com&#x27;, cid=&#x27;myid&#x27;)}}</div><div class=""> &lt;div id=&quot;myid&quot;&gt;&lt;/div&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> and a click on the link causes the content to be loaded in the div. This is similar but more powerful than the above syntax since it is designed to refresh page components. We discuss applications of ``cid`` in more detail in Chapter 12, in the context of components.</div><div class=""> </div><div class=""> These ajax features require jQuery and &quot;static/js/web2py_ajax.js&quot;, which are automatically included by placing ``{{include &#x27;web2py_ajax.html&#x27;}}`` in the layout head. &quot;views/web2py_ajax.html&quot; defines some variables based on ``request`` and includes all necessary js and css files.</div><div class=""> </div><div class=""> </div><div class=""> ##### ``B``</div><div class=""> ``B``:inxx</div><div class=""> </div><div class=""> This helper makes its contents bold.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print B(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;i&gt;world&lt;/i&gt;&#x27;), _class=&#x27;test&#x27;, _id=0)</div><div class=""> &lt;b id=&quot;0&quot; class=&quot;test&quot;&gt;&amp;lt;hello&amp;gt;&lt;i&gt;world&lt;/i&gt;&lt;/b&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``BODY``</div><div class=""> ``BODY``:inxx</div><div class=""> This helper makes the body of a page.</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print BODY(&#x27;&lt;hello&gt;&#x27;, XML(&#x27;&lt;b&gt;world&lt;/b&gt;&#x27;), _bgcolor=&#x27;red&#x27;)</div><div class=""> &lt;body bgcolor=&quot;red&quot;&gt;&amp;lt;hello&amp;gt;&lt;b&gt;world&lt;/b&gt;&lt;/body&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ##### ``BR``</div><div class=""> ``BR``:inxx</div><div class=""> from gluon.contrib.markmin.markmin2html import markmin2html</div><div class=""> print markmin2html(m)</div><div class=""> from gluon.contrib.markmin.markmin2latex import markmin2latex</div><div class=""> print markmin2latex(m)</div><div class=""> from gluon.contrib.markmin.markmin2pdf import markmin2pdf</div><div class=""> print markmin2pdf(m) # requires pdflatex</div><div class=""> ``</div><div class=""> </div><div class=""> (the ``MARKMIN`` helper is a shortcut for ``markmin2html``)</div><div class=""> </div><div class=""> Here is a basic syntax primer:</div><div class=""> </div><div class=""> --------------------------------------------------</div><div class=""> **SOURCE**                 | **OUTPUT**</div><div class=""> ``# title``                | **title**</div><div class=""> ``## section``             | **section**</div><div class=""> ``### subsection``         | **subsection**</div><div class=""> ``**bold**``               | **bold**</div><div class=""> ``&#x27;&#x27;italic&#x27;&#x27;``             | &#x27;&#x27;italic&#x27;&#x27;</div><div class=""> ``!`!`verbatim`!`!``       | ``verbatim``</div><div class=""> ``http://google.com``      | http://google.com</div><div class=""> ``http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;http:...&lt;/a&gt;``</div><div class=""> ``http://...png`` | ``&lt;img src=&quot;http://...png&quot; /&gt;``</div><div class=""> ``http://...mp3`` | ``&lt;audio src=&quot;http://...mp3&quot;&gt;&lt;/audio&gt;``</div><div class=""> ``http://...mp4`` | ``&lt;video src=&quot;http://...mp4&quot;&gt;&lt;/video&gt;``</div><div class=""> ``qr:http://...`` | ``&lt;a href=&quot;http://...&quot;&gt;&lt;img src=&quot;qr code&quot;/&gt;&lt;/a&gt;``</div><div class=""> ``embed:http://...`` | ``&lt;iframe src=&quot;http://...&quot;&gt;&lt;/iframe&gt;``</div><div class=""> ``[[click me #myanchor]]`` | [[click me #myanchor]]</div><div class=""> ``$````$\int_a^b sin(x)dx$````$``  | $$\int_a^b sin(x)dx$$</div><div class=""> ---------------------------------------------------</div><div class=""> </div><div class="delete">Simply including a link to an image, a videos or an audio files without markup result in the corresponding image, video or audio file be<span class="highlight">l</span>ing included automatically (for audio and video it uses html &lt;audio&gt; and &lt;video&gt; tags).</div><div class=""> </div><div class=""> Adding a link with the ``qr:`` prefix such as </div><div class=""> </div><div class=""> ``</div><div class=""> qr:http://web2py.com</div><div class=""> ``</div><div class=""> </div><div class=""> results in the corresponding QR code being embedded and linking the said URL.</div><div class=""> </div><div class="delete">Adding a link <span class="highlight">t</span>ith the ``embed:`` prefix such as</div><div class=""> </div><div class=""> ``</div><div class=""> embed:http://www.youtube.com/embed/x1w8hKTJ2Co</div><div class=""> `` </div><div class=""> </div><div class=""> results in the page being embedded, in this case a youtube video is embedded.</div><div class=""> </div><div class=""> Images can also be embedded with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> [[image-description http://.../image.png right 200px]]</div><div class=""> ``</div><div class=""> </div><div class=""> Unordered lists with:</div><div class=""> ``</div><div class=""> - one</div><div class=""> - two</div><div class=""> - three</div><div class=""> ``</div><div class=""> </div><div class=""> Ordered lists with:</div><div class=""> ``</div><div class=""> + one</div><div class=""> + two</div><div class=""> + three</div><div class=""> ``</div><div class=""> </div><div class=""> and tables with:</div><div class=""> ``</div><div class=""> ----------</div><div class=""> The MENU helper takes a list of lists or of tuples of the form of ``response.men</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;], [&#x27;Two&#x27;, False, &#x27;link2&#x27;]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</div><div class="">   &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Each menu item can have a fourth argument that is a nested submenu (and so on recursively):</div><div class=""> ``</div><div class=""> &gt;&gt;&gt; print MENU([[&#x27;One&#x27;, False, &#x27;link1&#x27;, [[&#x27;Two&#x27;, False, &#x27;link2&#x27;]]]])</div><div class=""> &lt;ul class=&quot;web2py-menu web2py-menu-vertical&quot;&gt;</div><div class="">   &lt;li class=&quot;web2py-menu-expand&quot;&gt;</div><div class="">      &lt;a href=&quot;link1&quot;&gt;One&lt;/a&gt;</div><div class="">      &lt;ul class=&quot;web2py-menu-vertical&quot;&gt;</div><div class="">         &lt;li&gt;&lt;a href=&quot;link2&quot;&gt;Two&lt;/a&gt;&lt;/li&gt;</div><div class="">      &lt;/ul&gt;</div><div class="">   &lt;/li&gt;</div><div class=""> &lt;/ul&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> A menu item can also have an optional 5th element, which is a boolean. When false, the menu item is ignored by the MENU helper.</div><div class=""> </div><div class=""> The MENU helper takes the following optional arguments:</div><div class=""> - ``_class``: defaults to &quot;web2py-menu web2py-menu-vertical&quot; and sets the class of the outer UL elements.</div><div class=""> - ``ul_class``: defaults to &quot;web2py-menu-vertical&quot; and sets the class of the inner UL elements.</div><div class=""> - ``li_class``: defaults to &quot;web2py-menu-expand&quot; and sets the class of the inner LI elements.</div><div class=""> </div><div class=""> ``mobile``:inxx</div><div class=""> </div><div class="delete">``MENU`` takes an optional argument ``mobile``. When set to ``True`` instead of building a recursive ``UL`` menu structure it returns a ``SELECT`` dropdown with all the menu options and a ``onchange`` attribute that redirects to the page corresponding to the selected option. This is designed an an alter<span class="highlight">an</span>tive menu representation that increases usability on small mobile devices such as phones.</div><div class=""> </div><div class=""> Normally the menu is used in a layout with the following syntax:</div><div class=""> </div><div class=""> ``</div><div class=""> {{=MENU(response.menu, mobile=request.user_agent().is_mobile)}}</div><div class=""> ``</div><div class=""> </div><div class=""> In this way a mobile device is automatically detected and the menu is rendered accordingly.</div><div class=""> </div><div class=""> ### ``BEAUTIFY``</div><div class=""> ``BEAUTIFY`` is used to build HTML representations of compound objects, including lists, tuples and dictionaries:</div><div class=""> ``</div><div class=""> {{=BEAUTIFY({&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)})}}</div><div class=""> ``:code</div><div class=""> ``BEAUTIFY`` returns an XML-like object serializable to XML, with a nice looking representation of its constructor argument. In this case, the XML representation of:</div><div class=""> ``</div><div class=""> {&quot;a&quot;: [&quot;hello&quot;, XML(&quot;world&quot;)], &quot;b&quot;: (1, 2)}</div><div class=""> ``:code</div><div class=""> </div><div class=""> will render as:</div><div class=""> ``</div><div class=""> &lt;table&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;hello&lt;br /&gt;world&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;tr&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;:&lt;/td&gt;&lt;td&gt;1&lt;br /&gt;2&lt;/td&gt;&lt;/tr&gt;</div><div class=""> &lt;/table&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> ### Server-side &#x27;&#x27;DOM&#x27;&#x27; and parsing</div><div class=""> ``element``:inxx ``elements``:inxx</div><div class=""> </div><div class=""> The extended layout file must contain an ``{{include}}`` directive, something li</div><div class=""> &lt;/html&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> When the view is called, the extended (layout) view is loaded, and the calling view replaces the ``{{include}}`` directive inside the layout. Processing continues recursively until all ``extend`` and ``include`` directives have been processed. The resulting template is then translated into Python code. Note, when an application is bytecode compiled, it is this Python code that is compiled, not the original view files themselves. So, the bytecode compiled version of a given view is a single .pyc file that includes the Python code not just for the original view file, but for its entire tree of extended and included views.</div><div class=""> </div><div class=""> -------</div><div class=""> ``extend``, ``include``, ``block`` and ``super`` are special template directives,</div><div class=""> not Python commands.</div><div class=""> -------</div><div class=""> </div><div class=""> Any content or code that precedes the ``{{extend ...}}`` directive will be inserted (and therefore executed) before the beginning of the extended view&#x27;s content/code. Although this is not typically used to insert actual HTML content before the extended view&#x27;s content, it can be useful as a means to define variables or functions that you want to make available to the extended view. For example, consider a view &quot;index.html&quot;:</div><div class=""> ``</div><div class=""> {{sidebar_enabled=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> &lt;h1&gt;Home Page&lt;/h1&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> and an excerpt from &quot;layout.html&quot;:</div><div class=""> ``</div><div class=""> {{if sidebar_enabled:}}</div><div class="">     &lt;div id=&quot;sidebar&quot;&gt;</div><div class="">         Sidebar Content</div><div class="">     &lt;/div&gt;</div><div class=""> {{pass}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> Because the ``sidebar_enabled`` assignment in &quot;index.html&quot; comes before the ``extend``, that line gets inserted before the beginning of &quot;layout.html&quot;, making ``sidebar_enabled`` available anywhere within the &quot;layout.html&quot; code (a somewhat more sophisticated version of this is used in the **welcome** app).</div><div class=""> </div><div class=""> It is also worth pointing out that the variables returned by the controller function are available not only in the function&#x27;s main view, but in all of its extended and included views as well.</div><div class=""> </div><div class="delete">The argument of an ``extend`` or ``include`` (i.e., the extended or included view name) can be a python variable (though not a python expression). However, this imposes a limitation -- views that use variables in ``extend`` or ``include`` statements cannot be bytecode compiled. As noted above, bytecode<span class="highlight"> </span>compiled views include the entire tree of extended and included views, so the specific extended and included views must be known at compile time, which is not possible if the view names are variables (whose values are not determined until run time). Because bytecode compiling views can provide a significant speed boost, using variables in ``extend`` and ``include`` should generally be avoided if possible.</div><div class=""> </div><div class=""> In some cases, an alternative to using a variable in an ``include`` is simply to place regular ``{{include ...}}`` directives inside an ``if...else`` block.</div><div class=""> </div><div class=""> ``</div><div class=""> {{if some_condition:}}</div><div class=""> {{include &#x27;this_view.html&#x27;}}</div><div class=""> {{else:}}</div><div class=""> {{include &#x27;that_view.html&#x27;}}</div><div class=""> {{pass}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> The above code does not present any problem for bytecode compilation because no variables are involved. Note, however, that the bytecode compiled view will actually include the Python code for both &quot;this_view.html&quot; and &quot;that_view.html&quot;, though only the code for one of those views will be executed, depending on the value of ``some_condition``.</div><div class=""> </div><div class=""> Keep in mind, this only works for ``include`` -- you cannot place ``{{extend ...}}`` directives inside ``if...else`` blocks.</div><div class=""> </div><div class=""> ``response.menu``:inxx ``menu``:inxx ``response.meta``:inxx ``meta``:inxx</div><div class=""> </div><div class=""> Layouts are used to encapsulate page commonality (headers, footers, menus), and though they are not mandatory, they will make your application easier to write and maintain.  In particular, we suggest writing layouts that take advantage of the following variables that can be set in the controller. Using these well known variables will help make your layouts interchangeable:</div><div class=""> ``</div><div class=""> response.title</div><div class=""> response.subtitle</div><div class=""> response.meta.author</div><div class=""> response.meta.keywords</div><div class=""> response.meta.description</div><div class=""> response.flash</div><div class=""> response.menu</div><div class=""> response.files</div><div class=""> ``:code</div><div class=""> </div><div class=""> Except for ``menu`` and ``files``, these are all strings and their meaning should be obvious.</div><div class=""> Below is the &quot;views/layout.html&quot; that ships with the web2py scaffolding applicat</div><div class="">   &lt;div class=&quot;footer&quot;&gt;</div><div class="">     &lt;div class=&quot;container header&quot;&gt;</div><div class="">       &lt;div class=&quot;sixteen columns&quot;&gt;</div><div class="">         {{block footer}} &lt;!-- this is default footer --&gt;</div><div class="">         &lt;div class=&quot;footer-content&quot; &gt;</div><div class="">           {{=T(&#x27;Copyright&#x27;)}} &amp;#169; 2011</div><div class="">           &lt;div style=&quot;float: right;&quot;&gt;</div><div class="">             &lt;a href=&quot;http://www.web2py.com/&quot;&gt;</div><div class="">             &lt;img style=&quot;padding-bottom: 0;&quot; </div><div class="">                  src=&quot;{{=URL(&#x27;static&#x27;,&#x27;images/poweredby.png&#x27;)}}&quot;/&gt;</div><div class="">             &lt;/a&gt;</div><div class="">           &lt;/div&gt;</div><div class="">         &lt;/div&gt;</div><div class="">         {{end}}</div><div class="">       &lt;/div&gt;</div><div class="">     &lt;/div&gt;&lt;!-- container --&gt;</div><div class="">   &lt;/div&gt;&lt;!-- footer --&gt;</div><div class=""> </div><div class=""> &lt;/body&gt;</div><div class=""> &lt;/html&gt;</div><div class=""> </div><div class=""> ``:code</div><div class=""> </div><div class=""> There are a few features of this default layout that make it very easy to use and customize:</div><div class=""> </div><div class=""> - It is written in HTML5 and uses the &quot;modernizr&quot; ``modernizr``:cite library for backward compatibility. The actual layout include some extra conditional statements required by IE and they are omitted for brevity.</div><div class=""> - It displays both ``response.title`` and ``response.subtitle`` which can be set in a model. If they are not set, it adopts the application name as title</div><div class=""> - It includes the ``web2py_ajax.html`` file in the header which generated all the link and script import statements.</div><div class=""> - It uses a modified version of &quot;skeleton&quot; ``skeleton``:cite a library for flexible layouts which works on mobile devices and re-arranges columns to fit small screened.</div><div class=""> - It uses &quot;superfish.js&quot; for dynamic cascading menus. There is an explicit script to activate the superfish cascading menu and it can be removed if not necessary.</div><div class="delete">- The ``{{=auth.navbar(...)}}`` displays a welcome to the current user and links to auth functions like login, logout, register, change password, etc. depending on context. It is a hel<span class="highlight"></span>er factory and its output can be manipulated as any other helper. It is placed in a ``{{try:}}...{{except:pass}}`` in case auth is undefined.</div><div class=""> - The ``{{=MENU(response.menu)`` displays the menu structure as ``&lt;ul&gt;...&lt;/ul&gt;``.</div><div class=""> - ``{{include}}`` is replaced by the content of the extending view when the page is rendered.</div><div class=""> - By default it uses a conditional three column (the left and right sidebars can be turned off by the extending views)</div><div class=""> - It uses the following classes: header, main, footer</div><div class=""> - It contains the following blocks: statusbar, left_sidebar, center, right_sidebar, footer.</div><div class=""> </div><div class=""> Views can turn on and fill sidebars as follows:</div><div class=""> </div><div class=""> ``</div><div class=""> {{left_sidebar_enable=True}}</div><div class=""> {{extend &#x27;layout.html&#x27;}}</div><div class=""> </div><div class=""> This text goes in center</div><div class=""> </div><div class=""> {{block left_sidebar}}</div><div class=""> This text goes in sidebar</div><div class=""> {{end}}</div><div class=""> ``:code</div><div class=""> </div><div class=""> #### Customizing the default layout</div><div class=""> </div><div class=""> ``CSS``:inxx</div><div class=""> </div><div class=""> Customizing the default layout without editing is very easy because the CSS files are documented:</div><div class=""> </div><div class=""> - &quot;bootstrap.min.css&quot; contains the Twitter Boostrap CSS style ``Bootstrap``:inxx</div><div class=""> - &quot;web2py.css&quot; contains web2py specific styles</div><div class=""> </div><div class=""> To change colors and background images, </div><div class=""> try append the following code to layout.html header:</div><div class=""> </div><div class=""> ``</div><div class=""> &lt;style&gt;</div><div class=""> body { background: url(&#x27;images/background.png&#x27;) repeat-x #3A3A3A; }</div><div class=""> a { color: #349C01; }</div><div class=""> .header h1 { color: #349C01; }</div><div class=""> .header h2 { color: white; font-style: italic; font-size: 14px;}</div><div class=""> .statusbar { background: #333333; border-bottom: 5px #349C01 solid; }</div><div class=""> .statusbar a { color: white; }</div><div class=""> .footer { border-top: 5px #349C01 solid; }</div><div class=""> &lt;/style&gt;</div><div class=""> ``:code</div><div class=""> </div><div class=""> Of course you can also completely replace the &quot;layout.html&quot; and &quot;web2py.css&quot; files with your own.</div><div class=""> </div><div class=""> #### Mobile development</div><div class=""> </div><div class="delete">The default layout.html is designed to be friendly to mobile devices but that is not enough<span class="highlight">t</span>. One may need to use different views when a page is visited by a mobile device.</div></div></div>
</div>
<hr />


        
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container-fluid">
          <div class="copyright pull-left">Copyright &#169; 2013</div>
          <div id="poweredBy" class="pull-right">
              Powered by
              <a href="http://www.web2py.com/">web2py</a>
          </div>
      </div>
    </div>
<script src="static/js/bootstrap.min.js"></script>
<script src="static/js/web2py_bootstrap.js"></script>
</body>
</html>
